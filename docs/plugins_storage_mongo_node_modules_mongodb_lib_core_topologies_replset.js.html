<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>plugins/storage_mongo/node_modules/mongodb/lib/core/topologies/replset.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Admin.html">Admin</a><ul class='methods'><li data-type='method'><a href="Admin.html#addUser">addUser</a></li><li data-type='method'><a href="Admin.html#buildInfo">buildInfo</a></li><li data-type='method'><a href="Admin.html#command">command</a></li><li data-type='method'><a href="Admin.html#listDatabases">listDatabases</a></li><li data-type='method'><a href="Admin.html#ping">ping</a></li><li data-type='method'><a href="Admin.html#removeUser">removeUser</a></li><li data-type='method'><a href="Admin.html#replSetGetStatus">replSetGetStatus</a></li><li data-type='method'><a href="Admin.html#serverInfo">serverInfo</a></li><li data-type='method'><a href="Admin.html#serverStatus">serverStatus</a></li><li data-type='method'><a href="Admin.html#validateCollection">validateCollection</a></li></ul></li><li><a href="AggregationCursor.html">AggregationCursor</a><ul class='methods'><li data-type='method'><a href="AggregationCursor.html#batchSize">batchSize</a></li><li data-type='method'><a href="AggregationCursor.html#clone">clone</a></li><li data-type='method'><a href="AggregationCursor.html#close">close</a></li><li data-type='method'><a href="AggregationCursor.html#each">each</a></li><li data-type='method'><a href="AggregationCursor.html#explain">explain</a></li><li data-type='method'><a href="AggregationCursor.html#forEach">forEach</a></li><li data-type='method'><a href="AggregationCursor.html#geoNear">geoNear</a></li><li data-type='method'><a href="AggregationCursor.html#group">group</a></li><li data-type='method'><a href="AggregationCursor.html#hasNext">hasNext</a></li><li data-type='method'><a href="AggregationCursor.html#isClosed">isClosed</a></li><li data-type='method'><a href="AggregationCursor.html#limit">limit</a></li><li data-type='method'><a href="AggregationCursor.html#lookup">lookup</a></li><li data-type='method'><a href="AggregationCursor.html#match">match</a></li><li data-type='method'><a href="AggregationCursor.html#maxTimeMS">maxTimeMS</a></li><li data-type='method'><a href="AggregationCursor.html#next">next</a></li><li data-type='method'><a href="AggregationCursor.html#out">out</a></li><li data-type='method'><a href="AggregationCursor.html#pause">pause</a></li><li data-type='method'><a href="AggregationCursor.html#pipe">pipe</a></li><li data-type='method'><a href="AggregationCursor.html#project">project</a></li><li data-type='method'><a href="AggregationCursor.html#read">read</a></li><li data-type='method'><a href="AggregationCursor.html#redact">redact</a></li><li data-type='method'><a href="AggregationCursor.html#resume">resume</a></li><li data-type='method'><a href="AggregationCursor.html#rewind">rewind</a></li><li data-type='method'><a href="AggregationCursor.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="AggregationCursor.html#skip">skip</a></li><li data-type='method'><a href="AggregationCursor.html#sort">sort</a></li><li data-type='method'><a href="AggregationCursor.html#toArray">toArray</a></li><li data-type='method'><a href="AggregationCursor.html#unpipe">unpipe</a></li><li data-type='method'><a href="AggregationCursor.html#unshift">unshift</a></li><li data-type='method'><a href="AggregationCursor.html#unwind">unwind</a></li><li data-type='method'><a href="AggregationCursor.html#wrap">wrap</a></li></ul></li><li><a href="AuthProvider.html">AuthProvider</a><ul class='methods'><li data-type='method'><a href="AuthProvider.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="AuthProvider.html#auth">auth</a></li><li data-type='method'><a href="AuthProvider.html#logout">logout</a></li><li data-type='method'><a href="AuthProvider.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="Binary.html">Binary</a><ul class='methods'><li data-type='method'><a href="Binary.html#length">length</a></li><li data-type='method'><a href="Binary.html#put">put</a></li><li data-type='method'><a href="Binary.html#read">read</a></li><li data-type='method'><a href="Binary.html#value">value</a></li><li data-type='method'><a href="Binary.html#write">write</a></li></ul></li><li><a href="Blacklist.html">Blacklist</a><ul class='methods'><li data-type='method'><a href="Blacklist.html#blacklistUser">blacklistUser</a></li><li data-type='method'><a href="Blacklist.html#isUserBlacklisted">isUserBlacklisted</a></li><li data-type='method'><a href="Blacklist.html#isUserBlacklistedQuick">isUserBlacklistedQuick</a></li><li data-type='method'><a href="Blacklist.html#unblacklistUser">unblacklistUser</a></li></ul></li><li><a href="BSONRegExp.html">BSONRegExp</a></li><li><a href="BulkOperationBase.html">BulkOperationBase</a><ul class='methods'><li data-type='method'><a href="BulkOperationBase.html#bulkExecute">bulkExecute</a></li><li data-type='method'><a href="BulkOperationBase.html#execute">execute</a></li><li data-type='method'><a href="BulkOperationBase.html#finalOptionsHandler">finalOptionsHandler</a></li><li data-type='method'><a href="BulkOperationBase.html#find">find</a></li><li data-type='method'><a href="BulkOperationBase.html#handleWriteError">handleWriteError</a></li><li data-type='method'><a href="BulkOperationBase.html#insert">insert</a></li><li data-type='method'><a href="BulkOperationBase.html#raw">raw</a></li></ul></li><li><a href="BulkWriteError.html">BulkWriteError</a></li><li><a href="BulkWriteResult.html">BulkWriteResult</a><ul class='methods'><li data-type='method'><a href="BulkWriteResult.html#getInsertedIds">getInsertedIds</a></li><li data-type='method'><a href="BulkWriteResult.html#getLastOp">getLastOp</a></li><li data-type='method'><a href="BulkWriteResult.html#getRawResponse">getRawResponse</a></li><li data-type='method'><a href="BulkWriteResult.html#getUpsertedIdAt">getUpsertedIdAt</a></li><li data-type='method'><a href="BulkWriteResult.html#getUpsertedIds">getUpsertedIds</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteConcernError">getWriteConcernError</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteErrorAt">getWriteErrorAt</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteErrorCount">getWriteErrorCount</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteErrors">getWriteErrors</a></li><li data-type='method'><a href="BulkWriteResult.html#hasWriteErrors">hasWriteErrors</a></li><li data-type='method'><a href="BulkWriteResult.html#isOk">isOk</a></li><li data-type='method'><a href="BulkWriteResult.html#toJSON">toJSON</a></li><li data-type='method'><a href="BulkWriteResult.html#toString">toString</a></li></ul></li><li><a href="ChangeStream.html">ChangeStream</a><ul class='methods'><li data-type='method'><a href="ChangeStream.html#close">close</a></li><li data-type='method'><a href="ChangeStream.html#hasNext">hasNext</a></li><li data-type='method'><a href="ChangeStream.html#isClosed">isClosed</a></li><li data-type='method'><a href="ChangeStream.html#next">next</a></li><li data-type='method'><a href="ChangeStream.html#pause">pause</a></li><li data-type='method'><a href="ChangeStream.html#pipe">pipe</a></li><li data-type='method'><a href="ChangeStream.html#resume">resume</a></li><li data-type='method'><a href="ChangeStream.html#stream">stream</a></li><li data-type='method'><a href="ChangeStream.html#unpipe">unpipe</a></li></ul></li><li><a href="Chunk.html">Chunk</a><ul class='methods'><li data-type='method'><a href="Chunk.html#buildMongoObject">buildMongoObject</a></li><li data-type='method'><a href="Chunk.html#eof">eof</a></li><li data-type='method'><a href="Chunk.html#getc">getc</a></li><li data-type='method'><a href="Chunk.html#length">length</a></li><li data-type='method'><a href="Chunk.html#read">read</a></li><li data-type='method'><a href="Chunk.html#rewind">rewind</a></li><li data-type='method'><a href="Chunk.html#save">save</a></li><li data-type='method'><a href="Chunk.html#write">write</a></li></ul></li><li><a href="ClientSession.html">ClientSession</a><ul class='methods'><li data-type='method'><a href="ClientSession.html#abortTransaction">abortTransaction</a></li><li data-type='method'><a href="ClientSession.html#advanceOperationTime">advanceOperationTime</a></li><li data-type='method'><a href="ClientSession.html#commitTransaction">commitTransaction</a></li><li data-type='method'><a href="ClientSession.html#endSession">endSession</a></li><li data-type='method'><a href="ClientSession.html#equals">equals</a></li><li data-type='method'><a href="ClientSession.html#incrementTransactionNumber">incrementTransactionNumber</a></li><li data-type='method'><a href="ClientSession.html#inTransaction">inTransaction</a></li><li data-type='method'><a href="ClientSession.html#startTransaction">startTransaction</a></li><li data-type='method'><a href="ClientSession.html#withTransaction">withTransaction</a></li></ul></li><li><a href="Code.html">Code</a></li><li><a href="Collection.html">Collection</a><ul class='methods'><li data-type='method'><a href="Collection.html#aggregate">aggregate</a></li><li data-type='method'><a href="Collection.html#bulkWrite">bulkWrite</a></li><li data-type='method'><a href="Collection.html#count">count</a></li><li data-type='method'><a href="Collection.html#countDocuments">countDocuments</a></li><li data-type='method'><a href="Collection.html#createIndex">createIndex</a></li><li data-type='method'><a href="Collection.html#createIndexes">createIndexes</a></li><li data-type='method'><a href="Collection.html#deleteMany">deleteMany</a></li><li data-type='method'><a href="Collection.html#deleteOne">deleteOne</a></li><li data-type='method'><a href="Collection.html#distinct">distinct</a></li><li data-type='method'><a href="Collection.html#drop">drop</a></li><li data-type='method'><a href="Collection.html#dropAllIndexes">dropAllIndexes</a></li><li data-type='method'><a href="Collection.html#dropIndex">dropIndex</a></li><li data-type='method'><a href="Collection.html#dropIndexes">dropIndexes</a></li><li data-type='method'><a href="Collection.html#ensureIndex">ensureIndex</a></li><li data-type='method'><a href="Collection.html#estimatedDocumentCount">estimatedDocumentCount</a></li><li data-type='method'><a href="Collection.html#find">find</a></li><li data-type='method'><a href="Collection.html#findAndModify">findAndModify</a></li><li data-type='method'><a href="Collection.html#findAndRemove">findAndRemove</a></li><li data-type='method'><a href="Collection.html#findOne">findOne</a></li><li data-type='method'><a href="Collection.html#findOneAndDelete">findOneAndDelete</a></li><li data-type='method'><a href="Collection.html#findOneAndReplace">findOneAndReplace</a></li><li data-type='method'><a href="Collection.html#findOneAndUpdate">findOneAndUpdate</a></li><li data-type='method'><a href="Collection.html#geoHaystackSearch">geoHaystackSearch</a></li><li data-type='method'><a href="Collection.html#group">group</a></li><li data-type='method'><a href="Collection.html#indexes">indexes</a></li><li data-type='method'><a href="Collection.html#indexExists">indexExists</a></li><li data-type='method'><a href="Collection.html#indexInformation">indexInformation</a></li><li data-type='method'><a href="Collection.html#initializeOrderedBulkOp">initializeOrderedBulkOp</a></li><li data-type='method'><a href="Collection.html#initializeUnorderedBulkOp">initializeUnorderedBulkOp</a></li><li data-type='method'><a href="Collection.html#insert">insert</a></li><li data-type='method'><a href="Collection.html#insertMany">insertMany</a></li><li data-type='method'><a href="Collection.html#insertOne">insertOne</a></li><li data-type='method'><a href="Collection.html#isCapped">isCapped</a></li><li data-type='method'><a href="Collection.html#listIndexes">listIndexes</a></li><li data-type='method'><a href="Collection.html#mapReduce">mapReduce</a></li><li data-type='method'><a href="Collection.html#options">options</a></li><li data-type='method'><a href="Collection.html#parallelCollectionScan">parallelCollectionScan</a></li><li data-type='method'><a href="Collection.html#reIndex">reIndex</a></li><li data-type='method'><a href="Collection.html#remove">remove</a></li><li data-type='method'><a href="Collection.html#rename">rename</a></li><li data-type='method'><a href="Collection.html#replaceOne">replaceOne</a></li><li data-type='method'><a href="Collection.html#save">save</a></li><li data-type='method'><a href="Collection.html#stats">stats</a></li><li data-type='method'><a href="Collection.html#update">update</a></li><li data-type='method'><a href="Collection.html#updateMany">updateMany</a></li><li data-type='method'><a href="Collection.html#updateOne">updateOne</a></li><li data-type='method'><a href="Collection.html#watch">watch</a></li></ul></li><li><a href="Command.html">Command</a></li><li><a href="CommandCursor.html">CommandCursor</a><ul class='methods'><li data-type='method'><a href="CommandCursor.html#batchSize">batchSize</a></li><li data-type='method'><a href="CommandCursor.html#clone">clone</a></li><li data-type='method'><a href="CommandCursor.html#close">close</a></li><li data-type='method'><a href="CommandCursor.html#each">each</a></li><li data-type='method'><a href="CommandCursor.html#hasNext">hasNext</a></li><li data-type='method'><a href="CommandCursor.html#isClosed">isClosed</a></li><li data-type='method'><a href="CommandCursor.html#maxTimeMS">maxTimeMS</a></li><li data-type='method'><a href="CommandCursor.html#next">next</a></li><li data-type='method'><a href="CommandCursor.html#pause">pause</a></li><li data-type='method'><a href="CommandCursor.html#pipe">pipe</a></li><li data-type='method'><a href="CommandCursor.html#read">read</a></li><li data-type='method'><a href="CommandCursor.html#resume">resume</a></li><li data-type='method'><a href="CommandCursor.html#rewind">rewind</a></li><li data-type='method'><a href="CommandCursor.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="CommandCursor.html#setReadPreference">setReadPreference</a></li><li data-type='method'><a href="CommandCursor.html#toArray">toArray</a></li><li data-type='method'><a href="CommandCursor.html#unpipe">unpipe</a></li><li data-type='method'><a href="CommandCursor.html#unshift">unshift</a></li><li data-type='method'><a href="CommandCursor.html#wrap">wrap</a></li></ul></li><li><a href="CommandFailedEvent.html">CommandFailedEvent</a></li><li><a href="CommandManager.html">CommandManager</a><ul class='methods'><li data-type='method'><a href="CommandManager.html#getHelpCommandHelper">getHelpCommandHelper</a></li></ul></li><li><a href="CommandResult.html">CommandResult</a><ul class='methods'><li data-type='method'><a href="CommandResult.html#toJSON">toJSON</a></li><li data-type='method'><a href="CommandResult.html#toString">toString</a></li></ul></li><li><a href="CommandStartedEvent.html">CommandStartedEvent</a></li><li><a href="CommandSucceededEvent.html">CommandSucceededEvent</a></li><li><a href="Connection.html">Connection</a><ul class='methods'><li data-type='method'><a href="Connection.html#destroy">destroy</a></li><li data-type='method'><a href="Connection.html#isConnected">isConnected</a></li><li data-type='method'><a href="Connection.html#toJSON">toJSON</a></li><li data-type='method'><a href="Connection.html#toString">toString</a></li><li data-type='method'><a href="Connection.html#unref">unref</a></li><li data-type='method'><a href="Connection.html#write">write</a></li></ul></li><li><a href="CoreCursor.html">CoreCursor</a><ul class='methods'><li data-type='method'><a href="CoreCursor.html#_next">_next</a></li><li data-type='method'><a href="CoreCursor.html#bufferedCount">bufferedCount</a></li><li data-type='method'><a href="CoreCursor.html#clone">clone</a></li><li data-type='method'><a href="CoreCursor.html#isDead">isDead</a></li><li data-type='method'><a href="CoreCursor.html#isKilled">isKilled</a></li><li data-type='method'><a href="CoreCursor.html#isNotified">isNotified</a></li><li data-type='method'><a href="CoreCursor.html#kill">kill</a></li><li data-type='method'><a href="CoreCursor.html#readBufferedDocuments">readBufferedDocuments</a></li><li data-type='method'><a href="CoreCursor.html#rewind">rewind</a></li></ul></li><li><a href="Cursor.html">Cursor</a><ul class='methods'><li data-type='method'><a href="Cursor.html#addCursorFlag">addCursorFlag</a></li><li data-type='method'><a href="Cursor.html#addQueryModifier">addQueryModifier</a></li><li data-type='method'><a href="Cursor.html#batchSize">batchSize</a></li><li data-type='method'><a href="Cursor.html#clone">clone</a></li><li data-type='method'><a href="Cursor.html#close">close</a></li><li data-type='method'><a href="Cursor.html#collation">collation</a></li><li data-type='method'><a href="Cursor.html#comment">comment</a></li><li data-type='method'><a href="Cursor.html#count">count</a></li><li data-type='method'><a href="Cursor.html#each">each</a></li><li data-type='method'><a href="Cursor.html#explain">explain</a></li><li data-type='method'><a href="Cursor.html#filter">filter</a></li><li data-type='method'><a href="Cursor.html#forEach">forEach</a></li><li data-type='method'><a href="Cursor.html#hasNext">hasNext</a></li><li data-type='method'><a href="Cursor.html#hint">hint</a></li><li data-type='method'><a href="Cursor.html#isClosed">isClosed</a></li><li data-type='method'><a href="Cursor.html#limit">limit</a></li><li data-type='method'><a href="Cursor.html#map">map</a></li><li data-type='method'><a href="Cursor.html#max">max</a></li><li data-type='method'><a href="Cursor.html#maxAwaitTimeMS">maxAwaitTimeMS</a></li><li data-type='method'><a href="Cursor.html#maxScan">maxScan</a></li><li data-type='method'><a href="Cursor.html#maxTimeMS">maxTimeMS</a></li><li data-type='method'><a href="Cursor.html#min">min</a></li><li data-type='method'><a href="Cursor.html#next">next</a></li><li data-type='method'><a href="Cursor.html#pause">pause</a></li><li data-type='method'><a href="Cursor.html#pipe">pipe</a></li><li data-type='method'><a href="Cursor.html#project">project</a></li><li data-type='method'><a href="Cursor.html#read">read</a></li><li data-type='method'><a href="Cursor.html#resume">resume</a></li><li data-type='method'><a href="Cursor.html#returnKey">returnKey</a></li><li data-type='method'><a href="Cursor.html#rewind">rewind</a></li><li data-type='method'><a href="Cursor.html#setCursorOption">setCursorOption</a></li><li data-type='method'><a href="Cursor.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="Cursor.html#setReadPreference">setReadPreference</a></li><li data-type='method'><a href="Cursor.html#showRecordId">showRecordId</a></li><li data-type='method'><a href="Cursor.html#skip">skip</a></li><li data-type='method'><a href="Cursor.html#snapshot">snapshot</a></li><li data-type='method'><a href="Cursor.html#sort">sort</a></li><li data-type='method'><a href="Cursor.html#stream">stream</a></li><li data-type='method'><a href="Cursor.html#toArray">toArray</a></li><li data-type='method'><a href="Cursor.html#transformStream">transformStream</a></li><li data-type='method'><a href="Cursor.html#unpipe">unpipe</a></li><li data-type='method'><a href="Cursor.html#unshift">unshift</a></li><li data-type='method'><a href="Cursor.html#wrap">wrap</a></li></ul></li><li><a href="Db.html">Db</a><ul class='methods'><li data-type='method'><a href="Db.html#addUser">addUser</a></li><li data-type='method'><a href="Db.html#admin">admin</a></li><li data-type='method'><a href="Db.html#aggregate">aggregate</a></li><li data-type='method'><a href="Db.html#collection">collection</a></li><li data-type='method'><a href="Db.html#collections">collections</a></li><li data-type='method'><a href="Db.html#command">command</a></li><li data-type='method'><a href="Db.html#createCollection">createCollection</a></li><li data-type='method'><a href="Db.html#createIndex">createIndex</a></li><li data-type='method'><a href="Db.html#dropCollection">dropCollection</a></li><li data-type='method'><a href="Db.html#dropDatabase">dropDatabase</a></li><li data-type='method'><a href="Db.html#ensureIndex">ensureIndex</a></li><li data-type='method'><a href="Db.html#eval">eval</a></li><li data-type='method'><a href="Db.html#executeDbAdminCommand">executeDbAdminCommand</a></li><li data-type='method'><a href="Db.html#indexInformation">indexInformation</a></li><li data-type='method'><a href="Db.html#listCollections">listCollections</a></li><li data-type='method'><a href="Db.html#profilingLevel">profilingLevel</a></li><li data-type='method'><a href="Db.html#removeUser">removeUser</a></li><li data-type='method'><a href="Db.html#renameCollection">renameCollection</a></li><li data-type='method'><a href="Db.html#setProfilingLevel">setProfilingLevel</a></li><li data-type='method'><a href="Db.html#stats">stats</a></li><li data-type='method'><a href="Db.html#unref">unref</a></li><li data-type='method'><a href="Db.html#watch">watch</a></li></ul></li><li><a href="DBRef.html">DBRef</a></li><li><a href="Decimal128.html">Decimal128</a><ul class='methods'><li data-type='method'><a href="Decimal128.html#toString">toString</a></li><li data-type='method'><a href="Decimal128.html#.fromString">fromString</a></li></ul></li><li><a href="DistinctOperation.html">DistinctOperation</a><ul class='methods'><li data-type='method'><a href="DistinctOperation.html#execute">execute</a></li></ul></li><li><a href="Double.html">Double</a><ul class='methods'><li data-type='method'><a href="Double.html#valueOf">valueOf</a></li></ul></li><li><a href="FindOperators.html">FindOperators</a><ul class='methods'><li data-type='method'><a href="FindOperators.html#delete">delete</a></li><li data-type='method'><a href="FindOperators.html#deleteOne">deleteOne</a></li><li data-type='method'><a href="FindOperators.html#remove">remove</a></li><li data-type='method'><a href="FindOperators.html#removeOne">removeOne</a></li><li data-type='method'><a href="FindOperators.html#replaceOne">replaceOne</a></li><li data-type='method'><a href="FindOperators.html#update">update</a></li><li data-type='method'><a href="FindOperators.html#updateOne">updateOne</a></li><li data-type='method'><a href="FindOperators.html#upsert">upsert</a></li></ul></li><li><a href="FPersistStoragePlugin.html">FPersistStoragePlugin</a><ul class='methods'><li data-type='method'><a href="FPersistStoragePlugin.html#clear">clear</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#close">close</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#deleteKey">deleteKey</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#editValue">editValue</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#getValue">getValue</a></li></ul></li><li><a href="GeoHaystackSearchOperation.html">GeoHaystackSearchOperation</a><ul class='methods'><li data-type='method'><a href="GeoHaystackSearchOperation.html#execute">execute</a></li></ul></li><li><a href="GridFSBucket.html">GridFSBucket</a><ul class='methods'><li data-type='method'><a href="GridFSBucket.html#delete">delete</a></li><li data-type='method'><a href="GridFSBucket.html#drop">drop</a></li><li data-type='method'><a href="GridFSBucket.html#find">find</a></li><li data-type='method'><a href="GridFSBucket.html#openDownloadStream">openDownloadStream</a></li><li data-type='method'><a href="GridFSBucket.html#openDownloadStreamByName">openDownloadStreamByName</a></li><li data-type='method'><a href="GridFSBucket.html#openUploadStream">openUploadStream</a></li><li data-type='method'><a href="GridFSBucket.html#openUploadStreamWithId">openUploadStreamWithId</a></li><li data-type='method'><a href="GridFSBucket.html#rename">rename</a></li></ul></li><li><a href="GridFSBucketReadStream.html">GridFSBucketReadStream</a><ul class='methods'><li data-type='method'><a href="GridFSBucketReadStream.html#_read">_read</a></li><li data-type='method'><a href="GridFSBucketReadStream.html#abort">abort</a></li><li data-type='method'><a href="GridFSBucketReadStream.html#end">end</a></li><li data-type='method'><a href="GridFSBucketReadStream.html#start">start</a></li></ul></li><li><a href="GridFSBucketWriteStream.html">GridFSBucketWriteStream</a><ul class='methods'><li data-type='method'><a href="GridFSBucketWriteStream.html#abort">abort</a></li><li data-type='method'><a href="GridFSBucketWriteStream.html#end">end</a></li><li data-type='method'><a href="GridFSBucketWriteStream.html#write">write</a></li></ul></li><li><a href="GridStore.html">GridStore</a><ul class='methods'><li data-type='method'><a href="GridStore.html#.exist">exist</a></li><li data-type='method'><a href="GridStore.html#.list">list</a></li><li data-type='method'><a href="GridStore.html#.read">read</a></li><li data-type='method'><a href="GridStore.html#.readlines">readlines</a></li><li data-type='method'><a href="GridStore.html#.unlink">unlink</a></li><li data-type='method'><a href="GridStore.html#chunkCollection">chunkCollection</a></li><li data-type='method'><a href="GridStore.html#close">close</a></li><li data-type='method'><a href="GridStore.html#collection">collection</a></li><li data-type='method'><a href="GridStore.html#destroy">destroy</a></li><li data-type='method'><a href="GridStore.html#eof">eof</a></li><li data-type='method'><a href="GridStore.html#getc">getc</a></li><li data-type='method'><a href="GridStore.html#open">open</a></li><li data-type='method'><a href="GridStore.html#puts">puts</a></li><li data-type='method'><a href="GridStore.html#read">read</a></li><li data-type='method'><a href="GridStore.html#readlines">readlines</a></li><li data-type='method'><a href="GridStore.html#rewind">rewind</a></li><li data-type='method'><a href="GridStore.html#seek">seek</a></li><li data-type='method'><a href="GridStore.html#stream">stream</a></li><li data-type='method'><a href="GridStore.html#tell">tell</a></li><li data-type='method'><a href="GridStore.html#unlink">unlink</a></li><li data-type='method'><a href="GridStore.html#write">write</a></li><li data-type='method'><a href="GridStore.html#writeFile">writeFile</a></li></ul></li><li><a href="GridStoreStream.html">GridStoreStream</a><ul class='methods'><li data-type='method'><a href="GridStoreStream.html#end">end</a></li><li data-type='method'><a href="GridStoreStream.html#pause">pause</a></li><li data-type='method'><a href="GridStoreStream.html#pipe">pipe</a></li><li data-type='method'><a href="GridStoreStream.html#read">read</a></li><li data-type='method'><a href="GridStoreStream.html#resume">resume</a></li><li data-type='method'><a href="GridStoreStream.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="GridStoreStream.html#unpipe">unpipe</a></li><li data-type='method'><a href="GridStoreStream.html#unshift">unshift</a></li><li data-type='method'><a href="GridStoreStream.html#wrap">wrap</a></li><li data-type='method'><a href="GridStoreStream.html#write">write</a></li></ul></li><li><a href="GSSAPI.html">GSSAPI</a><ul class='methods'><li data-type='method'><a href="GSSAPI.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="GSSAPI.html#auth">auth</a></li><li data-type='method'><a href="GSSAPI.html#logout">logout</a></li><li data-type='method'><a href="GSSAPI.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="HelpCommandHelper.html">HelpCommandHelper</a><ul class='methods'><li data-type='method'><a href="HelpCommandHelper.html#findCommand">findCommand</a></li><li data-type='method'><a href="HelpCommandHelper.html#getEnabledNonHiddenCommands">getEnabledNonHiddenCommands</a></li><li data-type='method'><a href="HelpCommandHelper.html#getNonHiddenCommands">getNonHiddenCommands</a></li></ul></li><li><a href="Int32.html">Int32</a><ul class='methods'><li data-type='method'><a href="Int32.html#valueOf">valueOf</a></li></ul></li><li><a href="Logger.html">Logger</a><ul class='methods'><li data-type='method'><a href="Logger.html#.currentLogger">currentLogger</a></li><li data-type='method'><a href="Logger.html#.filter">filter</a></li><li data-type='method'><a href="Logger.html#.reset">reset</a></li><li data-type='method'><a href="Logger.html#.setCurrentLogger">setCurrentLogger</a></li><li data-type='method'><a href="Logger.html#.setLevel">setLevel</a></li><li data-type='method'><a href="Logger.html#debug">debug</a></li><li data-type='method'><a href="Logger.html#error">error</a></li><li data-type='method'><a href="Logger.html#info">info</a></li><li data-type='method'><a href="Logger.html#isDebug">isDebug</a></li><li data-type='method'><a href="Logger.html#isError">isError</a></li><li data-type='method'><a href="Logger.html#isInfo">isInfo</a></li><li data-type='method'><a href="Logger.html#isWarn">isWarn</a></li></ul></li><li><a href="Long.html">Long</a><ul class='methods'><li data-type='method'><a href="Long.html#.fromBits">fromBits</a></li><li data-type='method'><a href="Long.html#.fromInt">fromInt</a></li><li data-type='method'><a href="Long.html#.fromNumber">fromNumber</a></li><li data-type='method'><a href="Long.html#.fromString">fromString</a></li><li data-type='method'><a href="Long.html#add">add</a></li><li data-type='method'><a href="Long.html#and">and</a></li><li data-type='method'><a href="Long.html#compare">compare</a></li><li data-type='method'><a href="Long.html#div">div</a></li><li data-type='method'><a href="Long.html#equals">equals</a></li><li data-type='method'><a href="Long.html#getHighBits">getHighBits</a></li><li data-type='method'><a href="Long.html#getLowBits">getLowBits</a></li><li data-type='method'><a href="Long.html#getLowBitsUnsigned">getLowBitsUnsigned</a></li><li data-type='method'><a href="Long.html#getNumBitsAbs">getNumBitsAbs</a></li><li data-type='method'><a href="Long.html#greaterThan">greaterThan</a></li><li data-type='method'><a href="Long.html#greaterThanOrEqual">greaterThanOrEqual</a></li><li data-type='method'><a href="Long.html#isNegative">isNegative</a></li><li data-type='method'><a href="Long.html#isOdd">isOdd</a></li><li data-type='method'><a href="Long.html#isZero">isZero</a></li><li data-type='method'><a href="Long.html#lessThan">lessThan</a></li><li data-type='method'><a href="Long.html#lessThanOrEqual">lessThanOrEqual</a></li><li data-type='method'><a href="Long.html#modulo">modulo</a></li><li data-type='method'><a href="Long.html#multiply">multiply</a></li><li data-type='method'><a href="Long.html#negate">negate</a></li><li data-type='method'><a href="Long.html#not">not</a></li><li data-type='method'><a href="Long.html#notEquals">notEquals</a></li><li data-type='method'><a href="Long.html#or">or</a></li><li data-type='method'><a href="Long.html#shiftLeft">shiftLeft</a></li><li data-type='method'><a href="Long.html#shiftRight">shiftRight</a></li><li data-type='method'><a href="Long.html#shiftRightUnsigned">shiftRightUnsigned</a></li><li data-type='method'><a href="Long.html#subtract">subtract</a></li><li data-type='method'><a href="Long.html#toInt">toInt</a></li><li data-type='method'><a href="Long.html#toJSON">toJSON</a></li><li data-type='method'><a href="Long.html#toNumber">toNumber</a></li><li data-type='method'><a href="Long.html#toString">toString</a></li><li data-type='method'><a href="Long.html#xor">xor</a></li></ul></li><li><a href="MapReduceOperation.html">MapReduceOperation</a><ul class='methods'><li data-type='method'><a href="MapReduceOperation.html#execute">execute</a></li></ul></li><li><a href="MaxKey.html">MaxKey</a></li><li><a href="MessageProcessor.html">MessageProcessor</a></li><li><a href="MinKey.html">MinKey</a></li><li><a href="MongoClient.html">MongoClient</a><ul class='methods'><li data-type='method'><a href="MongoClient.html#.connect">connect</a></li><li data-type='method'><a href="MongoClient.html#close">close</a></li><li data-type='method'><a href="MongoClient.html#connect">connect</a></li><li data-type='method'><a href="MongoClient.html#db">db</a></li><li data-type='method'><a href="MongoClient.html#isConnected">isConnected</a></li><li data-type='method'><a href="MongoClient.html#startSession">startSession</a></li><li data-type='method'><a href="MongoClient.html#watch">watch</a></li><li data-type='method'><a href="MongoClient.html#withSession">withSession</a></li></ul></li><li><a href="MongoCR.html">MongoCR</a><ul class='methods'><li data-type='method'><a href="MongoCR.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="MongoCR.html#auth">auth</a></li><li data-type='method'><a href="MongoCR.html#logout">logout</a></li><li data-type='method'><a href="MongoCR.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="MongoCredentials.html">MongoCredentials</a><ul class='methods'><li data-type='method'><a href="MongoCredentials.html#equals">equals</a></li><li data-type='method'><a href="MongoCredentials.html#resolveAuthMechanism">resolveAuthMechanism</a></li></ul></li><li><a href="MongoDBStoragePlugin.html">MongoDBStoragePlugin</a><ul class='methods'><li data-type='method'><a href="MongoDBStoragePlugin.html#clear">clear</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#close">close</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#deleteKey">deleteKey</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#editValue">editValue</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#getValue">getValue</a></li></ul></li><li><a href="MongoError.html">MongoError</a><ul class='methods'><li data-type='method'><a href="MongoError.html#.create">create</a></li></ul></li><li><a href="MongoNetworkError.html">MongoNetworkError</a></li><li><a href="MongoParseError.html">MongoParseError</a></li><li><a href="Mongos.html">Mongos</a><ul class='methods'><li data-type='method'><a href="Mongos.html#auth">auth</a></li><li data-type='method'><a href="Mongos.html#command">command</a></li><li data-type='method'><a href="Mongos.html#connect">connect</a></li><li data-type='method'><a href="Mongos.html#connections">connections</a></li><li data-type='method'><a href="Mongos.html#cursor">cursor</a></li><li data-type='method'><a href="Mongos.html#destroy">destroy</a></li><li data-type='method'><a href="Mongos.html#insert">insert</a></li><li data-type='method'><a href="Mongos.html#isConnected">isConnected</a></li><li data-type='method'><a href="Mongos.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="Mongos.html#lastIsMaster">lastIsMaster</a></li><li data-type='method'><a href="Mongos.html#remove">remove</a></li><li data-type='method'><a href="Mongos.html#selectServer">selectServer</a></li><li data-type='method'><a href="Mongos.html#unref">unref</a></li><li data-type='method'><a href="Mongos.html#update">update</a></li></ul></li><li><a href="MongoTimeoutError.html">MongoTimeoutError</a></li><li><a href="MongoWriteConcernError.html">MongoWriteConcernError</a></li><li><a href="Monochrome.html">Monochrome</a><ul class='methods'><li data-type='method'><a href="Monochrome.html#connect">connect</a></li><li data-type='method'><a href="Monochrome.html#getBlacklist">getBlacklist</a></li><li data-type='method'><a href="Monochrome.html#getCommandManager">getCommandManager</a></li><li data-type='method'><a href="Monochrome.html#getErisBot">getErisBot</a></li><li data-type='method'><a href="Monochrome.html#getLogger">getLogger</a></li><li data-type='method'><a href="Monochrome.html#getNavigationManager">getNavigationManager</a></li><li data-type='method'><a href="Monochrome.html#getPersistence">getPersistence</a></li><li data-type='method'><a href="Monochrome.html#getSettings">getSettings</a></li><li data-type='method'><a href="Monochrome.html#reload">reload</a></li><li data-type='method'><a href="Monochrome.html#stop">stop</a></li><li data-type='method'><a href="Monochrome.html#userIsServerAdmin">userIsServerAdmin</a></li><li data-type='method'><a href="Monochrome.html#waitForMessage">waitForMessage</a></li></ul></li><li><a href="Navigation.html">Navigation</a><ul class='methods'><li data-type='method'><a href="Navigation.html#.fromOneDimensionalContents">fromOneDimensionalContents</a></li><li data-type='method'><a href="Navigation.html#.fromOneNavigationChapter">fromOneNavigationChapter</a></li></ul></li><li><a href="NavigationChapter.html">NavigationChapter</a><ul class='methods'><li data-type='method'><a href="NavigationChapter.html#.fromContent">fromContent</a></li></ul></li><li><a href="NavigationManager.html">NavigationManager</a><ul class='methods'><li data-type='method'><a href="NavigationManager.html#show">show</a></li></ul></li><li><a href="ObjectID.html">ObjectID</a><ul class='methods'><li data-type='method'><a href="ObjectID.html#.createFromHexString">createFromHexString</a></li><li data-type='method'><a href="ObjectID.html#.createFromTime">createFromTime</a></li><li data-type='method'><a href="ObjectID.html#.isValid">isValid</a></li><li data-type='method'><a href="ObjectID.html#equals">equals</a></li><li data-type='method'><a href="ObjectID.html#generate">generate</a></li><li data-type='method'><a href="ObjectID.html#getTimestamp">getTimestamp</a></li><li data-type='method'><a href="ObjectID.html#toHexString">toHexString</a></li></ul></li><li><a href="OperationBase.html">OperationBase</a></li><li><a href="OrderedBulkOperation.html">OrderedBulkOperation</a><ul class='methods'><li data-type='method'><a href="OrderedBulkOperation.html#bulkExecute">bulkExecute</a></li><li data-type='method'><a href="OrderedBulkOperation.html#execute">execute</a></li><li data-type='method'><a href="OrderedBulkOperation.html#finalOptionsHandler">finalOptionsHandler</a></li><li data-type='method'><a href="OrderedBulkOperation.html#find">find</a></li><li data-type='method'><a href="OrderedBulkOperation.html#handleWriteError">handleWriteError</a></li><li data-type='method'><a href="OrderedBulkOperation.html#insert">insert</a></li><li data-type='method'><a href="OrderedBulkOperation.html#raw">raw</a></li></ul></li><li><a href="Persistence.html">Persistence</a><ul class='methods'><li data-type='method'><a href="Persistence.html#deleteData">deleteData</a></li><li data-type='method'><a href="Persistence.html#editData">editData</a></li><li data-type='method'><a href="Persistence.html#editDataForServer">editDataForServer</a></li><li data-type='method'><a href="Persistence.html#editDataForUser">editDataForUser</a></li><li data-type='method'><a href="Persistence.html#editGlobalData">editGlobalData</a></li><li data-type='method'><a href="Persistence.html#editPrefixesForServerId">editPrefixesForServerId</a></li><li data-type='method'><a href="Persistence.html#getData">getData</a></li><li data-type='method'><a href="Persistence.html#getDataForServer">getDataForServer</a></li><li data-type='method'><a href="Persistence.html#getDataForUser">getDataForUser</a></li><li data-type='method'><a href="Persistence.html#getGlobalData">getGlobalData</a></li><li data-type='method'><a href="Persistence.html#getPrefixesForMessage">getPrefixesForMessage</a></li><li data-type='method'><a href="Persistence.html#getPrefixesForServer">getPrefixesForServer</a></li><li data-type='method'><a href="Persistence.html#getPrimaryPrefixForMessage">getPrimaryPrefixForMessage</a></li><li data-type='method'><a href="Persistence.html#resetPrefixesForServerId">resetPrefixesForServerId</a></li><li data-type='method'><a href="Persistence.html#stop">stop</a></li></ul></li><li><a href="Plain.html">Plain</a><ul class='methods'><li data-type='method'><a href="Plain.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="Plain.html#auth">auth</a></li><li data-type='method'><a href="Plain.html#logout">logout</a></li><li data-type='method'><a href="Plain.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="Pool.html">Pool</a><ul class='methods'><li data-type='method'><a href="Pool.html#allConnections">allConnections</a></li><li data-type='method'><a href="Pool.html#auth">auth</a></li><li data-type='method'><a href="Pool.html#connect">connect</a></li><li data-type='method'><a href="Pool.html#destroy">destroy</a></li><li data-type='method'><a href="Pool.html#get">get</a></li><li data-type='method'><a href="Pool.html#isConnected">isConnected</a></li><li data-type='method'><a href="Pool.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="Pool.html#isDisconnected">isDisconnected</a></li><li data-type='method'><a href="Pool.html#logout">logout</a></li><li data-type='method'><a href="Pool.html#reset">reset</a></li><li data-type='method'><a href="Pool.html#socketCount">socketCount</a></li><li data-type='method'><a href="Pool.html#unref">unref</a></li><li data-type='method'><a href="Pool.html#write">write</a></li></ul></li><li><a href="global.html#ReadConcern">ReadConcern</a><ul class='methods'><li data-type='method'><a href="global.html#ReadConcern#.fromOptions">fromOptions</a></li></ul></li><li><a href="ReadPreference.html">ReadPreference</a><ul class='methods'><li data-type='method'><a href="ReadPreference.html#.fromOptions">fromOptions</a></li><li data-type='method'><a href="ReadPreference.html#.isValid">isValid</a></li><li data-type='method'><a href="ReadPreference.html#equals">equals</a></li><li data-type='method'><a href="ReadPreference.html#isValid">isValid</a></li><li data-type='method'><a href="ReadPreference.html#slaveOk">slaveOk</a></li><li data-type='method'><a href="ReadPreference.html#toJSON">toJSON</a></li></ul></li><li><a href="ReplSet.html">ReplSet</a><ul class='methods'><li data-type='method'><a href="ReplSet.html#auth">auth</a></li><li data-type='method'><a href="ReplSet.html#command">command</a></li><li data-type='method'><a href="ReplSet.html#connect">connect</a></li><li data-type='method'><a href="ReplSet.html#connections">connections</a></li><li data-type='method'><a href="ReplSet.html#cursor">cursor</a></li><li data-type='method'><a href="ReplSet.html#destroy">destroy</a></li><li data-type='method'><a href="ReplSet.html#getServers">getServers</a></li><li data-type='method'><a href="ReplSet.html#insert">insert</a></li><li data-type='method'><a href="ReplSet.html#isConnected">isConnected</a></li><li data-type='method'><a href="ReplSet.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="ReplSet.html#lastIsMaster">lastIsMaster</a></li><li data-type='method'><a href="ReplSet.html#remove">remove</a></li><li data-type='method'><a href="ReplSet.html#selectServer">selectServer</a></li><li data-type='method'><a href="ReplSet.html#unref">unref</a></li><li data-type='method'><a href="ReplSet.html#update">update</a></li></ul></li><li><a href="ScramSHA.html">ScramSHA</a><ul class='methods'><li data-type='method'><a href="ScramSHA.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="ScramSHA.html#auth">auth</a></li><li data-type='method'><a href="ScramSHA.html#logout">logout</a></li><li data-type='method'><a href="ScramSHA.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="ScramSHA1.html">ScramSHA1</a><ul class='methods'><li data-type='method'><a href="ScramSHA1.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="ScramSHA1.html#logout">logout</a></li><li data-type='method'><a href="ScramSHA1.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="ScramSHA256.html">ScramSHA256</a><ul class='methods'><li data-type='method'><a href="ScramSHA256.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="ScramSHA256.html#logout">logout</a></li><li data-type='method'><a href="ScramSHA256.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="Server.html">Server</a><ul class='methods'><li data-type='method'><a href="Server.html#auth">auth</a></li><li data-type='method'><a href="Server.html#command">command</a></li><li data-type='method'><a href="Server.html#command">command</a></li><li data-type='method'><a href="Server.html#connect">connect</a></li><li data-type='method'><a href="Server.html#connect">connect</a></li><li data-type='method'><a href="Server.html#connections">connections</a></li><li data-type='method'><a href="Server.html#cursor">cursor</a></li><li data-type='method'><a href="Server.html#destroy">destroy</a></li><li data-type='method'><a href="Server.html#destroy">destroy</a></li><li data-type='method'><a href="Server.html#equals">equals</a></li><li data-type='method'><a href="Server.html#getDescription">getDescription</a></li><li data-type='method'><a href="Server.html#getMore">getMore</a></li><li data-type='method'><a href="Server.html#getMore">getMore</a></li><li data-type='method'><a href="Server.html#insert">insert</a></li><li data-type='method'><a href="Server.html#insert">insert</a></li><li data-type='method'><a href="Server.html#isConnected">isConnected</a></li><li data-type='method'><a href="Server.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="Server.html#killCursors">killCursors</a></li><li data-type='method'><a href="Server.html#killCursors">killCursors</a></li><li data-type='method'><a href="Server.html#lastIsMaster">lastIsMaster</a></li><li data-type='method'><a href="Server.html#monitor">monitor</a></li><li data-type='method'><a href="Server.html#query">query</a></li><li data-type='method'><a href="Server.html#query">query</a></li><li data-type='method'><a href="Server.html#remove">remove</a></li><li data-type='method'><a href="Server.html#remove">remove</a></li><li data-type='method'><a href="Server.html#selectServer">selectServer</a></li><li data-type='method'><a href="Server.html#unref">unref</a></li><li data-type='method'><a href="Server.html#update">update</a></li><li data-type='method'><a href="Server.html#update">update</a></li></ul></li><li><a href="ServerClosedEvent.html">ServerClosedEvent</a></li><li><a href="ServerDescription.html">ServerDescription</a></li><li><a href="ServerDescriptionChangedEvent.html">ServerDescriptionChangedEvent</a></li><li><a href="ServerHeartbeatFailedEvent.html">ServerHeartbeatFailedEvent</a></li><li><a href="ServerHeartbeatStartedEvent.html">ServerHeartbeatStartedEvent</a></li><li><a href="ServerHeartbeatSucceededEvent.html">ServerHeartbeatSucceededEvent</a></li><li><a href="ServerOpeningEvent.html">ServerOpeningEvent</a></li><li><a href="Settings.html">Settings</a><ul class='methods'><li data-type='method'><a href="Settings.html#getInternalSettingValue">getInternalSettingValue</a></li><li data-type='method'><a href="Settings.html#getRawSettingsTree">getRawSettingsTree</a></li><li data-type='method'><a href="Settings.html#getTreeNodeForUniqueId">getTreeNodeForUniqueId</a></li><li data-type='method'><a href="Settings.html#getUserFacingSettingValue">getUserFacingSettingValue</a></li><li data-type='method'><a href="Settings.html#resetServerAndChannelSettings">resetServerAndChannelSettings</a></li><li data-type='method'><a href="Settings.html#resetUserSettings">resetUserSettings</a></li><li data-type='method'><a href="Settings.html#setChannelSettingValue">setChannelSettingValue</a></li><li data-type='method'><a href="Settings.html#setServerWideSettingValue">setServerWideSettingValue</a></li><li data-type='method'><a href="Settings.html#setUserSettingValue">setUserSettingValue</a></li><li data-type='method'><a href="Settings.html#userFacingValueIsValidForSetting">userFacingValueIsValidForSetting</a></li></ul></li><li><a href="SrvPoller.html">SrvPoller</a></li><li><a href="SSPI.html">SSPI</a><ul class='methods'><li data-type='method'><a href="SSPI.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="SSPI.html#auth">auth</a></li><li data-type='method'><a href="SSPI.html#logout">logout</a></li><li data-type='method'><a href="SSPI.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="StatsOperation.html">StatsOperation</a></li><li><a href="Symbol.html">Symbol</a><ul class='methods'><li data-type='method'><a href="Symbol.html#valueOf">valueOf</a></li></ul></li><li><a href="Timestamp.html">Timestamp</a><ul class='methods'><li data-type='method'><a href="Timestamp.html#.fromBits">fromBits</a></li><li data-type='method'><a href="Timestamp.html#.fromInt">fromInt</a></li><li data-type='method'><a href="Timestamp.html#.fromNumber">fromNumber</a></li><li data-type='method'><a href="Timestamp.html#.fromString">fromString</a></li><li data-type='method'><a href="Timestamp.html#add">add</a></li><li data-type='method'><a href="Timestamp.html#and">and</a></li><li data-type='method'><a href="Timestamp.html#compare">compare</a></li><li data-type='method'><a href="Timestamp.html#div">div</a></li><li data-type='method'><a href="Timestamp.html#equals">equals</a></li><li data-type='method'><a href="Timestamp.html#getHighBits">getHighBits</a></li><li data-type='method'><a href="Timestamp.html#getLowBits">getLowBits</a></li><li data-type='method'><a href="Timestamp.html#getLowBitsUnsigned">getLowBitsUnsigned</a></li><li data-type='method'><a href="Timestamp.html#getNumBitsAbs">getNumBitsAbs</a></li><li data-type='method'><a href="Timestamp.html#greaterThan">greaterThan</a></li><li data-type='method'><a href="Timestamp.html#greaterThanOrEqual">greaterThanOrEqual</a></li><li data-type='method'><a href="Timestamp.html#isNegative">isNegative</a></li><li data-type='method'><a href="Timestamp.html#isOdd">isOdd</a></li><li data-type='method'><a href="Timestamp.html#isZero">isZero</a></li><li data-type='method'><a href="Timestamp.html#lessThan">lessThan</a></li><li data-type='method'><a href="Timestamp.html#lessThanOrEqual">lessThanOrEqual</a></li><li data-type='method'><a href="Timestamp.html#modulo">modulo</a></li><li data-type='method'><a href="Timestamp.html#multiply">multiply</a></li><li data-type='method'><a href="Timestamp.html#negate">negate</a></li><li data-type='method'><a href="Timestamp.html#not">not</a></li><li data-type='method'><a href="Timestamp.html#notEquals">notEquals</a></li><li data-type='method'><a href="Timestamp.html#or">or</a></li><li data-type='method'><a href="Timestamp.html#shiftLeft">shiftLeft</a></li><li data-type='method'><a href="Timestamp.html#shiftRight">shiftRight</a></li><li data-type='method'><a href="Timestamp.html#shiftRightUnsigned">shiftRightUnsigned</a></li><li data-type='method'><a href="Timestamp.html#subtract">subtract</a></li><li data-type='method'><a href="Timestamp.html#toInt">toInt</a></li><li data-type='method'><a href="Timestamp.html#toJSON">toJSON</a></li><li data-type='method'><a href="Timestamp.html#toNumber">toNumber</a></li><li data-type='method'><a href="Timestamp.html#toString">toString</a></li><li data-type='method'><a href="Timestamp.html#xor">xor</a></li></ul></li><li><a href="Topology.html">Topology</a><ul class='methods'><li data-type='method'><a href="Topology.html#close">close</a></li><li data-type='method'><a href="Topology.html#command">command</a></li><li data-type='method'><a href="Topology.html#connect">connect</a></li><li data-type='method'><a href="Topology.html#connections">connections</a></li><li data-type='method'><a href="Topology.html#cursor">cursor</a></li><li data-type='method'><a href="Topology.html#endSessions">endSessions</a></li><li data-type='method'><a href="Topology.html#hasSessionSupport">hasSessionSupport</a></li><li data-type='method'><a href="Topology.html#insert">insert</a></li><li data-type='method'><a href="Topology.html#remove">remove</a></li><li data-type='method'><a href="Topology.html#selectServer">selectServer</a></li><li data-type='method'><a href="Topology.html#serverUpdateHandler">serverUpdateHandler</a></li><li data-type='method'><a href="Topology.html#shouldCheckForSessionSupport">shouldCheckForSessionSupport</a></li><li data-type='method'><a href="Topology.html#startSession">startSession</a></li><li data-type='method'><a href="Topology.html#update">update</a></li></ul></li><li><a href="TopologyClosedEvent.html">TopologyClosedEvent</a></li><li><a href="TopologyDescription.html">TopologyDescription</a><ul class='methods'><li data-type='method'><a href="TopologyDescription.html#hasServer">hasServer</a></li><li data-type='method'><a href="TopologyDescription.html#update">update</a></li><li data-type='method'><a href="TopologyDescription.html#updateFromSrvPollingEvent">updateFromSrvPollingEvent</a></li></ul></li><li><a href="TopologyDescriptionChangedEvent.html">TopologyDescriptionChangedEvent</a></li><li><a href="TopologyOpeningEvent.html">TopologyOpeningEvent</a></li><li><a href="UnorderedBulkOperation.html">UnorderedBulkOperation</a><ul class='methods'><li data-type='method'><a href="UnorderedBulkOperation.html#bulkExecute">bulkExecute</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#execute">execute</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#finalOptionsHandler">finalOptionsHandler</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#find">find</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#handleWriteError">handleWriteError</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#insert">insert</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#raw">raw</a></li></ul></li><li><a href="global.html#WriteConcern">WriteConcern</a><ul class='methods'><li data-type='method'><a href="global.html#WriteConcern#.fromOptions">fromOptions</a></li></ul></li><li><a href="WriteConcernError.html">WriteConcernError</a><ul class='methods'><li data-type='method'><a href="WriteConcernError.html#toJSON">toJSON</a></li><li data-type='method'><a href="WriteConcernError.html#toString">toString</a></li></ul></li><li><a href="WriteError.html">WriteError</a><ul class='methods'><li data-type='method'><a href="WriteError.html#getOperation">getOperation</a></li><li data-type='method'><a href="WriteError.html#toJSON">toJSON</a></li><li data-type='method'><a href="WriteError.html#toString">toString</a></li></ul></li><li><a href="X509.html">X509</a><ul class='methods'><li data-type='method'><a href="X509.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="X509.html#auth">auth</a></li><li data-type='method'><a href="X509.html#logout">logout</a></li><li data-type='method'><a href="X509.html#reauthenticate">reauthenticate</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-_bunyan.Logger_.html">bunyan.Logger</a></li><li><a href="external-_Eris.Client_.html">Eris.Client</a></li><li><a href="external-_Eris.Message_.html">Eris.Message</a></li><li><a href="external-_Eris.TextChannel_.html">Eris.TextChannel</a></li><li><a href="external-Duplex.html">Duplex</a><ul class='methods'><li data-type='method'><a href="external-Duplex.html#end">end</a></li><li data-type='method'><a href="external-Duplex.html#pause">pause</a></li><li data-type='method'><a href="external-Duplex.html#pipe">pipe</a></li><li data-type='method'><a href="external-Duplex.html#read">read</a></li><li data-type='method'><a href="external-Duplex.html#resume">resume</a></li><li data-type='method'><a href="external-Duplex.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="external-Duplex.html#unpipe">unpipe</a></li><li data-type='method'><a href="external-Duplex.html#unshift">unshift</a></li><li data-type='method'><a href="external-Duplex.html#wrap">wrap</a></li><li data-type='method'><a href="external-Duplex.html#write">write</a></li></ul></li><li><a href="external-Readable.html">Readable</a><ul class='methods'><li data-type='method'><a href="external-Readable.html#pause">pause</a></li><li data-type='method'><a href="external-Readable.html#pipe">pipe</a></li><li data-type='method'><a href="external-Readable.html#read">read</a></li><li data-type='method'><a href="external-Readable.html#resume">resume</a></li><li data-type='method'><a href="external-Readable.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="external-Readable.html#unpipe">unpipe</a></li><li data-type='method'><a href="external-Readable.html#unshift">unshift</a></li><li data-type='method'><a href="external-Readable.html#wrap">wrap</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="AggregationCursor.html#event:close">close</a></li><li><a href="AggregationCursor.html#event:data">data</a></li><li><a href="AggregationCursor.html#event:end">end</a></li><li><a href="AggregationCursor.html#event:readable">readable</a></li><li><a href="ChangeStream.html#event:change">change</a></li><li><a href="ChangeStream.html#event:close">close</a></li><li><a href="ChangeStream.html#event:end">end</a></li><li><a href="ChangeStream.html#event:error">error</a></li><li><a href="ChangeStream.html#event:resumeTokenChanged">resumeTokenChanged</a></li><li><a href="CommandCursor.html#event:close">close</a></li><li><a href="CommandCursor.html#event:data">data</a></li><li><a href="CommandCursor.html#event:end">end</a></li><li><a href="CommandCursor.html#event:readable">readable</a></li><li><a href="Connection.html#event:close">close</a></li><li><a href="Connection.html#event:connect">connect</a></li><li><a href="Connection.html#event:error">error</a></li><li><a href="Connection.html#event:message">message</a></li><li><a href="Connection.html#event:parseError">parseError</a></li><li><a href="Connection.html#event:timeout">timeout</a></li><li><a href="Cursor.html#event:close">close</a></li><li><a href="Cursor.html#event:data">data</a></li><li><a href="Cursor.html#event:end">end</a></li><li><a href="Cursor.html#event:readable">readable</a></li><li><a href="Db.html#event:close">close</a></li><li><a href="Db.html#event:error">error</a></li><li><a href="Db.html#event:fullsetup">fullsetup</a></li><li><a href="Db.html#event:parseError">parseError</a></li><li><a href="Db.html#event:reconnect">reconnect</a></li><li><a href="Db.html#event:timeout">timeout</a></li><li><a href="GridFSBucket.html#event:index">index</a></li><li><a href="GridFSBucketReadStream.html#event:close">close</a></li><li><a href="GridFSBucketReadStream.html#event:data">data</a></li><li><a href="GridFSBucketReadStream.html#event:end">end</a></li><li><a href="GridFSBucketReadStream.html#event:error">error</a></li><li><a href="GridFSBucketReadStream.html#event:file">file</a></li><li><a href="GridFSBucketWriteStream.html#event:error">error</a></li><li><a href="GridFSBucketWriteStream.html#event:finish">finish</a></li><li><a href="GridStoreStream.html#event:close">close</a></li><li><a href="GridStoreStream.html#event:data">data</a></li><li><a href="GridStoreStream.html#event:drain">drain</a></li><li><a href="GridStoreStream.html#event:end">end</a></li><li><a href="GridStoreStream.html#event:error">error</a></li><li><a href="GridStoreStream.html#event:finish">finish</a></li><li><a href="GridStoreStream.html#event:pipe">pipe</a></li><li><a href="GridStoreStream.html#event:readable">readable</a></li><li><a href="GridStoreStream.html#event:unpipe">unpipe</a></li><li><a href="Mongos.html#event:all">all</a></li><li><a href="Mongos.html#event:close">close</a></li><li><a href="Mongos.html#event:commandFailed">commandFailed</a></li><li><a href="Mongos.html#event:commandStarted">commandStarted</a></li><li><a href="Mongos.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="Mongos.html#event:connect">connect</a></li><li><a href="Mongos.html#event:error">error</a></li><li><a href="Mongos.html#event:fullsetup">fullsetup</a></li><li><a href="Mongos.html#event:ha">ha</a></li><li><a href="Mongos.html#event:joined">joined</a></li><li><a href="Mongos.html#event:left">left</a></li><li><a href="Mongos.html#event:open">open</a></li><li><a href="Mongos.html#event:parseError">parseError</a></li><li><a href="Mongos.html#event:reconnect">reconnect</a></li><li><a href="Mongos.html#event:serverClosed">serverClosed</a></li><li><a href="Mongos.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="Mongos.html#event:serverHeartbeatFailed">serverHeartbeatFailed</a></li><li><a href="Mongos.html#event:serverHeartbeatStarted">serverHeartbeatStarted</a></li><li><a href="Mongos.html#event:serverHeartbeatSucceeded">serverHeartbeatSucceeded</a></li><li><a href="Mongos.html#event:serverOpening">serverOpening</a></li><li><a href="Mongos.html#event:timeout">timeout</a></li><li><a href="Mongos.html#event:topologyClosed">topologyClosed</a></li><li><a href="Mongos.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="Mongos.html#event:topologyOpening">topologyOpening</a></li><li><a href="Pool.html#event:attemptReconnect">attemptReconnect</a></li><li><a href="Pool.html#event:close">close</a></li><li><a href="Pool.html#event:connect">connect</a></li><li><a href="Pool.html#event:error">error</a></li><li><a href="Pool.html#event:parseError">parseError</a></li><li><a href="Pool.html#event:reconnect">reconnect</a></li><li><a href="Pool.html#event:reconnectFailed">reconnectFailed</a></li><li><a href="Pool.html#event:timeout">timeout</a></li><li><a href="ReplSet.html#event:all">all</a></li><li><a href="ReplSet.html#event:close">close</a></li><li><a href="ReplSet.html#event:commandFailed">commandFailed</a></li><li><a href="ReplSet.html#event:commandStarted">commandStarted</a></li><li><a href="ReplSet.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="ReplSet.html#event:connect">connect</a></li><li><a href="ReplSet.html#event:error">error</a></li><li><a href="ReplSet.html#event:failed">failed</a></li><li><a href="ReplSet.html#event:fullsetup">fullsetup</a></li><li><a href="ReplSet.html#event:ha">ha</a></li><li><a href="ReplSet.html#event:joined">joined</a></li><li><a href="ReplSet.html#event:left">left</a></li><li><a href="ReplSet.html#event:open">open</a></li><li><a href="ReplSet.html#event:parseError">parseError</a></li><li><a href="ReplSet.html#event:reconnect">reconnect</a></li><li><a href="ReplSet.html#event:serverClosed">serverClosed</a></li><li><a href="ReplSet.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="ReplSet.html#event:serverHeartbeatFailed">serverHeartbeatFailed</a></li><li><a href="ReplSet.html#event:serverHeartbeatStarted">serverHeartbeatStarted</a></li><li><a href="ReplSet.html#event:serverHeartbeatSucceeded">serverHeartbeatSucceeded</a></li><li><a href="ReplSet.html#event:serverOpening">serverOpening</a></li><li><a href="ReplSet.html#event:timeout">timeout</a></li><li><a href="ReplSet.html#event:topologyClosed">topologyClosed</a></li><li><a href="ReplSet.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="ReplSet.html#event:topologyOpening">topologyOpening</a></li><li><a href="Server.html#event:close">close</a></li><li><a href="Server.html#event:commandFailed">commandFailed</a></li><li><a href="Server.html#event:commandStarted">commandStarted</a></li><li><a href="Server.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="Server.html#event:connect">connect</a></li><li><a href="Server.html#event:destroy">destroy</a></li><li><a href="Server.html#event:error">error</a></li><li><a href="Server.html#event:parseError">parseError</a></li><li><a href="Server.html#event:reconnect">reconnect</a></li><li><a href="Server.html#event:reconnectFailed">reconnectFailed</a></li><li><a href="Server.html#event:serverClosed">serverClosed</a></li><li><a href="Server.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="Server.html#event:serverOpening">serverOpening</a></li><li><a href="Server.html#event:timeout">timeout</a></li><li><a href="Server.html#event:topologyClosed">topologyClosed</a></li><li><a href="Server.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="Server.html#event:topologyOpening">topologyOpening</a></li><li><a href="Topology.html#event:commandFailed">commandFailed</a></li><li><a href="Topology.html#event:commandStarted">commandStarted</a></li><li><a href="Topology.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="Topology.html#event:serverClosed">serverClosed</a></li><li><a href="Topology.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="Topology.html#event:serverHeartbeatFailed">serverHeartbeatFailed</a></li><li><a href="Topology.html#event:serverHeartbeatStarted">serverHeartbeatStarted</a></li><li><a href="Topology.html#event:serverHeartbeatSucceeded">serverHeartbeatSucceeded</a></li><li><a href="Topology.html#event:serverOpening">serverOpening</a></li><li><a href="Topology.html#event:topologyClosed">topologyClosed</a></li><li><a href="Topology.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="Topology.html#event:topologyOpening">topologyOpening</a></li></ul><h3>Interfaces</h3><ul><li><a href="StoragePlugin.html">StoragePlugin</a><ul class='methods'><li data-type='method'><a href="StoragePlugin.html#clear">clear</a></li><li data-type='method'><a href="StoragePlugin.html#close">close</a></li><li data-type='method'><a href="StoragePlugin.html#deleteKey">deleteKey</a></li><li data-type='method'><a href="StoragePlugin.html#editValue">editValue</a></li><li data-type='method'><a href="StoragePlugin.html#getValue">getValue</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#addToOperationsList">addToOperationsList</a></li><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#applyAuthExpectations">applyAuthExpectations</a></li><li><a href="global.html#applyConnectionStringOption">applyConnectionStringOption</a></li><li><a href="global.html#applyRetryableWrites">applyRetryableWrites</a></li><li><a href="global.html#applySession">applySession</a></li><li><a href="global.html#applyWriteConcern">applyWriteConcern</a></li><li><a href="global.html#assertTlsOptionsAreEqual">assertTlsOptionsAreEqual</a></li><li><a href="global.html#buildCountCommand">buildCountCommand</a></li><li><a href="global.html#calculateDurationInMs">calculateDurationInMs</a></li><li><a href="global.html#checkTLSOptions">checkTLSOptions</a></li><li><a href="global.html#collections">collections</a></li><li><a href="global.html#connectServers">connectServers</a></li><li><a href="global.html#count">count</a></li><li><a href="global.html#createCreateIndexCommand">createCreateIndexCommand</a></li><li><a href="global.html#createIndex">createIndex</a></li><li><a href="global.html#createIndexes">createIndexes</a></li><li><a href="global.html#createIndexUsingCreateIndexes">createIndexUsingCreateIndexes</a></li><li><a href="global.html#decorateWithCollation">decorateWithCollation</a></li><li><a href="global.html#decorateWithReadConcern">decorateWithReadConcern</a></li><li><a href="global.html#defaultAuthProviders">defaultAuthProviders</a></li><li><a href="global.html#destroyServer">destroyServer</a></li><li><a href="global.html#dropCollection">dropCollection</a></li><li><a href="global.html#dropDatabase">dropDatabase</a></li><li><a href="global.html#each">each</a></li><li><a href="global.html#eachAsync">eachAsync</a></li><li><a href="global.html#emitSDAMEvent">emitSDAMEvent</a></li><li><a href="global.html#ensureIndex">ensureIndex</a></li><li><a href="global.html#evaluate">evaluate</a></li><li><a href="global.html#executeAuthCreateUserCommand">executeAuthCreateUserCommand</a></li><li><a href="global.html#executeAuthRemoveUserCommand">executeAuthRemoveUserCommand</a></li><li><a href="global.html#executeCommand">executeCommand</a></li><li><a href="global.html#executeDbAdminCommand">executeDbAdminCommand</a></li><li><a href="global.html#executeLegacyOperation">executeLegacyOperation</a></li><li><a href="global.html#executeOperation">executeOperation</a></li><li><a href="global.html#extractCommand">extractCommand</a></li><li><a href="global.html#findAndModify">findAndModify</a></li><li><a href="global.html#group">group</a></li><li><a href="global.html#handleMongoWriteConcernError">handleMongoWriteConcernError</a></li><li><a href="global.html#hasNext">hasNext</a></li><li><a href="global.html#HOSTS_RX">HOSTS_RX</a></li><li><a href="global.html#indexes">indexes</a></li><li><a href="global.html#indexExists">indexExists</a></li><li><a href="global.html#indexInformation">indexInformation</a></li><li><a href="global.html#inherits">inherits</a></li><li><a href="global.html#isConnectionDead">isConnectionDead</a></li><li><a href="global.html#isCursorDeadAndKilled">isCursorDeadAndKilled</a></li><li><a href="global.html#isCursorDeadButNotkilled">isCursorDeadButNotkilled</a></li><li><a href="global.html#isCursorKilled">isCursorKilled</a></li><li><a href="global.html#isPromiseLike">isPromiseLike</a></li><li><a href="global.html#isRetryableError">isRetryableError</a></li><li><a href="global.html#isRetryableWritesSupported">isRetryableWritesSupported</a></li><li><a href="global.html#isSDAMUnrecoverableError">isSDAMUnrecoverableError</a></li><li><a href="global.html#latencyWindowReducer">latencyWindowReducer</a></li><li><a href="global.html#matchesParentDomain">matchesParentDomain</a></li><li><a href="global.html#maxStalenessReducer">maxStalenessReducer</a></li><li><a href="global.html#monitorServer">monitorServer</a></li><li><a href="global.html#next">next</a></li><li><a href="global.html#normalizedFunctionString">normalizedFunctionString</a></li><li><a href="global.html#parallelCollectionScan">parallelCollectionScan</a></li><li><a href="global.html#parseConnectionString">parseConnectionString</a></li><li><a href="global.html#parseQueryString">parseQueryString</a></li><li><a href="global.html#parseQueryStringItemValue">parseQueryStringItemValue</a></li><li><a href="global.html#parseServerType">parseServerType</a></li><li><a href="global.html#parseSrvConnectionString">parseSrvConnectionString</a></li><li><a href="global.html#parseStringSeedlist">parseStringSeedlist</a></li><li><a href="global.html#profilingInfo">profilingInfo</a></li><li><a href="global.html#readPreferenceServerSelector">readPreferenceServerSelector</a></li><li><a href="global.html#relayEvents">relayEvents</a></li><li><a href="global.html#removeUser">removeUser</a></li><li><a href="global.html#replSetGetStatus">replSetGetStatus</a></li><li><a href="global.html#resolveClusterTime">resolveClusterTime</a></li><li><a href="global.html#resolveReadPreference">resolveReadPreference</a></li><li><a href="global.html#save">save</a></li><li><a href="global.html#SENSITIVE_COMMANDS">SENSITIVE_COMMANDS</a></li><li><a href="global.html#serverStatus">serverStatus</a></li><li><a href="global.html#setCursorDeadAndNotified">setCursorDeadAndNotified</a></li><li><a href="global.html#setCursorNotified">setCursorNotified</a></li><li><a href="global.html#tagSetMatch">tagSetMatch</a></li><li><a href="global.html#tagSetReducer">tagSetReducer</a></li><li><a href="global.html#toArray">toArray</a></li><li><a href="global.html#uuidV4">uuidV4</a></li><li><a href="global.html#validateCollection">validateCollection</a></li><li><a href="global.html#writableServerSelector">writableServerSelector</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">plugins/storage_mongo/node_modules/mongodb/lib/core/topologies/replset.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

const inherits = require('util').inherits;
const f = require('util').format;
const EventEmitter = require('events').EventEmitter;
const ReadPreference = require('./read_preference');
const CoreCursor = require('../cursor').CoreCursor;
const retrieveBSON = require('../connection/utils').retrieveBSON;
const Logger = require('../connection/logger');
const MongoError = require('../error').MongoError;
const Server = require('./server');
const ReplSetState = require('./replset_state');
const clone = require('./shared').clone;
const Timeout = require('./shared').Timeout;
const Interval = require('./shared').Interval;
const createClientInfo = require('./shared').createClientInfo;
const SessionMixins = require('./shared').SessionMixins;
const isRetryableWritesSupported = require('./shared').isRetryableWritesSupported;
const relayEvents = require('../utils').relayEvents;
const isRetryableError = require('../error').isRetryableError;
const BSON = retrieveBSON();
const calculateDurationInMs = require('../utils').calculateDurationInMs;
const getMMAPError = require('./shared').getMMAPError;

//
// States
var DISCONNECTED = 'disconnected';
var CONNECTING = 'connecting';
var CONNECTED = 'connected';
var UNREFERENCED = 'unreferenced';
var DESTROYED = 'destroyed';

function stateTransition(self, newState) {
  var legalTransitions = {
    disconnected: [CONNECTING, DESTROYED, DISCONNECTED],
    connecting: [CONNECTING, DESTROYED, CONNECTED, DISCONNECTED],
    connected: [CONNECTED, DISCONNECTED, DESTROYED, UNREFERENCED],
    unreferenced: [UNREFERENCED, DESTROYED],
    destroyed: [DESTROYED]
  };

  // Get current state
  var legalStates = legalTransitions[self.state];
  if (legalStates &amp;&amp; legalStates.indexOf(newState) !== -1) {
    self.state = newState;
  } else {
    self.s.logger.error(
      f(
        'Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]',
        self.id,
        self.state,
        newState,
        legalStates
      )
    );
  }
}

//
// ReplSet instance id
var id = 1;
var handlers = ['connect', 'close', 'error', 'timeout', 'parseError'];

/**
 * Creates a new Replset instance
 * @class
 * @param {array} seedlist A list of seeds for the replicaset
 * @param {boolean} options.setName The Replicaset set name
 * @param {boolean} [options.secondaryOnlyConnectionAllowed=false] Allow connection to a secondary only replicaset
 * @param {number} [options.haInterval=10000] The High availability period for replicaset inquiry
 * @param {boolean} [options.emitError=false] Server will emit errors events
 * @param {Cursor} [options.cursorFactory=Cursor] The cursor factory class used for all query cursors
 * @param {number} [options.size=5] Server connection pool size
 * @param {boolean} [options.keepAlive=true] TCP Connection keep alive enabled
 * @param {number} [options.keepAliveInitialDelay=0] Initial delay before TCP keep alive enabled
 * @param {boolean} [options.noDelay=true] TCP Connection no delay
 * @param {number} [options.connectionTimeout=10000] TCP Connection timeout setting
 * @param {number} [options.socketTimeout=0] TCP Socket timeout setting
 * @param {boolean} [options.ssl=false] Use SSL for connection
 * @param {boolean|function} [options.checkServerIdentity=true] Ensure we check server identify during SSL, set to false to disable checking. Only works for Node 0.12.x or higher. You can pass in a boolean or your own checkServerIdentity override function.
 * @param {Buffer} [options.ca] SSL Certificate store binary buffer
 * @param {Buffer} [options.crl] SSL Certificate revocation store binary buffer
 * @param {Buffer} [options.cert] SSL Certificate binary buffer
 * @param {Buffer} [options.key] SSL Key file binary buffer
 * @param {string} [options.passphrase] SSL Certificate pass phrase
 * @param {string} [options.servername=null] String containing the server name requested via TLS SNI.
 * @param {boolean} [options.rejectUnauthorized=true] Reject unauthorized server certificates
 * @param {boolean} [options.promoteLongs=true] Convert Long values from the db into Numbers if they fit into 53 bits
 * @param {boolean} [options.promoteValues=true] Promotes BSON values to native types where possible, set to false to only receive wrapper types.
 * @param {boolean} [options.promoteBuffers=false] Promotes Binary BSON values to native Node Buffers.
 * @param {number} [options.pingInterval=5000] Ping interval to check the response time to the different servers
 * @param {number} [options.localThresholdMS=15] Cutoff latency point in MS for Replicaset member selection
 * @param {boolean} [options.domainsEnabled=false] Enable the wrapping of the callback in the current domain, disabled by default to avoid perf hit.
 * @param {boolean} [options.monitorCommands=false] Enable command monitoring for this topology
 * @return {ReplSet} A cursor instance
 * @fires ReplSet#connect
 * @fires ReplSet#ha
 * @fires ReplSet#joined
 * @fires ReplSet#left
 * @fires ReplSet#failed
 * @fires ReplSet#fullsetup
 * @fires ReplSet#all
 * @fires ReplSet#error
 * @fires ReplSet#serverHeartbeatStarted
 * @fires ReplSet#serverHeartbeatSucceeded
 * @fires ReplSet#serverHeartbeatFailed
 * @fires ReplSet#topologyOpening
 * @fires ReplSet#topologyClosed
 * @fires ReplSet#topologyDescriptionChanged
 * @property {string} type the topology type.
 * @property {string} parserType the parser type used (c++ or js).
 */
var ReplSet = function(seedlist, options) {
  var self = this;
  options = options || {};

  // Validate seedlist
  if (!Array.isArray(seedlist)) throw new MongoError('seedlist must be an array');
  // Validate list
  if (seedlist.length === 0) throw new MongoError('seedlist must contain at least one entry');
  // Validate entries
  seedlist.forEach(function(e) {
    if (typeof e.host !== 'string' || typeof e.port !== 'number')
      throw new MongoError('seedlist entry must contain a host and port');
  });

  // Add event listener
  EventEmitter.call(this);

  // Get replSet Id
  this.id = id++;

  // Get the localThresholdMS
  var localThresholdMS = options.localThresholdMS || 15;
  // Backward compatibility
  if (options.acceptableLatency) localThresholdMS = options.acceptableLatency;

  // Create a logger
  var logger = Logger('ReplSet', options);

  // Internal state
  this.s = {
    options: Object.assign({}, options),
    // BSON instance
    bson:
      options.bson ||
      new BSON([
        BSON.Binary,
        BSON.Code,
        BSON.DBRef,
        BSON.Decimal128,
        BSON.Double,
        BSON.Int32,
        BSON.Long,
        BSON.Map,
        BSON.MaxKey,
        BSON.MinKey,
        BSON.ObjectId,
        BSON.BSONRegExp,
        BSON.Symbol,
        BSON.Timestamp
      ]),
    // Factory overrides
    Cursor: options.cursorFactory || CoreCursor,
    // Logger instance
    logger: logger,
    // Seedlist
    seedlist: seedlist,
    // Replicaset state
    replicaSetState: new ReplSetState({
      id: this.id,
      setName: options.setName,
      acceptableLatency: localThresholdMS,
      heartbeatFrequencyMS: options.haInterval ? options.haInterval : 10000,
      logger: logger
    }),
    // Current servers we are connecting to
    connectingServers: [],
    // Ha interval
    haInterval: options.haInterval ? options.haInterval : 10000,
    // Minimum heartbeat frequency used if we detect a server close
    minHeartbeatFrequencyMS: 500,
    // Disconnect handler
    disconnectHandler: options.disconnectHandler,
    // Server selection index
    index: 0,
    // Connect function options passed in
    connectOptions: {},
    // Are we running in debug mode
    debug: typeof options.debug === 'boolean' ? options.debug : false,
    // Client info
    clientInfo: createClientInfo(options)
  };

  // Add handler for topology change
  this.s.replicaSetState.on('topologyDescriptionChanged', function(r) {
    self.emit('topologyDescriptionChanged', r);
  });

  // Log info warning if the socketTimeout &lt; haInterval as it will cause
  // a lot of recycled connections to happen.
  if (
    this.s.logger.isWarn() &amp;&amp;
    this.s.options.socketTimeout !== 0 &amp;&amp;
    this.s.options.socketTimeout &lt; this.s.haInterval
  ) {
    this.s.logger.warn(
      f(
        'warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts',
        this.s.options.socketTimeout,
        this.s.haInterval
      )
    );
  }

  // Add forwarding of events from state handler
  var types = ['joined', 'left'];
  types.forEach(function(x) {
    self.s.replicaSetState.on(x, function(t, s) {
      self.emit(x, t, s);
    });
  });

  // Connect stat
  this.initialConnectState = {
    connect: false,
    fullsetup: false,
    all: false
  };

  // Disconnected state
  this.state = DISCONNECTED;
  this.haTimeoutId = null;
  // Last ismaster
  this.ismaster = null;
  // Contains the intervalId
  this.intervalIds = [];

  // Highest clusterTime seen in responses from the current deployment
  this.clusterTime = null;
};

inherits(ReplSet, EventEmitter);
Object.assign(ReplSet.prototype, SessionMixins);

Object.defineProperty(ReplSet.prototype, 'type', {
  enumerable: true,
  get: function() {
    return 'replset';
  }
});

Object.defineProperty(ReplSet.prototype, 'parserType', {
  enumerable: true,
  get: function() {
    return BSON.native ? 'c++' : 'js';
  }
});

Object.defineProperty(ReplSet.prototype, 'logicalSessionTimeoutMinutes', {
  enumerable: true,
  get: function() {
    return this.s.replicaSetState.logicalSessionTimeoutMinutes || null;
  }
});

function rexecuteOperations(self) {
  // If we have a primary and a disconnect handler, execute
  // buffered operations
  if (self.s.replicaSetState.hasPrimaryAndSecondary() &amp;&amp; self.s.disconnectHandler) {
    self.s.disconnectHandler.execute();
  } else if (self.s.replicaSetState.hasPrimary() &amp;&amp; self.s.disconnectHandler) {
    self.s.disconnectHandler.execute({ executePrimary: true });
  } else if (self.s.replicaSetState.hasSecondary() &amp;&amp; self.s.disconnectHandler) {
    self.s.disconnectHandler.execute({ executeSecondary: true });
  }
}

function connectNewServers(self, servers, callback) {
  // Count lefts
  var count = servers.length;
  var error = null;

  // Handle events
  var _handleEvent = function(self, event) {
    return function(err) {
      var _self = this;
      count = count - 1;

      // Destroyed
      if (self.state === DESTROYED || self.state === UNREFERENCED) {
        return this.destroy({ force: true });
      }

      if (event === 'connect') {
        // Destroyed
        if (self.state === DESTROYED || self.state === UNREFERENCED) {
          return _self.destroy({ force: true });
        }

        // Update the state
        var result = self.s.replicaSetState.update(_self);
        // Update the state with the new server
        if (result) {
          // Primary lastIsMaster store it
          if (_self.lastIsMaster() &amp;&amp; _self.lastIsMaster().ismaster) {
            self.ismaster = _self.lastIsMaster();
          }

          // Remove the handlers
          for (let i = 0; i &lt; handlers.length; i++) {
            _self.removeAllListeners(handlers[i]);
          }

          // Add stable state handlers
          _self.on('error', handleEvent(self, 'error'));
          _self.on('close', handleEvent(self, 'close'));
          _self.on('timeout', handleEvent(self, 'timeout'));
          _self.on('parseError', handleEvent(self, 'parseError'));

          // Enalbe the monitoring of the new server
          monitorServer(_self.lastIsMaster().me, self, {});

          // Rexecute any stalled operation
          rexecuteOperations(self);
        } else {
          _self.destroy({ force: true });
        }
      } else if (event === 'error') {
        error = err;
      }

      // Rexecute any stalled operation
      rexecuteOperations(self);

      // Are we done finish up callback
      if (count === 0) {
        callback(error);
      }
    };
  };

  // No new servers
  if (count === 0) return callback();

  // Execute method
  function execute(_server, i) {
    setTimeout(function() {
      // Destroyed
      if (self.state === DESTROYED || self.state === UNREFERENCED) {
        return;
      }

      // Create a new server instance
      var server = new Server(
        Object.assign({}, self.s.options, {
          host: _server.split(':')[0],
          port: parseInt(_server.split(':')[1], 10),
          reconnect: false,
          monitoring: false,
          parent: self,
          clientInfo: clone(self.s.clientInfo)
        })
      );

      // Add temp handlers
      server.once('connect', _handleEvent(self, 'connect'));
      server.once('close', _handleEvent(self, 'close'));
      server.once('timeout', _handleEvent(self, 'timeout'));
      server.once('error', _handleEvent(self, 'error'));
      server.once('parseError', _handleEvent(self, 'parseError'));

      // SDAM Monitoring events
      server.on('serverOpening', e => self.emit('serverOpening', e));
      server.on('serverDescriptionChanged', e => self.emit('serverDescriptionChanged', e));
      server.on('serverClosed', e => self.emit('serverClosed', e));

      // Command Monitoring events
      relayEvents(server, self, ['commandStarted', 'commandSucceeded', 'commandFailed']);

      server.connect(self.s.connectOptions);
    }, i);
  }

  // Create new instances
  for (var i = 0; i &lt; servers.length; i++) {
    execute(servers[i], i);
  }
}

// Ping the server
var pingServer = function(self, server, cb) {
  // Measure running time
  var start = new Date().getTime();

  // Emit the server heartbeat start
  emitSDAMEvent(self, 'serverHeartbeatStarted', { connectionId: server.name });

  // Execute ismaster
  // Set the socketTimeout for a monitoring message to a low number
  // Ensuring ismaster calls are timed out quickly
  server.command(
    'admin.$cmd',
    {
      ismaster: true
    },
    {
      monitoring: true,
      socketTimeout: self.s.options.connectionTimeout || 2000
    },
    function(err, r) {
      if (self.state === DESTROYED || self.state === UNREFERENCED) {
        server.destroy({ force: true });
        return cb(err, r);
      }

      // Calculate latency
      var latencyMS = new Date().getTime() - start;

      // Set the last updatedTime
      var hrtime = process.hrtime();
      server.lastUpdateTime = (hrtime[0] * 1e9 + hrtime[1]) / 1e6;

      // We had an error, remove it from the state
      if (err) {
        // Emit the server heartbeat failure
        emitSDAMEvent(self, 'serverHeartbeatFailed', {
          durationMS: latencyMS,
          failure: err,
          connectionId: server.name
        });

        // Remove server from the state
        self.s.replicaSetState.remove(server);
      } else {
        // Update the server ismaster
        server.ismaster = r.result;

        // Check if we have a lastWriteDate convert it to MS
        // and store on the server instance for later use
        if (server.ismaster.lastWrite &amp;&amp; server.ismaster.lastWrite.lastWriteDate) {
          server.lastWriteDate = server.ismaster.lastWrite.lastWriteDate.getTime();
        }

        // Do we have a brand new server
        if (server.lastIsMasterMS === -1) {
          server.lastIsMasterMS = latencyMS;
        } else if (server.lastIsMasterMS) {
          // After the first measurement, average RTT MUST be computed using an
          // exponentially-weighted moving average formula, with a weighting factor (alpha) of 0.2.
          // If the prior average is denoted old_rtt, then the new average (new_rtt) is
          // computed from a new RTT measurement (x) using the following formula:
          // alpha = 0.2
          // new_rtt = alpha * x + (1 - alpha) * old_rtt
          server.lastIsMasterMS = 0.2 * latencyMS + (1 - 0.2) * server.lastIsMasterMS;
        }

        if (self.s.replicaSetState.update(server)) {
          // Primary lastIsMaster store it
          if (server.lastIsMaster() &amp;&amp; server.lastIsMaster().ismaster) {
            self.ismaster = server.lastIsMaster();
          }
        }

        // Server heart beat event
        emitSDAMEvent(self, 'serverHeartbeatSucceeded', {
          durationMS: latencyMS,
          reply: r.result,
          connectionId: server.name
        });
      }

      // Calculate the staleness for this server
      self.s.replicaSetState.updateServerMaxStaleness(server, self.s.haInterval);

      // Callback
      cb(err, r);
    }
  );
};

// Each server is monitored in parallel in their own timeout loop
var monitorServer = function(host, self, options) {
  // If this is not the initial scan
  // Is this server already being monitoried, then skip monitoring
  if (!options.haInterval) {
    for (var i = 0; i &lt; self.intervalIds.length; i++) {
      if (self.intervalIds[i].__host === host) {
        return;
      }
    }
  }

  // Get the haInterval
  var _process = options.haInterval ? Timeout : Interval;
  var _haInterval = options.haInterval ? options.haInterval : self.s.haInterval;

  // Create the interval
  var intervalId = new _process(function() {
    if (self.state === DESTROYED || self.state === UNREFERENCED) {
      // clearInterval(intervalId);
      intervalId.stop();
      return;
    }

    // Do we already have server connection available for this host
    var _server = self.s.replicaSetState.get(host);

    // Check if we have a known server connection and reuse
    if (_server) {
      // Ping the server
      return pingServer(self, _server, function(err) {
        if (err) {
          // NOTE: should something happen here?
          return;
        }

        if (self.state === DESTROYED || self.state === UNREFERENCED) {
          intervalId.stop();
          return;
        }

        // Filter out all called intervaliIds
        self.intervalIds = self.intervalIds.filter(function(intervalId) {
          return intervalId.isRunning();
        });

        // Initial sweep
        if (_process === Timeout) {
          if (
            self.state === CONNECTING &amp;&amp;
            ((self.s.replicaSetState.hasSecondary() &amp;&amp;
              self.s.options.secondaryOnlyConnectionAllowed) ||
              self.s.replicaSetState.hasPrimary())
          ) {
            self.state = CONNECTED;

            // Emit connected sign
            process.nextTick(function() {
              self.emit('connect', self);
            });

            // Start topology interval check
            topologyMonitor(self, {});
          }
        } else {
          if (
            self.state === DISCONNECTED &amp;&amp;
            ((self.s.replicaSetState.hasSecondary() &amp;&amp;
              self.s.options.secondaryOnlyConnectionAllowed) ||
              self.s.replicaSetState.hasPrimary())
          ) {
            self.state = CONNECTED;

            // Rexecute any stalled operation
            rexecuteOperations(self);

            // Emit connected sign
            process.nextTick(function() {
              self.emit('reconnect', self);
            });
          }
        }

        if (
          self.initialConnectState.connect &amp;&amp;
          !self.initialConnectState.fullsetup &amp;&amp;
          self.s.replicaSetState.hasPrimaryAndSecondary()
        ) {
          // Set initial connect state
          self.initialConnectState.fullsetup = true;
          self.initialConnectState.all = true;

          process.nextTick(function() {
            self.emit('fullsetup', self);
            self.emit('all', self);
          });
        }
      });
    }
  }, _haInterval);

  // Start the interval
  intervalId.start();
  // Add the intervalId host name
  intervalId.__host = host;
  // Add the intervalId to our list of intervalIds
  self.intervalIds.push(intervalId);
};

function topologyMonitor(self, options) {
  if (self.state === DESTROYED || self.state === UNREFERENCED) return;
  options = options || {};

  // Get the servers
  var servers = Object.keys(self.s.replicaSetState.set);

  // Get the haInterval
  var _process = options.haInterval ? Timeout : Interval;
  var _haInterval = options.haInterval ? options.haInterval : self.s.haInterval;

  if (_process === Timeout) {
    return connectNewServers(self, self.s.replicaSetState.unknownServers, function(err) {
      // Don't emit errors if the connection was already
      if (self.state === DESTROYED || self.state === UNREFERENCED) {
        return;
      }

      if (!self.s.replicaSetState.hasPrimary() &amp;&amp; !self.s.options.secondaryOnlyConnectionAllowed) {
        if (err) {
          return self.emit('error', err);
        }

        self.emit(
          'error',
          new MongoError('no primary found in replicaset or invalid replica set name')
        );
        return self.destroy({ force: true });
      } else if (
        !self.s.replicaSetState.hasSecondary() &amp;&amp;
        self.s.options.secondaryOnlyConnectionAllowed
      ) {
        if (err) {
          return self.emit('error', err);
        }

        self.emit(
          'error',
          new MongoError('no secondary found in replicaset or invalid replica set name')
        );
        return self.destroy({ force: true });
      }

      for (var i = 0; i &lt; servers.length; i++) {
        monitorServer(servers[i], self, options);
      }
    });
  } else {
    for (var i = 0; i &lt; servers.length; i++) {
      monitorServer(servers[i], self, options);
    }
  }

  // Run the reconnect process
  function executeReconnect(self) {
    return function() {
      if (self.state === DESTROYED || self.state === UNREFERENCED) {
        return;
      }

      connectNewServers(self, self.s.replicaSetState.unknownServers, function() {
        var monitoringFrequencey = self.s.replicaSetState.hasPrimary()
          ? _haInterval
          : self.s.minHeartbeatFrequencyMS;

        // Create a timeout
        self.intervalIds.push(new Timeout(executeReconnect(self), monitoringFrequencey).start());
      });
    };
  }

  // Decide what kind of interval to use
  var intervalTime = !self.s.replicaSetState.hasPrimary()
    ? self.s.minHeartbeatFrequencyMS
    : _haInterval;

  self.intervalIds.push(new Timeout(executeReconnect(self), intervalTime).start());
}

function addServerToList(list, server) {
  for (var i = 0; i &lt; list.length; i++) {
    if (list[i].name.toLowerCase() === server.name.toLowerCase()) return true;
  }

  list.push(server);
}

function handleEvent(self, event) {
  return function() {
    if (self.state === DESTROYED || self.state === UNREFERENCED) return;
    // Debug log
    if (self.s.logger.isDebug()) {
      self.s.logger.debug(
        f('handleEvent %s from server %s in replset with id %s', event, this.name, self.id)
      );
    }

    // Remove from the replicaset state
    self.s.replicaSetState.remove(this);

    // Are we in a destroyed state return
    if (self.state === DESTROYED || self.state === UNREFERENCED) return;

    // If no primary and secondary available
    if (
      !self.s.replicaSetState.hasPrimary() &amp;&amp;
      !self.s.replicaSetState.hasSecondary() &amp;&amp;
      self.s.options.secondaryOnlyConnectionAllowed
    ) {
      stateTransition(self, DISCONNECTED);
    } else if (!self.s.replicaSetState.hasPrimary()) {
      stateTransition(self, DISCONNECTED);
    }

    addServerToList(self.s.connectingServers, this);
  };
}

function shouldTriggerConnect(self) {
  const isConnecting = self.state === CONNECTING;
  const hasPrimary = self.s.replicaSetState.hasPrimary();
  const hasSecondary = self.s.replicaSetState.hasSecondary();
  const secondaryOnlyConnectionAllowed = self.s.options.secondaryOnlyConnectionAllowed;
  const readPreferenceSecondary =
    self.s.connectOptions.readPreference &amp;&amp;
    self.s.connectOptions.readPreference.equals(ReadPreference.secondary);

  return (
    (isConnecting &amp;&amp;
      ((readPreferenceSecondary &amp;&amp; hasSecondary) || (!readPreferenceSecondary &amp;&amp; hasPrimary))) ||
    (hasSecondary &amp;&amp; secondaryOnlyConnectionAllowed)
  );
}

function handleInitialConnectEvent(self, event) {
  return function() {
    var _this = this;
    // Debug log
    if (self.s.logger.isDebug()) {
      self.s.logger.debug(
        f(
          'handleInitialConnectEvent %s from server %s in replset with id %s',
          event,
          this.name,
          self.id
        )
      );
    }

    // Destroy the instance
    if (self.state === DESTROYED || self.state === UNREFERENCED) {
      return this.destroy({ force: true });
    }

    // Check the type of server
    if (event === 'connect') {
      // Update the state
      var result = self.s.replicaSetState.update(_this);
      if (result === true) {
        // Primary lastIsMaster store it
        if (_this.lastIsMaster() &amp;&amp; _this.lastIsMaster().ismaster) {
          self.ismaster = _this.lastIsMaster();
        }

        // Debug log
        if (self.s.logger.isDebug()) {
          self.s.logger.debug(
            f(
              'handleInitialConnectEvent %s from server %s in replset with id %s has state [%s]',
              event,
              _this.name,
              self.id,
              JSON.stringify(self.s.replicaSetState.set)
            )
          );
        }

        // Remove the handlers
        for (let i = 0; i &lt; handlers.length; i++) {
          _this.removeAllListeners(handlers[i]);
        }

        // Add stable state handlers
        _this.on('error', handleEvent(self, 'error'));
        _this.on('close', handleEvent(self, 'close'));
        _this.on('timeout', handleEvent(self, 'timeout'));
        _this.on('parseError', handleEvent(self, 'parseError'));

        // Do we have a primary or primaryAndSecondary
        if (shouldTriggerConnect(self)) {
          // We are connected
          self.state = CONNECTED;

          // Set initial connect state
          self.initialConnectState.connect = true;
          // Emit connect event
          process.nextTick(function() {
            self.emit('connect', self);
          });

          topologyMonitor(self, {});
        }
      } else if (result instanceof MongoError) {
        _this.destroy({ force: true });
        self.destroy({ force: true });
        return self.emit('error', result);
      } else {
        _this.destroy({ force: true });
      }
    } else {
      // Emit failure to connect
      self.emit('failed', this);

      addServerToList(self.s.connectingServers, this);
      // Remove from the state
      self.s.replicaSetState.remove(this);
    }

    if (
      self.initialConnectState.connect &amp;&amp;
      !self.initialConnectState.fullsetup &amp;&amp;
      self.s.replicaSetState.hasPrimaryAndSecondary()
    ) {
      // Set initial connect state
      self.initialConnectState.fullsetup = true;
      self.initialConnectState.all = true;

      process.nextTick(function() {
        self.emit('fullsetup', self);
        self.emit('all', self);
      });
    }

    // Remove from the list from connectingServers
    for (var i = 0; i &lt; self.s.connectingServers.length; i++) {
      if (self.s.connectingServers[i].equals(this)) {
        self.s.connectingServers.splice(i, 1);
      }
    }

    // Trigger topologyMonitor
    if (self.s.connectingServers.length === 0 &amp;&amp; self.state === CONNECTING) {
      topologyMonitor(self, { haInterval: 1 });
    }
  };
}

function connectServers(self, servers) {
  // Update connectingServers
  self.s.connectingServers = self.s.connectingServers.concat(servers);

  // Index used to interleaf the server connects, avoiding
  // runtime issues on io constrained vm's
  var timeoutInterval = 0;

  function connect(server, timeoutInterval) {
    setTimeout(function() {
      // Add the server to the state
      if (self.s.replicaSetState.update(server)) {
        // Primary lastIsMaster store it
        if (server.lastIsMaster() &amp;&amp; server.lastIsMaster().ismaster) {
          self.ismaster = server.lastIsMaster();
        }
      }

      // Add event handlers
      server.once('close', handleInitialConnectEvent(self, 'close'));
      server.once('timeout', handleInitialConnectEvent(self, 'timeout'));
      server.once('parseError', handleInitialConnectEvent(self, 'parseError'));
      server.once('error', handleInitialConnectEvent(self, 'error'));
      server.once('connect', handleInitialConnectEvent(self, 'connect'));

      // SDAM Monitoring events
      server.on('serverOpening', e => self.emit('serverOpening', e));
      server.on('serverDescriptionChanged', e => self.emit('serverDescriptionChanged', e));
      server.on('serverClosed', e => self.emit('serverClosed', e));

      // Command Monitoring events
      relayEvents(server, self, ['commandStarted', 'commandSucceeded', 'commandFailed']);

      // Start connection
      server.connect(self.s.connectOptions);
    }, timeoutInterval);
  }

  // Start all the servers
  while (servers.length > 0) {
    connect(servers.shift(), timeoutInterval++);
  }
}

/**
 * Emit event if it exists
 * @method
 */
function emitSDAMEvent(self, event, description) {
  if (self.listeners(event).length > 0) {
    self.emit(event, description);
  }
}

/**
 * Initiate server connect
 */
ReplSet.prototype.connect = function(options) {
  var self = this;
  // Add any connect level options to the internal state
  this.s.connectOptions = options || {};

  // Set connecting state
  stateTransition(this, CONNECTING);

  // Create server instances
  var servers = this.s.seedlist.map(function(x) {
    return new Server(
      Object.assign({}, self.s.options, x, options, {
        reconnect: false,
        monitoring: false,
        parent: self,
        clientInfo: clone(self.s.clientInfo)
      })
    );
  });

  // Error out as high availbility interval must be &lt; than socketTimeout
  if (
    this.s.options.socketTimeout > 0 &amp;&amp;
    this.s.options.socketTimeout &lt;= this.s.options.haInterval
  ) {
    return self.emit(
      'error',
      new MongoError(
        f(
          'haInterval [%s] MS must be set to less than socketTimeout [%s] MS',
          this.s.options.haInterval,
          this.s.options.socketTimeout
        )
      )
    );
  }

  // Emit the topology opening event
  emitSDAMEvent(this, 'topologyOpening', { topologyId: this.id });
  // Start all server connections
  connectServers(self, servers);
};

/**
 * Authenticate the topology.
 * @method
 * @param {MongoCredentials} credentials The credentials for authentication we are using
 * @param {authResultCallback} callback A callback function
 */
ReplSet.prototype.auth = function(credentials, callback) {
  if (typeof callback === 'function') callback(null, null);
};

/**
 * Destroy the server connection
 * @param {boolean} [options.force=false] Force destroy the pool
 * @method
 */
ReplSet.prototype.destroy = function(options, callback) {
  options = options || {};

  let destroyCount = this.s.connectingServers.length + 1; // +1 for the callback from `replicaSetState.destroy`
  const serverDestroyed = () => {
    destroyCount--;
    if (destroyCount > 0) {
      return;
    }

    // Emit toplogy closing event
    emitSDAMEvent(this, 'topologyClosed', { topologyId: this.id });

    // Transition state
    stateTransition(this, DESTROYED);

    if (typeof callback === 'function') {
      callback(null, null);
    }
  };

  // Clear out any monitoring process
  if (this.haTimeoutId) clearTimeout(this.haTimeoutId);

  // Clear out all monitoring
  for (var i = 0; i &lt; this.intervalIds.length; i++) {
    this.intervalIds[i].stop();
  }

  // Reset list of intervalIds
  this.intervalIds = [];

  if (destroyCount === 0) {
    serverDestroyed();
    return;
  }

  // Destroy the replicaset
  this.s.replicaSetState.destroy(options, serverDestroyed);

  // Destroy all connecting servers
  this.s.connectingServers.forEach(function(x) {
    x.destroy(options, serverDestroyed);
  });
};

/**
 * Unref all connections belong to this server
 * @method
 */
ReplSet.prototype.unref = function() {
  // Transition state
  stateTransition(this, UNREFERENCED);

  this.s.replicaSetState.allServers().forEach(function(x) {
    x.unref();
  });

  clearTimeout(this.haTimeoutId);
};

/**
 * Returns the last known ismaster document for this server
 * @method
 * @return {object}
 */
ReplSet.prototype.lastIsMaster = function() {
  // If secondaryOnlyConnectionAllowed and no primary but secondary
  // return the secondaries ismaster result.
  if (
    this.s.options.secondaryOnlyConnectionAllowed &amp;&amp;
    !this.s.replicaSetState.hasPrimary() &amp;&amp;
    this.s.replicaSetState.hasSecondary()
  ) {
    return this.s.replicaSetState.secondaries[0].lastIsMaster();
  }

  return this.s.replicaSetState.primary
    ? this.s.replicaSetState.primary.lastIsMaster()
    : this.ismaster;
};

/**
 * All raw connections
 * @method
 * @return {Connection[]}
 */
ReplSet.prototype.connections = function() {
  var servers = this.s.replicaSetState.allServers();
  var connections = [];
  for (var i = 0; i &lt; servers.length; i++) {
    connections = connections.concat(servers[i].connections());
  }

  return connections;
};

/**
 * Figure out if the server is connected
 * @method
 * @param {ReadPreference} [options.readPreference] Specify read preference if command supports it
 * @return {boolean}
 */
ReplSet.prototype.isConnected = function(options) {
  options = options || {};

  // If we specified a read preference check if we are connected to something
  // than can satisfy this
  if (options.readPreference &amp;&amp; options.readPreference.equals(ReadPreference.secondary)) {
    return this.s.replicaSetState.hasSecondary();
  }

  if (options.readPreference &amp;&amp; options.readPreference.equals(ReadPreference.primary)) {
    return this.s.replicaSetState.hasPrimary();
  }

  if (options.readPreference &amp;&amp; options.readPreference.equals(ReadPreference.primaryPreferred)) {
    return this.s.replicaSetState.hasSecondary() || this.s.replicaSetState.hasPrimary();
  }

  if (options.readPreference &amp;&amp; options.readPreference.equals(ReadPreference.secondaryPreferred)) {
    return this.s.replicaSetState.hasSecondary() || this.s.replicaSetState.hasPrimary();
  }

  if (this.s.options.secondaryOnlyConnectionAllowed &amp;&amp; this.s.replicaSetState.hasSecondary()) {
    return true;
  }

  return this.s.replicaSetState.hasPrimary();
};

/**
 * Figure out if the replicaset instance was destroyed by calling destroy
 * @method
 * @return {boolean}
 */
ReplSet.prototype.isDestroyed = function() {
  return this.state === DESTROYED;
};

const SERVER_SELECTION_TIMEOUT_MS = 10000; // hardcoded `serverSelectionTimeoutMS` for legacy topology
const SERVER_SELECTION_INTERVAL_MS = 1000; // time to wait between selection attempts
/**
 * Selects a server
 *
 * @method
 * @param {function} selector Unused
 * @param {ReadPreference} [options.readPreference] Specify read preference if command supports it
 * @param {ClientSession} [options.session] Unused
 * @param {function} callback
 */
ReplSet.prototype.selectServer = function(selector, options, callback) {
  if (typeof selector === 'function' &amp;&amp; typeof callback === 'undefined')
    (callback = selector), (selector = undefined), (options = {});
  if (typeof options === 'function') (callback = options), (options = selector);
  options = options || {};

  let readPreference;
  if (selector instanceof ReadPreference) {
    readPreference = selector;
  } else {
    readPreference = options.readPreference || ReadPreference.primary;
  }

  let lastError;
  const start = process.hrtime();
  const _selectServer = () => {
    if (calculateDurationInMs(start) >= SERVER_SELECTION_TIMEOUT_MS) {
      if (lastError != null) {
        callback(lastError, null);
      } else {
        callback(new MongoError('Server selection timed out'));
      }

      return;
    }

    const server = this.s.replicaSetState.pickServer(readPreference);
    if (server == null) {
      setTimeout(_selectServer, SERVER_SELECTION_INTERVAL_MS);
      return;
    }

    if (!(server instanceof Server)) {
      lastError = server;
      setTimeout(_selectServer, SERVER_SELECTION_INTERVAL_MS);
      return;
    }

    if (this.s.debug) this.emit('pickedServer', options.readPreference, server);
    callback(null, server);
  };

  _selectServer();
};

/**
 * Get all connected servers
 * @method
 * @return {Server[]}
 */
ReplSet.prototype.getServers = function() {
  return this.s.replicaSetState.allServers();
};

//
// Execute write operation
function executeWriteOperation(args, options, callback) {
  if (typeof options === 'function') (callback = options), (options = {});
  options = options || {};

  // TODO: once we drop Node 4, use destructuring either here or in arguments.
  const self = args.self;
  const op = args.op;
  const ns = args.ns;
  const ops = args.ops;

  if (self.state === DESTROYED) {
    return callback(new MongoError(f('topology was destroyed')));
  }

  const willRetryWrite =
    !args.retrying &amp;&amp;
    !!options.retryWrites &amp;&amp;
    options.session &amp;&amp;
    isRetryableWritesSupported(self) &amp;&amp;
    !options.session.inTransaction();

  if (!self.s.replicaSetState.hasPrimary()) {
    if (self.s.disconnectHandler) {
      // Not connected but we have a disconnecthandler
      return self.s.disconnectHandler.add(op, ns, ops, options, callback);
    } else if (!willRetryWrite) {
      // No server returned we had an error
      return callback(new MongoError('no primary server found'));
    }
  }

  const handler = (err, result) => {
    if (!err) return callback(null, result);
    if (!isRetryableError(err)) {
      err = getMMAPError(err);
      return callback(err);
    }

    if (willRetryWrite) {
      const newArgs = Object.assign({}, args, { retrying: true });
      return executeWriteOperation(newArgs, options, callback);
    }

    // Per SDAM, remove primary from replicaset
    if (self.s.replicaSetState.primary) {
      self.s.replicaSetState.remove(self.s.replicaSetState.primary, { force: true });
    }

    return callback(err);
  };

  if (callback.operationId) {
    handler.operationId = callback.operationId;
  }

  // increment and assign txnNumber
  if (willRetryWrite) {
    options.session.incrementTransactionNumber();
    options.willRetryWrite = willRetryWrite;
  }

  self.s.replicaSetState.primary[op](ns, ops, options, handler);
}

/**
 * Insert one or more documents
 * @method
 * @param {string} ns The MongoDB fully qualified namespace (ex: db1.collection1)
 * @param {array} ops An array of documents to insert
 * @param {boolean} [options.ordered=true] Execute in order or out of order
 * @param {object} [options.writeConcern={}] Write concern for the operation
 * @param {Boolean} [options.serializeFunctions=false] Specify if functions on an object should be serialized.
 * @param {Boolean} [options.ignoreUndefined=false] Specify if the BSON serializer should ignore undefined fields.
 * @param {ClientSession} [options.session=null] Session to use for the operation
 * @param {boolean} [options.retryWrites] Enable retryable writes for this operation
 * @param {opResultCallback} callback A callback function
 */
ReplSet.prototype.insert = function(ns, ops, options, callback) {
  // Execute write operation
  executeWriteOperation({ self: this, op: 'insert', ns, ops }, options, callback);
};

/**
 * Perform one or more update operations
 * @method
 * @param {string} ns The MongoDB fully qualified namespace (ex: db1.collection1)
 * @param {array} ops An array of updates
 * @param {boolean} [options.ordered=true] Execute in order or out of order
 * @param {object} [options.writeConcern={}] Write concern for the operation
 * @param {Boolean} [options.serializeFunctions=false] Specify if functions on an object should be serialized.
 * @param {Boolean} [options.ignoreUndefined=false] Specify if the BSON serializer should ignore undefined fields.
 * @param {ClientSession} [options.session=null] Session to use for the operation
 * @param {boolean} [options.retryWrites] Enable retryable writes for this operation
 * @param {opResultCallback} callback A callback function
 */
ReplSet.prototype.update = function(ns, ops, options, callback) {
  // Execute write operation
  executeWriteOperation({ self: this, op: 'update', ns, ops }, options, callback);
};

/**
 * Perform one or more remove operations
 * @method
 * @param {string} ns The MongoDB fully qualified namespace (ex: db1.collection1)
 * @param {array} ops An array of removes
 * @param {boolean} [options.ordered=true] Execute in order or out of order
 * @param {object} [options.writeConcern={}] Write concern for the operation
 * @param {Boolean} [options.serializeFunctions=false] Specify if functions on an object should be serialized.
 * @param {Boolean} [options.ignoreUndefined=false] Specify if the BSON serializer should ignore undefined fields.
 * @param {ClientSession} [options.session=null] Session to use for the operation
 * @param {boolean} [options.retryWrites] Enable retryable writes for this operation
 * @param {opResultCallback} callback A callback function
 */
ReplSet.prototype.remove = function(ns, ops, options, callback) {
  // Execute write operation
  executeWriteOperation({ self: this, op: 'remove', ns, ops }, options, callback);
};

const RETRYABLE_WRITE_OPERATIONS = ['findAndModify', 'insert', 'update', 'delete'];

function isWriteCommand(command) {
  return RETRYABLE_WRITE_OPERATIONS.some(op => command[op]);
}

/**
 * Execute a command
 * @method
 * @param {string} ns The MongoDB fully qualified namespace (ex: db1.collection1)
 * @param {object} cmd The command hash
 * @param {ReadPreference} [options.readPreference] Specify read preference if command supports it
 * @param {Connection} [options.connection] Specify connection object to execute command against
 * @param {Boolean} [options.serializeFunctions=false] Specify if functions on an object should be serialized.
 * @param {Boolean} [options.ignoreUndefined=false] Specify if the BSON serializer should ignore undefined fields.
 * @param {ClientSession} [options.session=null] Session to use for the operation
 * @param {opResultCallback} callback A callback function
 */
ReplSet.prototype.command = function(ns, cmd, options, callback) {
  if (typeof options === 'function') {
    (callback = options), (options = {}), (options = options || {});
  }

  if (this.state === DESTROYED) return callback(new MongoError(f('topology was destroyed')));
  var self = this;

  // Establish readPreference
  var readPreference = options.readPreference ? options.readPreference : ReadPreference.primary;

  // If the readPreference is primary and we have no primary, store it
  if (
    readPreference.preference === 'primary' &amp;&amp;
    !this.s.replicaSetState.hasPrimary() &amp;&amp;
    this.s.disconnectHandler != null
  ) {
    return this.s.disconnectHandler.add('command', ns, cmd, options, callback);
  } else if (
    readPreference.preference === 'secondary' &amp;&amp;
    !this.s.replicaSetState.hasSecondary() &amp;&amp;
    this.s.disconnectHandler != null
  ) {
    return this.s.disconnectHandler.add('command', ns, cmd, options, callback);
  } else if (
    readPreference.preference !== 'primary' &amp;&amp;
    !this.s.replicaSetState.hasSecondary() &amp;&amp;
    !this.s.replicaSetState.hasPrimary() &amp;&amp;
    this.s.disconnectHandler != null
  ) {
    return this.s.disconnectHandler.add('command', ns, cmd, options, callback);
  }

  // Pick a server
  var server = this.s.replicaSetState.pickServer(readPreference);
  // We received an error, return it
  if (!(server instanceof Server)) return callback(server);
  // Emit debug event
  if (self.s.debug) self.emit('pickedServer', ReadPreference.primary, server);

  // No server returned we had an error
  if (server == null) {
    return callback(
      new MongoError(
        f('no server found that matches the provided readPreference %s', readPreference)
      )
    );
  }

  const willRetryWrite =
    !options.retrying &amp;&amp;
    !!options.retryWrites &amp;&amp;
    options.session &amp;&amp;
    isRetryableWritesSupported(self) &amp;&amp;
    !options.session.inTransaction() &amp;&amp;
    isWriteCommand(cmd);

  const cb = (err, result) => {
    if (!err) return callback(null, result);
    if (!isRetryableError(err)) {
      return callback(err);
    }

    if (willRetryWrite) {
      const newOptions = Object.assign({}, options, { retrying: true });
      return this.command(ns, cmd, newOptions, callback);
    }

    // Per SDAM, remove primary from replicaset
    if (this.s.replicaSetState.primary) {
      this.s.replicaSetState.remove(this.s.replicaSetState.primary, { force: true });
    }

    return callback(err);
  };

  // increment and assign txnNumber
  if (willRetryWrite) {
    options.session.incrementTransactionNumber();
    options.willRetryWrite = willRetryWrite;
  }

  // Execute the command
  server.command(ns, cmd, options, cb);
};

/**
 * Get a new cursor
 * @method
 * @param {string} ns The MongoDB fully qualified namespace (ex: db1.collection1)
 * @param {object|Long} cmd Can be either a command returning a cursor or a cursorId
 * @param {object} [options] Options for the cursor
 * @param {object} [options.batchSize=0] Batchsize for the operation
 * @param {array} [options.documents=[]] Initial documents list for cursor
 * @param {ReadPreference} [options.readPreference] Specify read preference if command supports it
 * @param {Boolean} [options.serializeFunctions=false] Specify if functions on an object should be serialized.
 * @param {Boolean} [options.ignoreUndefined=false] Specify if the BSON serializer should ignore undefined fields.
 * @param {ClientSession} [options.session=null] Session to use for the operation
 * @param {object} [options.topology] The internal topology of the created cursor
 * @returns {Cursor}
 */
ReplSet.prototype.cursor = function(ns, cmd, options) {
  options = options || {};
  const topology = options.topology || this;

  // Set up final cursor type
  var FinalCursor = options.cursorFactory || this.s.Cursor;

  // Return the cursor
  return new FinalCursor(topology, ns, cmd, options);
};

/**
 * A replset connect event, used to verify that the connection is up and running
 *
 * @event ReplSet#connect
 * @type {ReplSet}
 */

/**
 * A replset reconnect event, used to verify that the topology reconnected
 *
 * @event ReplSet#reconnect
 * @type {ReplSet}
 */

/**
 * A replset fullsetup event, used to signal that all topology members have been contacted.
 *
 * @event ReplSet#fullsetup
 * @type {ReplSet}
 */

/**
 * A replset all event, used to signal that all topology members have been contacted.
 *
 * @event ReplSet#all
 * @type {ReplSet}
 */

/**
 * A replset failed event, used to signal that initial replset connection failed.
 *
 * @event ReplSet#failed
 * @type {ReplSet}
 */

/**
 * A server member left the replicaset
 *
 * @event ReplSet#left
 * @type {function}
 * @param {string} type The type of member that left (primary|secondary|arbiter)
 * @param {Server} server The server object that left
 */

/**
 * A server member joined the replicaset
 *
 * @event ReplSet#joined
 * @type {function}
 * @param {string} type The type of member that joined (primary|secondary|arbiter)
 * @param {Server} server The server object that joined
 */

/**
 * A server opening SDAM monitoring event
 *
 * @event ReplSet#serverOpening
 * @type {object}
 */

/**
 * A server closed SDAM monitoring event
 *
 * @event ReplSet#serverClosed
 * @type {object}
 */

/**
 * A server description SDAM change monitoring event
 *
 * @event ReplSet#serverDescriptionChanged
 * @type {object}
 */

/**
 * A topology open SDAM event
 *
 * @event ReplSet#topologyOpening
 * @type {object}
 */

/**
 * A topology closed SDAM event
 *
 * @event ReplSet#topologyClosed
 * @type {object}
 */

/**
 * A topology structure SDAM change event
 *
 * @event ReplSet#topologyDescriptionChanged
 * @type {object}
 */

/**
 * A topology serverHeartbeatStarted SDAM event
 *
 * @event ReplSet#serverHeartbeatStarted
 * @type {object}
 */

/**
 * A topology serverHeartbeatFailed SDAM event
 *
 * @event ReplSet#serverHeartbeatFailed
 * @type {object}
 */

/**
 * A topology serverHeartbeatSucceeded SDAM change event
 *
 * @event ReplSet#serverHeartbeatSucceeded
 * @type {object}
 */

/**
 * An event emitted indicating a command was started, if command monitoring is enabled
 *
 * @event ReplSet#commandStarted
 * @type {object}
 */

/**
 * An event emitted indicating a command succeeded, if command monitoring is enabled
 *
 * @event ReplSet#commandSucceeded
 * @type {object}
 */

/**
 * An event emitted indicating a command failed, if command monitoring is enabled
 *
 * @event ReplSet#commandFailed
 * @type {object}
 */

module.exports = ReplSet;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Sat Sep 21 2019 13:04:07 GMT-0400 (GMT-04:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>


</body>
</html>
