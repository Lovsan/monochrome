<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>plugins/storage_mongo/node_modules/mongodb/lib/core/connection/pool.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Admin.html">Admin</a><ul class='methods'><li data-type='method'><a href="Admin.html#addUser">addUser</a></li><li data-type='method'><a href="Admin.html#buildInfo">buildInfo</a></li><li data-type='method'><a href="Admin.html#command">command</a></li><li data-type='method'><a href="Admin.html#listDatabases">listDatabases</a></li><li data-type='method'><a href="Admin.html#ping">ping</a></li><li data-type='method'><a href="Admin.html#removeUser">removeUser</a></li><li data-type='method'><a href="Admin.html#replSetGetStatus">replSetGetStatus</a></li><li data-type='method'><a href="Admin.html#serverInfo">serverInfo</a></li><li data-type='method'><a href="Admin.html#serverStatus">serverStatus</a></li><li data-type='method'><a href="Admin.html#validateCollection">validateCollection</a></li></ul></li><li><a href="AggregationCursor.html">AggregationCursor</a><ul class='methods'><li data-type='method'><a href="AggregationCursor.html#batchSize">batchSize</a></li><li data-type='method'><a href="AggregationCursor.html#clone">clone</a></li><li data-type='method'><a href="AggregationCursor.html#close">close</a></li><li data-type='method'><a href="AggregationCursor.html#each">each</a></li><li data-type='method'><a href="AggregationCursor.html#explain">explain</a></li><li data-type='method'><a href="AggregationCursor.html#forEach">forEach</a></li><li data-type='method'><a href="AggregationCursor.html#geoNear">geoNear</a></li><li data-type='method'><a href="AggregationCursor.html#group">group</a></li><li data-type='method'><a href="AggregationCursor.html#hasNext">hasNext</a></li><li data-type='method'><a href="AggregationCursor.html#isClosed">isClosed</a></li><li data-type='method'><a href="AggregationCursor.html#limit">limit</a></li><li data-type='method'><a href="AggregationCursor.html#lookup">lookup</a></li><li data-type='method'><a href="AggregationCursor.html#match">match</a></li><li data-type='method'><a href="AggregationCursor.html#maxTimeMS">maxTimeMS</a></li><li data-type='method'><a href="AggregationCursor.html#next">next</a></li><li data-type='method'><a href="AggregationCursor.html#out">out</a></li><li data-type='method'><a href="AggregationCursor.html#pause">pause</a></li><li data-type='method'><a href="AggregationCursor.html#pipe">pipe</a></li><li data-type='method'><a href="AggregationCursor.html#project">project</a></li><li data-type='method'><a href="AggregationCursor.html#read">read</a></li><li data-type='method'><a href="AggregationCursor.html#redact">redact</a></li><li data-type='method'><a href="AggregationCursor.html#resume">resume</a></li><li data-type='method'><a href="AggregationCursor.html#rewind">rewind</a></li><li data-type='method'><a href="AggregationCursor.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="AggregationCursor.html#skip">skip</a></li><li data-type='method'><a href="AggregationCursor.html#sort">sort</a></li><li data-type='method'><a href="AggregationCursor.html#toArray">toArray</a></li><li data-type='method'><a href="AggregationCursor.html#unpipe">unpipe</a></li><li data-type='method'><a href="AggregationCursor.html#unshift">unshift</a></li><li data-type='method'><a href="AggregationCursor.html#unwind">unwind</a></li><li data-type='method'><a href="AggregationCursor.html#wrap">wrap</a></li></ul></li><li><a href="AuthProvider.html">AuthProvider</a><ul class='methods'><li data-type='method'><a href="AuthProvider.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="AuthProvider.html#auth">auth</a></li><li data-type='method'><a href="AuthProvider.html#logout">logout</a></li><li data-type='method'><a href="AuthProvider.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="Binary.html">Binary</a><ul class='methods'><li data-type='method'><a href="Binary.html#length">length</a></li><li data-type='method'><a href="Binary.html#put">put</a></li><li data-type='method'><a href="Binary.html#read">read</a></li><li data-type='method'><a href="Binary.html#value">value</a></li><li data-type='method'><a href="Binary.html#write">write</a></li></ul></li><li><a href="Blacklist.html">Blacklist</a><ul class='methods'><li data-type='method'><a href="Blacklist.html#blacklistUser">blacklistUser</a></li><li data-type='method'><a href="Blacklist.html#isUserBlacklisted">isUserBlacklisted</a></li><li data-type='method'><a href="Blacklist.html#isUserBlacklistedQuick">isUserBlacklistedQuick</a></li><li data-type='method'><a href="Blacklist.html#unblacklistUser">unblacklistUser</a></li></ul></li><li><a href="BSONRegExp.html">BSONRegExp</a></li><li><a href="BulkOperationBase.html">BulkOperationBase</a><ul class='methods'><li data-type='method'><a href="BulkOperationBase.html#bulkExecute">bulkExecute</a></li><li data-type='method'><a href="BulkOperationBase.html#execute">execute</a></li><li data-type='method'><a href="BulkOperationBase.html#finalOptionsHandler">finalOptionsHandler</a></li><li data-type='method'><a href="BulkOperationBase.html#find">find</a></li><li data-type='method'><a href="BulkOperationBase.html#handleWriteError">handleWriteError</a></li><li data-type='method'><a href="BulkOperationBase.html#insert">insert</a></li><li data-type='method'><a href="BulkOperationBase.html#raw">raw</a></li></ul></li><li><a href="BulkWriteError.html">BulkWriteError</a></li><li><a href="BulkWriteResult.html">BulkWriteResult</a><ul class='methods'><li data-type='method'><a href="BulkWriteResult.html#getInsertedIds">getInsertedIds</a></li><li data-type='method'><a href="BulkWriteResult.html#getLastOp">getLastOp</a></li><li data-type='method'><a href="BulkWriteResult.html#getRawResponse">getRawResponse</a></li><li data-type='method'><a href="BulkWriteResult.html#getUpsertedIdAt">getUpsertedIdAt</a></li><li data-type='method'><a href="BulkWriteResult.html#getUpsertedIds">getUpsertedIds</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteConcernError">getWriteConcernError</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteErrorAt">getWriteErrorAt</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteErrorCount">getWriteErrorCount</a></li><li data-type='method'><a href="BulkWriteResult.html#getWriteErrors">getWriteErrors</a></li><li data-type='method'><a href="BulkWriteResult.html#hasWriteErrors">hasWriteErrors</a></li><li data-type='method'><a href="BulkWriteResult.html#isOk">isOk</a></li><li data-type='method'><a href="BulkWriteResult.html#toJSON">toJSON</a></li><li data-type='method'><a href="BulkWriteResult.html#toString">toString</a></li></ul></li><li><a href="ChangeStream.html">ChangeStream</a><ul class='methods'><li data-type='method'><a href="ChangeStream.html#close">close</a></li><li data-type='method'><a href="ChangeStream.html#hasNext">hasNext</a></li><li data-type='method'><a href="ChangeStream.html#isClosed">isClosed</a></li><li data-type='method'><a href="ChangeStream.html#next">next</a></li><li data-type='method'><a href="ChangeStream.html#pause">pause</a></li><li data-type='method'><a href="ChangeStream.html#pipe">pipe</a></li><li data-type='method'><a href="ChangeStream.html#resume">resume</a></li><li data-type='method'><a href="ChangeStream.html#stream">stream</a></li><li data-type='method'><a href="ChangeStream.html#unpipe">unpipe</a></li></ul></li><li><a href="Chunk.html">Chunk</a><ul class='methods'><li data-type='method'><a href="Chunk.html#buildMongoObject">buildMongoObject</a></li><li data-type='method'><a href="Chunk.html#eof">eof</a></li><li data-type='method'><a href="Chunk.html#getc">getc</a></li><li data-type='method'><a href="Chunk.html#length">length</a></li><li data-type='method'><a href="Chunk.html#read">read</a></li><li data-type='method'><a href="Chunk.html#rewind">rewind</a></li><li data-type='method'><a href="Chunk.html#save">save</a></li><li data-type='method'><a href="Chunk.html#write">write</a></li></ul></li><li><a href="ClientSession.html">ClientSession</a><ul class='methods'><li data-type='method'><a href="ClientSession.html#abortTransaction">abortTransaction</a></li><li data-type='method'><a href="ClientSession.html#advanceOperationTime">advanceOperationTime</a></li><li data-type='method'><a href="ClientSession.html#commitTransaction">commitTransaction</a></li><li data-type='method'><a href="ClientSession.html#endSession">endSession</a></li><li data-type='method'><a href="ClientSession.html#equals">equals</a></li><li data-type='method'><a href="ClientSession.html#incrementTransactionNumber">incrementTransactionNumber</a></li><li data-type='method'><a href="ClientSession.html#inTransaction">inTransaction</a></li><li data-type='method'><a href="ClientSession.html#startTransaction">startTransaction</a></li><li data-type='method'><a href="ClientSession.html#withTransaction">withTransaction</a></li></ul></li><li><a href="Code.html">Code</a></li><li><a href="Collection.html">Collection</a><ul class='methods'><li data-type='method'><a href="Collection.html#aggregate">aggregate</a></li><li data-type='method'><a href="Collection.html#bulkWrite">bulkWrite</a></li><li data-type='method'><a href="Collection.html#count">count</a></li><li data-type='method'><a href="Collection.html#countDocuments">countDocuments</a></li><li data-type='method'><a href="Collection.html#createIndex">createIndex</a></li><li data-type='method'><a href="Collection.html#createIndexes">createIndexes</a></li><li data-type='method'><a href="Collection.html#deleteMany">deleteMany</a></li><li data-type='method'><a href="Collection.html#deleteOne">deleteOne</a></li><li data-type='method'><a href="Collection.html#distinct">distinct</a></li><li data-type='method'><a href="Collection.html#drop">drop</a></li><li data-type='method'><a href="Collection.html#dropAllIndexes">dropAllIndexes</a></li><li data-type='method'><a href="Collection.html#dropIndex">dropIndex</a></li><li data-type='method'><a href="Collection.html#dropIndexes">dropIndexes</a></li><li data-type='method'><a href="Collection.html#ensureIndex">ensureIndex</a></li><li data-type='method'><a href="Collection.html#estimatedDocumentCount">estimatedDocumentCount</a></li><li data-type='method'><a href="Collection.html#find">find</a></li><li data-type='method'><a href="Collection.html#findAndModify">findAndModify</a></li><li data-type='method'><a href="Collection.html#findAndRemove">findAndRemove</a></li><li data-type='method'><a href="Collection.html#findOne">findOne</a></li><li data-type='method'><a href="Collection.html#findOneAndDelete">findOneAndDelete</a></li><li data-type='method'><a href="Collection.html#findOneAndReplace">findOneAndReplace</a></li><li data-type='method'><a href="Collection.html#findOneAndUpdate">findOneAndUpdate</a></li><li data-type='method'><a href="Collection.html#geoHaystackSearch">geoHaystackSearch</a></li><li data-type='method'><a href="Collection.html#group">group</a></li><li data-type='method'><a href="Collection.html#indexes">indexes</a></li><li data-type='method'><a href="Collection.html#indexExists">indexExists</a></li><li data-type='method'><a href="Collection.html#indexInformation">indexInformation</a></li><li data-type='method'><a href="Collection.html#initializeOrderedBulkOp">initializeOrderedBulkOp</a></li><li data-type='method'><a href="Collection.html#initializeUnorderedBulkOp">initializeUnorderedBulkOp</a></li><li data-type='method'><a href="Collection.html#insert">insert</a></li><li data-type='method'><a href="Collection.html#insertMany">insertMany</a></li><li data-type='method'><a href="Collection.html#insertOne">insertOne</a></li><li data-type='method'><a href="Collection.html#isCapped">isCapped</a></li><li data-type='method'><a href="Collection.html#listIndexes">listIndexes</a></li><li data-type='method'><a href="Collection.html#mapReduce">mapReduce</a></li><li data-type='method'><a href="Collection.html#options">options</a></li><li data-type='method'><a href="Collection.html#parallelCollectionScan">parallelCollectionScan</a></li><li data-type='method'><a href="Collection.html#reIndex">reIndex</a></li><li data-type='method'><a href="Collection.html#remove">remove</a></li><li data-type='method'><a href="Collection.html#rename">rename</a></li><li data-type='method'><a href="Collection.html#replaceOne">replaceOne</a></li><li data-type='method'><a href="Collection.html#save">save</a></li><li data-type='method'><a href="Collection.html#stats">stats</a></li><li data-type='method'><a href="Collection.html#update">update</a></li><li data-type='method'><a href="Collection.html#updateMany">updateMany</a></li><li data-type='method'><a href="Collection.html#updateOne">updateOne</a></li><li data-type='method'><a href="Collection.html#watch">watch</a></li></ul></li><li><a href="Command.html">Command</a></li><li><a href="CommandCursor.html">CommandCursor</a><ul class='methods'><li data-type='method'><a href="CommandCursor.html#batchSize">batchSize</a></li><li data-type='method'><a href="CommandCursor.html#clone">clone</a></li><li data-type='method'><a href="CommandCursor.html#close">close</a></li><li data-type='method'><a href="CommandCursor.html#each">each</a></li><li data-type='method'><a href="CommandCursor.html#hasNext">hasNext</a></li><li data-type='method'><a href="CommandCursor.html#isClosed">isClosed</a></li><li data-type='method'><a href="CommandCursor.html#maxTimeMS">maxTimeMS</a></li><li data-type='method'><a href="CommandCursor.html#next">next</a></li><li data-type='method'><a href="CommandCursor.html#pause">pause</a></li><li data-type='method'><a href="CommandCursor.html#pipe">pipe</a></li><li data-type='method'><a href="CommandCursor.html#read">read</a></li><li data-type='method'><a href="CommandCursor.html#resume">resume</a></li><li data-type='method'><a href="CommandCursor.html#rewind">rewind</a></li><li data-type='method'><a href="CommandCursor.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="CommandCursor.html#setReadPreference">setReadPreference</a></li><li data-type='method'><a href="CommandCursor.html#toArray">toArray</a></li><li data-type='method'><a href="CommandCursor.html#unpipe">unpipe</a></li><li data-type='method'><a href="CommandCursor.html#unshift">unshift</a></li><li data-type='method'><a href="CommandCursor.html#wrap">wrap</a></li></ul></li><li><a href="CommandFailedEvent.html">CommandFailedEvent</a></li><li><a href="CommandManager.html">CommandManager</a><ul class='methods'><li data-type='method'><a href="CommandManager.html#getHelpCommandHelper">getHelpCommandHelper</a></li></ul></li><li><a href="CommandResult.html">CommandResult</a><ul class='methods'><li data-type='method'><a href="CommandResult.html#toJSON">toJSON</a></li><li data-type='method'><a href="CommandResult.html#toString">toString</a></li></ul></li><li><a href="CommandStartedEvent.html">CommandStartedEvent</a></li><li><a href="CommandSucceededEvent.html">CommandSucceededEvent</a></li><li><a href="Connection.html">Connection</a><ul class='methods'><li data-type='method'><a href="Connection.html#destroy">destroy</a></li><li data-type='method'><a href="Connection.html#isConnected">isConnected</a></li><li data-type='method'><a href="Connection.html#toJSON">toJSON</a></li><li data-type='method'><a href="Connection.html#toString">toString</a></li><li data-type='method'><a href="Connection.html#unref">unref</a></li><li data-type='method'><a href="Connection.html#write">write</a></li></ul></li><li><a href="CoreCursor.html">CoreCursor</a><ul class='methods'><li data-type='method'><a href="CoreCursor.html#_next">_next</a></li><li data-type='method'><a href="CoreCursor.html#bufferedCount">bufferedCount</a></li><li data-type='method'><a href="CoreCursor.html#clone">clone</a></li><li data-type='method'><a href="CoreCursor.html#isDead">isDead</a></li><li data-type='method'><a href="CoreCursor.html#isKilled">isKilled</a></li><li data-type='method'><a href="CoreCursor.html#isNotified">isNotified</a></li><li data-type='method'><a href="CoreCursor.html#kill">kill</a></li><li data-type='method'><a href="CoreCursor.html#readBufferedDocuments">readBufferedDocuments</a></li><li data-type='method'><a href="CoreCursor.html#rewind">rewind</a></li></ul></li><li><a href="Cursor.html">Cursor</a><ul class='methods'><li data-type='method'><a href="Cursor.html#addCursorFlag">addCursorFlag</a></li><li data-type='method'><a href="Cursor.html#addQueryModifier">addQueryModifier</a></li><li data-type='method'><a href="Cursor.html#batchSize">batchSize</a></li><li data-type='method'><a href="Cursor.html#clone">clone</a></li><li data-type='method'><a href="Cursor.html#close">close</a></li><li data-type='method'><a href="Cursor.html#collation">collation</a></li><li data-type='method'><a href="Cursor.html#comment">comment</a></li><li data-type='method'><a href="Cursor.html#count">count</a></li><li data-type='method'><a href="Cursor.html#each">each</a></li><li data-type='method'><a href="Cursor.html#explain">explain</a></li><li data-type='method'><a href="Cursor.html#filter">filter</a></li><li data-type='method'><a href="Cursor.html#forEach">forEach</a></li><li data-type='method'><a href="Cursor.html#hasNext">hasNext</a></li><li data-type='method'><a href="Cursor.html#hint">hint</a></li><li data-type='method'><a href="Cursor.html#isClosed">isClosed</a></li><li data-type='method'><a href="Cursor.html#limit">limit</a></li><li data-type='method'><a href="Cursor.html#map">map</a></li><li data-type='method'><a href="Cursor.html#max">max</a></li><li data-type='method'><a href="Cursor.html#maxAwaitTimeMS">maxAwaitTimeMS</a></li><li data-type='method'><a href="Cursor.html#maxScan">maxScan</a></li><li data-type='method'><a href="Cursor.html#maxTimeMS">maxTimeMS</a></li><li data-type='method'><a href="Cursor.html#min">min</a></li><li data-type='method'><a href="Cursor.html#next">next</a></li><li data-type='method'><a href="Cursor.html#pause">pause</a></li><li data-type='method'><a href="Cursor.html#pipe">pipe</a></li><li data-type='method'><a href="Cursor.html#project">project</a></li><li data-type='method'><a href="Cursor.html#read">read</a></li><li data-type='method'><a href="Cursor.html#resume">resume</a></li><li data-type='method'><a href="Cursor.html#returnKey">returnKey</a></li><li data-type='method'><a href="Cursor.html#rewind">rewind</a></li><li data-type='method'><a href="Cursor.html#setCursorOption">setCursorOption</a></li><li data-type='method'><a href="Cursor.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="Cursor.html#setReadPreference">setReadPreference</a></li><li data-type='method'><a href="Cursor.html#showRecordId">showRecordId</a></li><li data-type='method'><a href="Cursor.html#skip">skip</a></li><li data-type='method'><a href="Cursor.html#snapshot">snapshot</a></li><li data-type='method'><a href="Cursor.html#sort">sort</a></li><li data-type='method'><a href="Cursor.html#stream">stream</a></li><li data-type='method'><a href="Cursor.html#toArray">toArray</a></li><li data-type='method'><a href="Cursor.html#transformStream">transformStream</a></li><li data-type='method'><a href="Cursor.html#unpipe">unpipe</a></li><li data-type='method'><a href="Cursor.html#unshift">unshift</a></li><li data-type='method'><a href="Cursor.html#wrap">wrap</a></li></ul></li><li><a href="Db.html">Db</a><ul class='methods'><li data-type='method'><a href="Db.html#addUser">addUser</a></li><li data-type='method'><a href="Db.html#admin">admin</a></li><li data-type='method'><a href="Db.html#aggregate">aggregate</a></li><li data-type='method'><a href="Db.html#collection">collection</a></li><li data-type='method'><a href="Db.html#collections">collections</a></li><li data-type='method'><a href="Db.html#command">command</a></li><li data-type='method'><a href="Db.html#createCollection">createCollection</a></li><li data-type='method'><a href="Db.html#createIndex">createIndex</a></li><li data-type='method'><a href="Db.html#dropCollection">dropCollection</a></li><li data-type='method'><a href="Db.html#dropDatabase">dropDatabase</a></li><li data-type='method'><a href="Db.html#ensureIndex">ensureIndex</a></li><li data-type='method'><a href="Db.html#eval">eval</a></li><li data-type='method'><a href="Db.html#executeDbAdminCommand">executeDbAdminCommand</a></li><li data-type='method'><a href="Db.html#indexInformation">indexInformation</a></li><li data-type='method'><a href="Db.html#listCollections">listCollections</a></li><li data-type='method'><a href="Db.html#profilingLevel">profilingLevel</a></li><li data-type='method'><a href="Db.html#removeUser">removeUser</a></li><li data-type='method'><a href="Db.html#renameCollection">renameCollection</a></li><li data-type='method'><a href="Db.html#setProfilingLevel">setProfilingLevel</a></li><li data-type='method'><a href="Db.html#stats">stats</a></li><li data-type='method'><a href="Db.html#unref">unref</a></li><li data-type='method'><a href="Db.html#watch">watch</a></li></ul></li><li><a href="DBRef.html">DBRef</a></li><li><a href="Decimal128.html">Decimal128</a><ul class='methods'><li data-type='method'><a href="Decimal128.html#toString">toString</a></li><li data-type='method'><a href="Decimal128.html#.fromString">fromString</a></li></ul></li><li><a href="DistinctOperation.html">DistinctOperation</a><ul class='methods'><li data-type='method'><a href="DistinctOperation.html#execute">execute</a></li></ul></li><li><a href="Double.html">Double</a><ul class='methods'><li data-type='method'><a href="Double.html#valueOf">valueOf</a></li></ul></li><li><a href="FindOperators.html">FindOperators</a><ul class='methods'><li data-type='method'><a href="FindOperators.html#delete">delete</a></li><li data-type='method'><a href="FindOperators.html#deleteOne">deleteOne</a></li><li data-type='method'><a href="FindOperators.html#remove">remove</a></li><li data-type='method'><a href="FindOperators.html#removeOne">removeOne</a></li><li data-type='method'><a href="FindOperators.html#replaceOne">replaceOne</a></li><li data-type='method'><a href="FindOperators.html#update">update</a></li><li data-type='method'><a href="FindOperators.html#updateOne">updateOne</a></li><li data-type='method'><a href="FindOperators.html#upsert">upsert</a></li></ul></li><li><a href="FPersistStoragePlugin.html">FPersistStoragePlugin</a><ul class='methods'><li data-type='method'><a href="FPersistStoragePlugin.html#clear">clear</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#close">close</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#deleteKey">deleteKey</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#editValue">editValue</a></li><li data-type='method'><a href="FPersistStoragePlugin.html#getValue">getValue</a></li></ul></li><li><a href="GeoHaystackSearchOperation.html">GeoHaystackSearchOperation</a><ul class='methods'><li data-type='method'><a href="GeoHaystackSearchOperation.html#execute">execute</a></li></ul></li><li><a href="GridFSBucket.html">GridFSBucket</a><ul class='methods'><li data-type='method'><a href="GridFSBucket.html#delete">delete</a></li><li data-type='method'><a href="GridFSBucket.html#drop">drop</a></li><li data-type='method'><a href="GridFSBucket.html#find">find</a></li><li data-type='method'><a href="GridFSBucket.html#openDownloadStream">openDownloadStream</a></li><li data-type='method'><a href="GridFSBucket.html#openDownloadStreamByName">openDownloadStreamByName</a></li><li data-type='method'><a href="GridFSBucket.html#openUploadStream">openUploadStream</a></li><li data-type='method'><a href="GridFSBucket.html#openUploadStreamWithId">openUploadStreamWithId</a></li><li data-type='method'><a href="GridFSBucket.html#rename">rename</a></li></ul></li><li><a href="GridFSBucketReadStream.html">GridFSBucketReadStream</a><ul class='methods'><li data-type='method'><a href="GridFSBucketReadStream.html#_read">_read</a></li><li data-type='method'><a href="GridFSBucketReadStream.html#abort">abort</a></li><li data-type='method'><a href="GridFSBucketReadStream.html#end">end</a></li><li data-type='method'><a href="GridFSBucketReadStream.html#start">start</a></li></ul></li><li><a href="GridFSBucketWriteStream.html">GridFSBucketWriteStream</a><ul class='methods'><li data-type='method'><a href="GridFSBucketWriteStream.html#abort">abort</a></li><li data-type='method'><a href="GridFSBucketWriteStream.html#end">end</a></li><li data-type='method'><a href="GridFSBucketWriteStream.html#write">write</a></li></ul></li><li><a href="GridStore.html">GridStore</a><ul class='methods'><li data-type='method'><a href="GridStore.html#.exist">exist</a></li><li data-type='method'><a href="GridStore.html#.list">list</a></li><li data-type='method'><a href="GridStore.html#.read">read</a></li><li data-type='method'><a href="GridStore.html#.readlines">readlines</a></li><li data-type='method'><a href="GridStore.html#.unlink">unlink</a></li><li data-type='method'><a href="GridStore.html#chunkCollection">chunkCollection</a></li><li data-type='method'><a href="GridStore.html#close">close</a></li><li data-type='method'><a href="GridStore.html#collection">collection</a></li><li data-type='method'><a href="GridStore.html#destroy">destroy</a></li><li data-type='method'><a href="GridStore.html#eof">eof</a></li><li data-type='method'><a href="GridStore.html#getc">getc</a></li><li data-type='method'><a href="GridStore.html#open">open</a></li><li data-type='method'><a href="GridStore.html#puts">puts</a></li><li data-type='method'><a href="GridStore.html#read">read</a></li><li data-type='method'><a href="GridStore.html#readlines">readlines</a></li><li data-type='method'><a href="GridStore.html#rewind">rewind</a></li><li data-type='method'><a href="GridStore.html#seek">seek</a></li><li data-type='method'><a href="GridStore.html#stream">stream</a></li><li data-type='method'><a href="GridStore.html#tell">tell</a></li><li data-type='method'><a href="GridStore.html#unlink">unlink</a></li><li data-type='method'><a href="GridStore.html#write">write</a></li><li data-type='method'><a href="GridStore.html#writeFile">writeFile</a></li></ul></li><li><a href="GridStoreStream.html">GridStoreStream</a><ul class='methods'><li data-type='method'><a href="GridStoreStream.html#end">end</a></li><li data-type='method'><a href="GridStoreStream.html#pause">pause</a></li><li data-type='method'><a href="GridStoreStream.html#pipe">pipe</a></li><li data-type='method'><a href="GridStoreStream.html#read">read</a></li><li data-type='method'><a href="GridStoreStream.html#resume">resume</a></li><li data-type='method'><a href="GridStoreStream.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="GridStoreStream.html#unpipe">unpipe</a></li><li data-type='method'><a href="GridStoreStream.html#unshift">unshift</a></li><li data-type='method'><a href="GridStoreStream.html#wrap">wrap</a></li><li data-type='method'><a href="GridStoreStream.html#write">write</a></li></ul></li><li><a href="GSSAPI.html">GSSAPI</a><ul class='methods'><li data-type='method'><a href="GSSAPI.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="GSSAPI.html#auth">auth</a></li><li data-type='method'><a href="GSSAPI.html#logout">logout</a></li><li data-type='method'><a href="GSSAPI.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="HelpCommandHelper.html">HelpCommandHelper</a><ul class='methods'><li data-type='method'><a href="HelpCommandHelper.html#findCommand">findCommand</a></li><li data-type='method'><a href="HelpCommandHelper.html#getEnabledNonHiddenCommands">getEnabledNonHiddenCommands</a></li><li data-type='method'><a href="HelpCommandHelper.html#getNonHiddenCommands">getNonHiddenCommands</a></li></ul></li><li><a href="Int32.html">Int32</a><ul class='methods'><li data-type='method'><a href="Int32.html#valueOf">valueOf</a></li></ul></li><li><a href="Logger.html">Logger</a><ul class='methods'><li data-type='method'><a href="Logger.html#.currentLogger">currentLogger</a></li><li data-type='method'><a href="Logger.html#.filter">filter</a></li><li data-type='method'><a href="Logger.html#.reset">reset</a></li><li data-type='method'><a href="Logger.html#.setCurrentLogger">setCurrentLogger</a></li><li data-type='method'><a href="Logger.html#.setLevel">setLevel</a></li><li data-type='method'><a href="Logger.html#debug">debug</a></li><li data-type='method'><a href="Logger.html#error">error</a></li><li data-type='method'><a href="Logger.html#info">info</a></li><li data-type='method'><a href="Logger.html#isDebug">isDebug</a></li><li data-type='method'><a href="Logger.html#isError">isError</a></li><li data-type='method'><a href="Logger.html#isInfo">isInfo</a></li><li data-type='method'><a href="Logger.html#isWarn">isWarn</a></li></ul></li><li><a href="Long.html">Long</a><ul class='methods'><li data-type='method'><a href="Long.html#.fromBits">fromBits</a></li><li data-type='method'><a href="Long.html#.fromInt">fromInt</a></li><li data-type='method'><a href="Long.html#.fromNumber">fromNumber</a></li><li data-type='method'><a href="Long.html#.fromString">fromString</a></li><li data-type='method'><a href="Long.html#add">add</a></li><li data-type='method'><a href="Long.html#and">and</a></li><li data-type='method'><a href="Long.html#compare">compare</a></li><li data-type='method'><a href="Long.html#div">div</a></li><li data-type='method'><a href="Long.html#equals">equals</a></li><li data-type='method'><a href="Long.html#getHighBits">getHighBits</a></li><li data-type='method'><a href="Long.html#getLowBits">getLowBits</a></li><li data-type='method'><a href="Long.html#getLowBitsUnsigned">getLowBitsUnsigned</a></li><li data-type='method'><a href="Long.html#getNumBitsAbs">getNumBitsAbs</a></li><li data-type='method'><a href="Long.html#greaterThan">greaterThan</a></li><li data-type='method'><a href="Long.html#greaterThanOrEqual">greaterThanOrEqual</a></li><li data-type='method'><a href="Long.html#isNegative">isNegative</a></li><li data-type='method'><a href="Long.html#isOdd">isOdd</a></li><li data-type='method'><a href="Long.html#isZero">isZero</a></li><li data-type='method'><a href="Long.html#lessThan">lessThan</a></li><li data-type='method'><a href="Long.html#lessThanOrEqual">lessThanOrEqual</a></li><li data-type='method'><a href="Long.html#modulo">modulo</a></li><li data-type='method'><a href="Long.html#multiply">multiply</a></li><li data-type='method'><a href="Long.html#negate">negate</a></li><li data-type='method'><a href="Long.html#not">not</a></li><li data-type='method'><a href="Long.html#notEquals">notEquals</a></li><li data-type='method'><a href="Long.html#or">or</a></li><li data-type='method'><a href="Long.html#shiftLeft">shiftLeft</a></li><li data-type='method'><a href="Long.html#shiftRight">shiftRight</a></li><li data-type='method'><a href="Long.html#shiftRightUnsigned">shiftRightUnsigned</a></li><li data-type='method'><a href="Long.html#subtract">subtract</a></li><li data-type='method'><a href="Long.html#toInt">toInt</a></li><li data-type='method'><a href="Long.html#toJSON">toJSON</a></li><li data-type='method'><a href="Long.html#toNumber">toNumber</a></li><li data-type='method'><a href="Long.html#toString">toString</a></li><li data-type='method'><a href="Long.html#xor">xor</a></li></ul></li><li><a href="MapReduceOperation.html">MapReduceOperation</a><ul class='methods'><li data-type='method'><a href="MapReduceOperation.html#execute">execute</a></li></ul></li><li><a href="MaxKey.html">MaxKey</a></li><li><a href="MessageProcessor.html">MessageProcessor</a></li><li><a href="MinKey.html">MinKey</a></li><li><a href="MongoClient.html">MongoClient</a><ul class='methods'><li data-type='method'><a href="MongoClient.html#.connect">connect</a></li><li data-type='method'><a href="MongoClient.html#close">close</a></li><li data-type='method'><a href="MongoClient.html#connect">connect</a></li><li data-type='method'><a href="MongoClient.html#db">db</a></li><li data-type='method'><a href="MongoClient.html#isConnected">isConnected</a></li><li data-type='method'><a href="MongoClient.html#startSession">startSession</a></li><li data-type='method'><a href="MongoClient.html#watch">watch</a></li><li data-type='method'><a href="MongoClient.html#withSession">withSession</a></li></ul></li><li><a href="MongoCR.html">MongoCR</a><ul class='methods'><li data-type='method'><a href="MongoCR.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="MongoCR.html#auth">auth</a></li><li data-type='method'><a href="MongoCR.html#logout">logout</a></li><li data-type='method'><a href="MongoCR.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="MongoCredentials.html">MongoCredentials</a><ul class='methods'><li data-type='method'><a href="MongoCredentials.html#equals">equals</a></li><li data-type='method'><a href="MongoCredentials.html#resolveAuthMechanism">resolveAuthMechanism</a></li></ul></li><li><a href="MongoDBStoragePlugin.html">MongoDBStoragePlugin</a><ul class='methods'><li data-type='method'><a href="MongoDBStoragePlugin.html#clear">clear</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#close">close</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#deleteKey">deleteKey</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#editValue">editValue</a></li><li data-type='method'><a href="MongoDBStoragePlugin.html#getValue">getValue</a></li></ul></li><li><a href="MongoError.html">MongoError</a><ul class='methods'><li data-type='method'><a href="MongoError.html#.create">create</a></li></ul></li><li><a href="MongoNetworkError.html">MongoNetworkError</a></li><li><a href="MongoParseError.html">MongoParseError</a></li><li><a href="Mongos.html">Mongos</a><ul class='methods'><li data-type='method'><a href="Mongos.html#auth">auth</a></li><li data-type='method'><a href="Mongos.html#command">command</a></li><li data-type='method'><a href="Mongos.html#connect">connect</a></li><li data-type='method'><a href="Mongos.html#connections">connections</a></li><li data-type='method'><a href="Mongos.html#cursor">cursor</a></li><li data-type='method'><a href="Mongos.html#destroy">destroy</a></li><li data-type='method'><a href="Mongos.html#insert">insert</a></li><li data-type='method'><a href="Mongos.html#isConnected">isConnected</a></li><li data-type='method'><a href="Mongos.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="Mongos.html#lastIsMaster">lastIsMaster</a></li><li data-type='method'><a href="Mongos.html#remove">remove</a></li><li data-type='method'><a href="Mongos.html#selectServer">selectServer</a></li><li data-type='method'><a href="Mongos.html#unref">unref</a></li><li data-type='method'><a href="Mongos.html#update">update</a></li></ul></li><li><a href="MongoTimeoutError.html">MongoTimeoutError</a></li><li><a href="MongoWriteConcernError.html">MongoWriteConcernError</a></li><li><a href="Monochrome.html">Monochrome</a><ul class='methods'><li data-type='method'><a href="Monochrome.html#connect">connect</a></li><li data-type='method'><a href="Monochrome.html#getBlacklist">getBlacklist</a></li><li data-type='method'><a href="Monochrome.html#getCommandManager">getCommandManager</a></li><li data-type='method'><a href="Monochrome.html#getErisBot">getErisBot</a></li><li data-type='method'><a href="Monochrome.html#getLogger">getLogger</a></li><li data-type='method'><a href="Monochrome.html#getNavigationManager">getNavigationManager</a></li><li data-type='method'><a href="Monochrome.html#getPersistence">getPersistence</a></li><li data-type='method'><a href="Monochrome.html#getSettings">getSettings</a></li><li data-type='method'><a href="Monochrome.html#reload">reload</a></li><li data-type='method'><a href="Monochrome.html#stop">stop</a></li><li data-type='method'><a href="Monochrome.html#userIsServerAdmin">userIsServerAdmin</a></li><li data-type='method'><a href="Monochrome.html#waitForMessage">waitForMessage</a></li></ul></li><li><a href="Navigation.html">Navigation</a><ul class='methods'><li data-type='method'><a href="Navigation.html#.fromOneDimensionalContents">fromOneDimensionalContents</a></li><li data-type='method'><a href="Navigation.html#.fromOneNavigationChapter">fromOneNavigationChapter</a></li></ul></li><li><a href="NavigationChapter.html">NavigationChapter</a><ul class='methods'><li data-type='method'><a href="NavigationChapter.html#.fromContent">fromContent</a></li></ul></li><li><a href="NavigationManager.html">NavigationManager</a><ul class='methods'><li data-type='method'><a href="NavigationManager.html#show">show</a></li></ul></li><li><a href="ObjectID.html">ObjectID</a><ul class='methods'><li data-type='method'><a href="ObjectID.html#.createFromHexString">createFromHexString</a></li><li data-type='method'><a href="ObjectID.html#.createFromTime">createFromTime</a></li><li data-type='method'><a href="ObjectID.html#.isValid">isValid</a></li><li data-type='method'><a href="ObjectID.html#equals">equals</a></li><li data-type='method'><a href="ObjectID.html#generate">generate</a></li><li data-type='method'><a href="ObjectID.html#getTimestamp">getTimestamp</a></li><li data-type='method'><a href="ObjectID.html#toHexString">toHexString</a></li></ul></li><li><a href="OperationBase.html">OperationBase</a></li><li><a href="OrderedBulkOperation.html">OrderedBulkOperation</a><ul class='methods'><li data-type='method'><a href="OrderedBulkOperation.html#bulkExecute">bulkExecute</a></li><li data-type='method'><a href="OrderedBulkOperation.html#execute">execute</a></li><li data-type='method'><a href="OrderedBulkOperation.html#finalOptionsHandler">finalOptionsHandler</a></li><li data-type='method'><a href="OrderedBulkOperation.html#find">find</a></li><li data-type='method'><a href="OrderedBulkOperation.html#handleWriteError">handleWriteError</a></li><li data-type='method'><a href="OrderedBulkOperation.html#insert">insert</a></li><li data-type='method'><a href="OrderedBulkOperation.html#raw">raw</a></li></ul></li><li><a href="Persistence.html">Persistence</a><ul class='methods'><li data-type='method'><a href="Persistence.html#deleteData">deleteData</a></li><li data-type='method'><a href="Persistence.html#editData">editData</a></li><li data-type='method'><a href="Persistence.html#editDataForServer">editDataForServer</a></li><li data-type='method'><a href="Persistence.html#editDataForUser">editDataForUser</a></li><li data-type='method'><a href="Persistence.html#editGlobalData">editGlobalData</a></li><li data-type='method'><a href="Persistence.html#editPrefixesForServerId">editPrefixesForServerId</a></li><li data-type='method'><a href="Persistence.html#getData">getData</a></li><li data-type='method'><a href="Persistence.html#getDataForServer">getDataForServer</a></li><li data-type='method'><a href="Persistence.html#getDataForUser">getDataForUser</a></li><li data-type='method'><a href="Persistence.html#getGlobalData">getGlobalData</a></li><li data-type='method'><a href="Persistence.html#getPrefixesForMessage">getPrefixesForMessage</a></li><li data-type='method'><a href="Persistence.html#getPrefixesForServer">getPrefixesForServer</a></li><li data-type='method'><a href="Persistence.html#getPrimaryPrefixForMessage">getPrimaryPrefixForMessage</a></li><li data-type='method'><a href="Persistence.html#resetPrefixesForServerId">resetPrefixesForServerId</a></li><li data-type='method'><a href="Persistence.html#stop">stop</a></li></ul></li><li><a href="Plain.html">Plain</a><ul class='methods'><li data-type='method'><a href="Plain.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="Plain.html#auth">auth</a></li><li data-type='method'><a href="Plain.html#logout">logout</a></li><li data-type='method'><a href="Plain.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="Pool.html">Pool</a><ul class='methods'><li data-type='method'><a href="Pool.html#allConnections">allConnections</a></li><li data-type='method'><a href="Pool.html#auth">auth</a></li><li data-type='method'><a href="Pool.html#connect">connect</a></li><li data-type='method'><a href="Pool.html#destroy">destroy</a></li><li data-type='method'><a href="Pool.html#get">get</a></li><li data-type='method'><a href="Pool.html#isConnected">isConnected</a></li><li data-type='method'><a href="Pool.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="Pool.html#isDisconnected">isDisconnected</a></li><li data-type='method'><a href="Pool.html#logout">logout</a></li><li data-type='method'><a href="Pool.html#reset">reset</a></li><li data-type='method'><a href="Pool.html#socketCount">socketCount</a></li><li data-type='method'><a href="Pool.html#unref">unref</a></li><li data-type='method'><a href="Pool.html#write">write</a></li></ul></li><li><a href="global.html#ReadConcern">ReadConcern</a><ul class='methods'><li data-type='method'><a href="global.html#ReadConcern#.fromOptions">fromOptions</a></li></ul></li><li><a href="ReadPreference.html">ReadPreference</a><ul class='methods'><li data-type='method'><a href="ReadPreference.html#.fromOptions">fromOptions</a></li><li data-type='method'><a href="ReadPreference.html#.isValid">isValid</a></li><li data-type='method'><a href="ReadPreference.html#equals">equals</a></li><li data-type='method'><a href="ReadPreference.html#isValid">isValid</a></li><li data-type='method'><a href="ReadPreference.html#slaveOk">slaveOk</a></li><li data-type='method'><a href="ReadPreference.html#toJSON">toJSON</a></li></ul></li><li><a href="ReplSet.html">ReplSet</a><ul class='methods'><li data-type='method'><a href="ReplSet.html#auth">auth</a></li><li data-type='method'><a href="ReplSet.html#command">command</a></li><li data-type='method'><a href="ReplSet.html#connect">connect</a></li><li data-type='method'><a href="ReplSet.html#connections">connections</a></li><li data-type='method'><a href="ReplSet.html#cursor">cursor</a></li><li data-type='method'><a href="ReplSet.html#destroy">destroy</a></li><li data-type='method'><a href="ReplSet.html#getServers">getServers</a></li><li data-type='method'><a href="ReplSet.html#insert">insert</a></li><li data-type='method'><a href="ReplSet.html#isConnected">isConnected</a></li><li data-type='method'><a href="ReplSet.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="ReplSet.html#lastIsMaster">lastIsMaster</a></li><li data-type='method'><a href="ReplSet.html#remove">remove</a></li><li data-type='method'><a href="ReplSet.html#selectServer">selectServer</a></li><li data-type='method'><a href="ReplSet.html#unref">unref</a></li><li data-type='method'><a href="ReplSet.html#update">update</a></li></ul></li><li><a href="ScramSHA.html">ScramSHA</a><ul class='methods'><li data-type='method'><a href="ScramSHA.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="ScramSHA.html#auth">auth</a></li><li data-type='method'><a href="ScramSHA.html#logout">logout</a></li><li data-type='method'><a href="ScramSHA.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="ScramSHA1.html">ScramSHA1</a><ul class='methods'><li data-type='method'><a href="ScramSHA1.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="ScramSHA1.html#logout">logout</a></li><li data-type='method'><a href="ScramSHA1.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="ScramSHA256.html">ScramSHA256</a><ul class='methods'><li data-type='method'><a href="ScramSHA256.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="ScramSHA256.html#logout">logout</a></li><li data-type='method'><a href="ScramSHA256.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="Server.html">Server</a><ul class='methods'><li data-type='method'><a href="Server.html#auth">auth</a></li><li data-type='method'><a href="Server.html#command">command</a></li><li data-type='method'><a href="Server.html#command">command</a></li><li data-type='method'><a href="Server.html#connect">connect</a></li><li data-type='method'><a href="Server.html#connect">connect</a></li><li data-type='method'><a href="Server.html#connections">connections</a></li><li data-type='method'><a href="Server.html#cursor">cursor</a></li><li data-type='method'><a href="Server.html#destroy">destroy</a></li><li data-type='method'><a href="Server.html#destroy">destroy</a></li><li data-type='method'><a href="Server.html#equals">equals</a></li><li data-type='method'><a href="Server.html#getDescription">getDescription</a></li><li data-type='method'><a href="Server.html#getMore">getMore</a></li><li data-type='method'><a href="Server.html#getMore">getMore</a></li><li data-type='method'><a href="Server.html#insert">insert</a></li><li data-type='method'><a href="Server.html#insert">insert</a></li><li data-type='method'><a href="Server.html#isConnected">isConnected</a></li><li data-type='method'><a href="Server.html#isDestroyed">isDestroyed</a></li><li data-type='method'><a href="Server.html#killCursors">killCursors</a></li><li data-type='method'><a href="Server.html#killCursors">killCursors</a></li><li data-type='method'><a href="Server.html#lastIsMaster">lastIsMaster</a></li><li data-type='method'><a href="Server.html#monitor">monitor</a></li><li data-type='method'><a href="Server.html#query">query</a></li><li data-type='method'><a href="Server.html#query">query</a></li><li data-type='method'><a href="Server.html#remove">remove</a></li><li data-type='method'><a href="Server.html#remove">remove</a></li><li data-type='method'><a href="Server.html#selectServer">selectServer</a></li><li data-type='method'><a href="Server.html#unref">unref</a></li><li data-type='method'><a href="Server.html#update">update</a></li><li data-type='method'><a href="Server.html#update">update</a></li></ul></li><li><a href="ServerClosedEvent.html">ServerClosedEvent</a></li><li><a href="ServerDescription.html">ServerDescription</a></li><li><a href="ServerDescriptionChangedEvent.html">ServerDescriptionChangedEvent</a></li><li><a href="ServerHeartbeatFailedEvent.html">ServerHeartbeatFailedEvent</a></li><li><a href="ServerHeartbeatStartedEvent.html">ServerHeartbeatStartedEvent</a></li><li><a href="ServerHeartbeatSucceededEvent.html">ServerHeartbeatSucceededEvent</a></li><li><a href="ServerOpeningEvent.html">ServerOpeningEvent</a></li><li><a href="Settings.html">Settings</a><ul class='methods'><li data-type='method'><a href="Settings.html#getInternalSettingValue">getInternalSettingValue</a></li><li data-type='method'><a href="Settings.html#getRawSettingsTree">getRawSettingsTree</a></li><li data-type='method'><a href="Settings.html#getTreeNodeForUniqueId">getTreeNodeForUniqueId</a></li><li data-type='method'><a href="Settings.html#getUserFacingSettingValue">getUserFacingSettingValue</a></li><li data-type='method'><a href="Settings.html#resetServerAndChannelSettings">resetServerAndChannelSettings</a></li><li data-type='method'><a href="Settings.html#resetUserSettings">resetUserSettings</a></li><li data-type='method'><a href="Settings.html#setChannelSettingValue">setChannelSettingValue</a></li><li data-type='method'><a href="Settings.html#setServerWideSettingValue">setServerWideSettingValue</a></li><li data-type='method'><a href="Settings.html#setUserSettingValue">setUserSettingValue</a></li><li data-type='method'><a href="Settings.html#userFacingValueIsValidForSetting">userFacingValueIsValidForSetting</a></li></ul></li><li><a href="SrvPoller.html">SrvPoller</a></li><li><a href="SSPI.html">SSPI</a><ul class='methods'><li data-type='method'><a href="SSPI.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="SSPI.html#auth">auth</a></li><li data-type='method'><a href="SSPI.html#logout">logout</a></li><li data-type='method'><a href="SSPI.html#reauthenticate">reauthenticate</a></li></ul></li><li><a href="StatsOperation.html">StatsOperation</a></li><li><a href="Symbol.html">Symbol</a><ul class='methods'><li data-type='method'><a href="Symbol.html#valueOf">valueOf</a></li></ul></li><li><a href="Timestamp.html">Timestamp</a><ul class='methods'><li data-type='method'><a href="Timestamp.html#.fromBits">fromBits</a></li><li data-type='method'><a href="Timestamp.html#.fromInt">fromInt</a></li><li data-type='method'><a href="Timestamp.html#.fromNumber">fromNumber</a></li><li data-type='method'><a href="Timestamp.html#.fromString">fromString</a></li><li data-type='method'><a href="Timestamp.html#add">add</a></li><li data-type='method'><a href="Timestamp.html#and">and</a></li><li data-type='method'><a href="Timestamp.html#compare">compare</a></li><li data-type='method'><a href="Timestamp.html#div">div</a></li><li data-type='method'><a href="Timestamp.html#equals">equals</a></li><li data-type='method'><a href="Timestamp.html#getHighBits">getHighBits</a></li><li data-type='method'><a href="Timestamp.html#getLowBits">getLowBits</a></li><li data-type='method'><a href="Timestamp.html#getLowBitsUnsigned">getLowBitsUnsigned</a></li><li data-type='method'><a href="Timestamp.html#getNumBitsAbs">getNumBitsAbs</a></li><li data-type='method'><a href="Timestamp.html#greaterThan">greaterThan</a></li><li data-type='method'><a href="Timestamp.html#greaterThanOrEqual">greaterThanOrEqual</a></li><li data-type='method'><a href="Timestamp.html#isNegative">isNegative</a></li><li data-type='method'><a href="Timestamp.html#isOdd">isOdd</a></li><li data-type='method'><a href="Timestamp.html#isZero">isZero</a></li><li data-type='method'><a href="Timestamp.html#lessThan">lessThan</a></li><li data-type='method'><a href="Timestamp.html#lessThanOrEqual">lessThanOrEqual</a></li><li data-type='method'><a href="Timestamp.html#modulo">modulo</a></li><li data-type='method'><a href="Timestamp.html#multiply">multiply</a></li><li data-type='method'><a href="Timestamp.html#negate">negate</a></li><li data-type='method'><a href="Timestamp.html#not">not</a></li><li data-type='method'><a href="Timestamp.html#notEquals">notEquals</a></li><li data-type='method'><a href="Timestamp.html#or">or</a></li><li data-type='method'><a href="Timestamp.html#shiftLeft">shiftLeft</a></li><li data-type='method'><a href="Timestamp.html#shiftRight">shiftRight</a></li><li data-type='method'><a href="Timestamp.html#shiftRightUnsigned">shiftRightUnsigned</a></li><li data-type='method'><a href="Timestamp.html#subtract">subtract</a></li><li data-type='method'><a href="Timestamp.html#toInt">toInt</a></li><li data-type='method'><a href="Timestamp.html#toJSON">toJSON</a></li><li data-type='method'><a href="Timestamp.html#toNumber">toNumber</a></li><li data-type='method'><a href="Timestamp.html#toString">toString</a></li><li data-type='method'><a href="Timestamp.html#xor">xor</a></li></ul></li><li><a href="Topology.html">Topology</a><ul class='methods'><li data-type='method'><a href="Topology.html#close">close</a></li><li data-type='method'><a href="Topology.html#command">command</a></li><li data-type='method'><a href="Topology.html#connect">connect</a></li><li data-type='method'><a href="Topology.html#connections">connections</a></li><li data-type='method'><a href="Topology.html#cursor">cursor</a></li><li data-type='method'><a href="Topology.html#endSessions">endSessions</a></li><li data-type='method'><a href="Topology.html#hasSessionSupport">hasSessionSupport</a></li><li data-type='method'><a href="Topology.html#insert">insert</a></li><li data-type='method'><a href="Topology.html#remove">remove</a></li><li data-type='method'><a href="Topology.html#selectServer">selectServer</a></li><li data-type='method'><a href="Topology.html#serverUpdateHandler">serverUpdateHandler</a></li><li data-type='method'><a href="Topology.html#shouldCheckForSessionSupport">shouldCheckForSessionSupport</a></li><li data-type='method'><a href="Topology.html#startSession">startSession</a></li><li data-type='method'><a href="Topology.html#update">update</a></li></ul></li><li><a href="TopologyClosedEvent.html">TopologyClosedEvent</a></li><li><a href="TopologyDescription.html">TopologyDescription</a><ul class='methods'><li data-type='method'><a href="TopologyDescription.html#hasServer">hasServer</a></li><li data-type='method'><a href="TopologyDescription.html#update">update</a></li><li data-type='method'><a href="TopologyDescription.html#updateFromSrvPollingEvent">updateFromSrvPollingEvent</a></li></ul></li><li><a href="TopologyDescriptionChangedEvent.html">TopologyDescriptionChangedEvent</a></li><li><a href="TopologyOpeningEvent.html">TopologyOpeningEvent</a></li><li><a href="UnorderedBulkOperation.html">UnorderedBulkOperation</a><ul class='methods'><li data-type='method'><a href="UnorderedBulkOperation.html#bulkExecute">bulkExecute</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#execute">execute</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#finalOptionsHandler">finalOptionsHandler</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#find">find</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#handleWriteError">handleWriteError</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#insert">insert</a></li><li data-type='method'><a href="UnorderedBulkOperation.html#raw">raw</a></li></ul></li><li><a href="global.html#WriteConcern">WriteConcern</a><ul class='methods'><li data-type='method'><a href="global.html#WriteConcern#.fromOptions">fromOptions</a></li></ul></li><li><a href="WriteConcernError.html">WriteConcernError</a><ul class='methods'><li data-type='method'><a href="WriteConcernError.html#toJSON">toJSON</a></li><li data-type='method'><a href="WriteConcernError.html#toString">toString</a></li></ul></li><li><a href="WriteError.html">WriteError</a><ul class='methods'><li data-type='method'><a href="WriteError.html#getOperation">getOperation</a></li><li data-type='method'><a href="WriteError.html#toJSON">toJSON</a></li><li data-type='method'><a href="WriteError.html#toString">toString</a></li></ul></li><li><a href="X509.html">X509</a><ul class='methods'><li data-type='method'><a href="X509.html#addCredentials">addCredentials</a></li><li data-type='method'><a href="X509.html#auth">auth</a></li><li data-type='method'><a href="X509.html#logout">logout</a></li><li data-type='method'><a href="X509.html#reauthenticate">reauthenticate</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-_bunyan.Logger_.html">bunyan.Logger</a></li><li><a href="external-_Eris.Client_.html">Eris.Client</a></li><li><a href="external-_Eris.Message_.html">Eris.Message</a></li><li><a href="external-_Eris.TextChannel_.html">Eris.TextChannel</a></li><li><a href="external-Duplex.html">Duplex</a><ul class='methods'><li data-type='method'><a href="external-Duplex.html#end">end</a></li><li data-type='method'><a href="external-Duplex.html#pause">pause</a></li><li data-type='method'><a href="external-Duplex.html#pipe">pipe</a></li><li data-type='method'><a href="external-Duplex.html#read">read</a></li><li data-type='method'><a href="external-Duplex.html#resume">resume</a></li><li data-type='method'><a href="external-Duplex.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="external-Duplex.html#unpipe">unpipe</a></li><li data-type='method'><a href="external-Duplex.html#unshift">unshift</a></li><li data-type='method'><a href="external-Duplex.html#wrap">wrap</a></li><li data-type='method'><a href="external-Duplex.html#write">write</a></li></ul></li><li><a href="external-Readable.html">Readable</a><ul class='methods'><li data-type='method'><a href="external-Readable.html#pause">pause</a></li><li data-type='method'><a href="external-Readable.html#pipe">pipe</a></li><li data-type='method'><a href="external-Readable.html#read">read</a></li><li data-type='method'><a href="external-Readable.html#resume">resume</a></li><li data-type='method'><a href="external-Readable.html#setEncoding">setEncoding</a></li><li data-type='method'><a href="external-Readable.html#unpipe">unpipe</a></li><li data-type='method'><a href="external-Readable.html#unshift">unshift</a></li><li data-type='method'><a href="external-Readable.html#wrap">wrap</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="AggregationCursor.html#event:close">close</a></li><li><a href="AggregationCursor.html#event:data">data</a></li><li><a href="AggregationCursor.html#event:end">end</a></li><li><a href="AggregationCursor.html#event:readable">readable</a></li><li><a href="ChangeStream.html#event:change">change</a></li><li><a href="ChangeStream.html#event:close">close</a></li><li><a href="ChangeStream.html#event:end">end</a></li><li><a href="ChangeStream.html#event:error">error</a></li><li><a href="ChangeStream.html#event:resumeTokenChanged">resumeTokenChanged</a></li><li><a href="CommandCursor.html#event:close">close</a></li><li><a href="CommandCursor.html#event:data">data</a></li><li><a href="CommandCursor.html#event:end">end</a></li><li><a href="CommandCursor.html#event:readable">readable</a></li><li><a href="Connection.html#event:close">close</a></li><li><a href="Connection.html#event:connect">connect</a></li><li><a href="Connection.html#event:error">error</a></li><li><a href="Connection.html#event:message">message</a></li><li><a href="Connection.html#event:parseError">parseError</a></li><li><a href="Connection.html#event:timeout">timeout</a></li><li><a href="Cursor.html#event:close">close</a></li><li><a href="Cursor.html#event:data">data</a></li><li><a href="Cursor.html#event:end">end</a></li><li><a href="Cursor.html#event:readable">readable</a></li><li><a href="Db.html#event:close">close</a></li><li><a href="Db.html#event:error">error</a></li><li><a href="Db.html#event:fullsetup">fullsetup</a></li><li><a href="Db.html#event:parseError">parseError</a></li><li><a href="Db.html#event:reconnect">reconnect</a></li><li><a href="Db.html#event:timeout">timeout</a></li><li><a href="GridFSBucket.html#event:index">index</a></li><li><a href="GridFSBucketReadStream.html#event:close">close</a></li><li><a href="GridFSBucketReadStream.html#event:data">data</a></li><li><a href="GridFSBucketReadStream.html#event:end">end</a></li><li><a href="GridFSBucketReadStream.html#event:error">error</a></li><li><a href="GridFSBucketReadStream.html#event:file">file</a></li><li><a href="GridFSBucketWriteStream.html#event:error">error</a></li><li><a href="GridFSBucketWriteStream.html#event:finish">finish</a></li><li><a href="GridStoreStream.html#event:close">close</a></li><li><a href="GridStoreStream.html#event:data">data</a></li><li><a href="GridStoreStream.html#event:drain">drain</a></li><li><a href="GridStoreStream.html#event:end">end</a></li><li><a href="GridStoreStream.html#event:error">error</a></li><li><a href="GridStoreStream.html#event:finish">finish</a></li><li><a href="GridStoreStream.html#event:pipe">pipe</a></li><li><a href="GridStoreStream.html#event:readable">readable</a></li><li><a href="GridStoreStream.html#event:unpipe">unpipe</a></li><li><a href="Mongos.html#event:all">all</a></li><li><a href="Mongos.html#event:close">close</a></li><li><a href="Mongos.html#event:commandFailed">commandFailed</a></li><li><a href="Mongos.html#event:commandStarted">commandStarted</a></li><li><a href="Mongos.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="Mongos.html#event:connect">connect</a></li><li><a href="Mongos.html#event:error">error</a></li><li><a href="Mongos.html#event:fullsetup">fullsetup</a></li><li><a href="Mongos.html#event:ha">ha</a></li><li><a href="Mongos.html#event:joined">joined</a></li><li><a href="Mongos.html#event:left">left</a></li><li><a href="Mongos.html#event:open">open</a></li><li><a href="Mongos.html#event:parseError">parseError</a></li><li><a href="Mongos.html#event:reconnect">reconnect</a></li><li><a href="Mongos.html#event:serverClosed">serverClosed</a></li><li><a href="Mongos.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="Mongos.html#event:serverHeartbeatFailed">serverHeartbeatFailed</a></li><li><a href="Mongos.html#event:serverHeartbeatStarted">serverHeartbeatStarted</a></li><li><a href="Mongos.html#event:serverHeartbeatSucceeded">serverHeartbeatSucceeded</a></li><li><a href="Mongos.html#event:serverOpening">serverOpening</a></li><li><a href="Mongos.html#event:timeout">timeout</a></li><li><a href="Mongos.html#event:topologyClosed">topologyClosed</a></li><li><a href="Mongos.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="Mongos.html#event:topologyOpening">topologyOpening</a></li><li><a href="Pool.html#event:attemptReconnect">attemptReconnect</a></li><li><a href="Pool.html#event:close">close</a></li><li><a href="Pool.html#event:connect">connect</a></li><li><a href="Pool.html#event:error">error</a></li><li><a href="Pool.html#event:parseError">parseError</a></li><li><a href="Pool.html#event:reconnect">reconnect</a></li><li><a href="Pool.html#event:reconnectFailed">reconnectFailed</a></li><li><a href="Pool.html#event:timeout">timeout</a></li><li><a href="ReplSet.html#event:all">all</a></li><li><a href="ReplSet.html#event:close">close</a></li><li><a href="ReplSet.html#event:commandFailed">commandFailed</a></li><li><a href="ReplSet.html#event:commandStarted">commandStarted</a></li><li><a href="ReplSet.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="ReplSet.html#event:connect">connect</a></li><li><a href="ReplSet.html#event:error">error</a></li><li><a href="ReplSet.html#event:failed">failed</a></li><li><a href="ReplSet.html#event:fullsetup">fullsetup</a></li><li><a href="ReplSet.html#event:ha">ha</a></li><li><a href="ReplSet.html#event:joined">joined</a></li><li><a href="ReplSet.html#event:left">left</a></li><li><a href="ReplSet.html#event:open">open</a></li><li><a href="ReplSet.html#event:parseError">parseError</a></li><li><a href="ReplSet.html#event:reconnect">reconnect</a></li><li><a href="ReplSet.html#event:serverClosed">serverClosed</a></li><li><a href="ReplSet.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="ReplSet.html#event:serverHeartbeatFailed">serverHeartbeatFailed</a></li><li><a href="ReplSet.html#event:serverHeartbeatStarted">serverHeartbeatStarted</a></li><li><a href="ReplSet.html#event:serverHeartbeatSucceeded">serverHeartbeatSucceeded</a></li><li><a href="ReplSet.html#event:serverOpening">serverOpening</a></li><li><a href="ReplSet.html#event:timeout">timeout</a></li><li><a href="ReplSet.html#event:topologyClosed">topologyClosed</a></li><li><a href="ReplSet.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="ReplSet.html#event:topologyOpening">topologyOpening</a></li><li><a href="Server.html#event:close">close</a></li><li><a href="Server.html#event:commandFailed">commandFailed</a></li><li><a href="Server.html#event:commandStarted">commandStarted</a></li><li><a href="Server.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="Server.html#event:connect">connect</a></li><li><a href="Server.html#event:destroy">destroy</a></li><li><a href="Server.html#event:error">error</a></li><li><a href="Server.html#event:parseError">parseError</a></li><li><a href="Server.html#event:reconnect">reconnect</a></li><li><a href="Server.html#event:reconnectFailed">reconnectFailed</a></li><li><a href="Server.html#event:serverClosed">serverClosed</a></li><li><a href="Server.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="Server.html#event:serverOpening">serverOpening</a></li><li><a href="Server.html#event:timeout">timeout</a></li><li><a href="Server.html#event:topologyClosed">topologyClosed</a></li><li><a href="Server.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="Server.html#event:topologyOpening">topologyOpening</a></li><li><a href="Topology.html#event:commandFailed">commandFailed</a></li><li><a href="Topology.html#event:commandStarted">commandStarted</a></li><li><a href="Topology.html#event:commandSucceeded">commandSucceeded</a></li><li><a href="Topology.html#event:serverClosed">serverClosed</a></li><li><a href="Topology.html#event:serverDescriptionChanged">serverDescriptionChanged</a></li><li><a href="Topology.html#event:serverHeartbeatFailed">serverHeartbeatFailed</a></li><li><a href="Topology.html#event:serverHeartbeatStarted">serverHeartbeatStarted</a></li><li><a href="Topology.html#event:serverHeartbeatSucceeded">serverHeartbeatSucceeded</a></li><li><a href="Topology.html#event:serverOpening">serverOpening</a></li><li><a href="Topology.html#event:topologyClosed">topologyClosed</a></li><li><a href="Topology.html#event:topologyDescriptionChanged">topologyDescriptionChanged</a></li><li><a href="Topology.html#event:topologyOpening">topologyOpening</a></li></ul><h3>Interfaces</h3><ul><li><a href="StoragePlugin.html">StoragePlugin</a><ul class='methods'><li data-type='method'><a href="StoragePlugin.html#clear">clear</a></li><li data-type='method'><a href="StoragePlugin.html#close">close</a></li><li data-type='method'><a href="StoragePlugin.html#deleteKey">deleteKey</a></li><li data-type='method'><a href="StoragePlugin.html#editValue">editValue</a></li><li data-type='method'><a href="StoragePlugin.html#getValue">getValue</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#addToOperationsList">addToOperationsList</a></li><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#applyAuthExpectations">applyAuthExpectations</a></li><li><a href="global.html#applyConnectionStringOption">applyConnectionStringOption</a></li><li><a href="global.html#applyRetryableWrites">applyRetryableWrites</a></li><li><a href="global.html#applySession">applySession</a></li><li><a href="global.html#applyWriteConcern">applyWriteConcern</a></li><li><a href="global.html#assertTlsOptionsAreEqual">assertTlsOptionsAreEqual</a></li><li><a href="global.html#buildCountCommand">buildCountCommand</a></li><li><a href="global.html#calculateDurationInMs">calculateDurationInMs</a></li><li><a href="global.html#checkTLSOptions">checkTLSOptions</a></li><li><a href="global.html#collections">collections</a></li><li><a href="global.html#connectServers">connectServers</a></li><li><a href="global.html#count">count</a></li><li><a href="global.html#createCreateIndexCommand">createCreateIndexCommand</a></li><li><a href="global.html#createIndex">createIndex</a></li><li><a href="global.html#createIndexes">createIndexes</a></li><li><a href="global.html#createIndexUsingCreateIndexes">createIndexUsingCreateIndexes</a></li><li><a href="global.html#decorateWithCollation">decorateWithCollation</a></li><li><a href="global.html#decorateWithReadConcern">decorateWithReadConcern</a></li><li><a href="global.html#defaultAuthProviders">defaultAuthProviders</a></li><li><a href="global.html#destroyServer">destroyServer</a></li><li><a href="global.html#dropCollection">dropCollection</a></li><li><a href="global.html#dropDatabase">dropDatabase</a></li><li><a href="global.html#each">each</a></li><li><a href="global.html#eachAsync">eachAsync</a></li><li><a href="global.html#emitSDAMEvent">emitSDAMEvent</a></li><li><a href="global.html#ensureIndex">ensureIndex</a></li><li><a href="global.html#evaluate">evaluate</a></li><li><a href="global.html#executeAuthCreateUserCommand">executeAuthCreateUserCommand</a></li><li><a href="global.html#executeAuthRemoveUserCommand">executeAuthRemoveUserCommand</a></li><li><a href="global.html#executeCommand">executeCommand</a></li><li><a href="global.html#executeDbAdminCommand">executeDbAdminCommand</a></li><li><a href="global.html#executeLegacyOperation">executeLegacyOperation</a></li><li><a href="global.html#executeOperation">executeOperation</a></li><li><a href="global.html#extractCommand">extractCommand</a></li><li><a href="global.html#findAndModify">findAndModify</a></li><li><a href="global.html#group">group</a></li><li><a href="global.html#handleMongoWriteConcernError">handleMongoWriteConcernError</a></li><li><a href="global.html#hasNext">hasNext</a></li><li><a href="global.html#HOSTS_RX">HOSTS_RX</a></li><li><a href="global.html#indexes">indexes</a></li><li><a href="global.html#indexExists">indexExists</a></li><li><a href="global.html#indexInformation">indexInformation</a></li><li><a href="global.html#inherits">inherits</a></li><li><a href="global.html#isConnectionDead">isConnectionDead</a></li><li><a href="global.html#isCursorDeadAndKilled">isCursorDeadAndKilled</a></li><li><a href="global.html#isCursorDeadButNotkilled">isCursorDeadButNotkilled</a></li><li><a href="global.html#isCursorKilled">isCursorKilled</a></li><li><a href="global.html#isPromiseLike">isPromiseLike</a></li><li><a href="global.html#isRetryableError">isRetryableError</a></li><li><a href="global.html#isRetryableWritesSupported">isRetryableWritesSupported</a></li><li><a href="global.html#isSDAMUnrecoverableError">isSDAMUnrecoverableError</a></li><li><a href="global.html#latencyWindowReducer">latencyWindowReducer</a></li><li><a href="global.html#matchesParentDomain">matchesParentDomain</a></li><li><a href="global.html#maxStalenessReducer">maxStalenessReducer</a></li><li><a href="global.html#monitorServer">monitorServer</a></li><li><a href="global.html#next">next</a></li><li><a href="global.html#normalizedFunctionString">normalizedFunctionString</a></li><li><a href="global.html#parallelCollectionScan">parallelCollectionScan</a></li><li><a href="global.html#parseConnectionString">parseConnectionString</a></li><li><a href="global.html#parseQueryString">parseQueryString</a></li><li><a href="global.html#parseQueryStringItemValue">parseQueryStringItemValue</a></li><li><a href="global.html#parseServerType">parseServerType</a></li><li><a href="global.html#parseSrvConnectionString">parseSrvConnectionString</a></li><li><a href="global.html#parseStringSeedlist">parseStringSeedlist</a></li><li><a href="global.html#profilingInfo">profilingInfo</a></li><li><a href="global.html#readPreferenceServerSelector">readPreferenceServerSelector</a></li><li><a href="global.html#relayEvents">relayEvents</a></li><li><a href="global.html#removeUser">removeUser</a></li><li><a href="global.html#replSetGetStatus">replSetGetStatus</a></li><li><a href="global.html#resolveClusterTime">resolveClusterTime</a></li><li><a href="global.html#resolveReadPreference">resolveReadPreference</a></li><li><a href="global.html#save">save</a></li><li><a href="global.html#SENSITIVE_COMMANDS">SENSITIVE_COMMANDS</a></li><li><a href="global.html#serverStatus">serverStatus</a></li><li><a href="global.html#setCursorDeadAndNotified">setCursorDeadAndNotified</a></li><li><a href="global.html#setCursorNotified">setCursorNotified</a></li><li><a href="global.html#tagSetMatch">tagSetMatch</a></li><li><a href="global.html#tagSetReducer">tagSetReducer</a></li><li><a href="global.html#toArray">toArray</a></li><li><a href="global.html#uuidV4">uuidV4</a></li><li><a href="global.html#validateCollection">validateCollection</a></li><li><a href="global.html#writableServerSelector">writableServerSelector</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">plugins/storage_mongo/node_modules/mongodb/lib/core/connection/pool.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

const inherits = require('util').inherits;
const EventEmitter = require('events').EventEmitter;
const MongoError = require('../error').MongoError;
const MongoNetworkError = require('../error').MongoNetworkError;
const MongoWriteConcernError = require('../error').MongoWriteConcernError;
const Logger = require('./logger');
const f = require('util').format;
const Msg = require('./msg').Msg;
const CommandResult = require('./command_result');
const MESSAGE_HEADER_SIZE = require('../wireprotocol/shared').MESSAGE_HEADER_SIZE;
const COMPRESSION_DETAILS_SIZE = require('../wireprotocol/shared').COMPRESSION_DETAILS_SIZE;
const opcodes = require('../wireprotocol/shared').opcodes;
const compress = require('../wireprotocol/compression').compress;
const compressorIDs = require('../wireprotocol/compression').compressorIDs;
const uncompressibleCommands = require('../wireprotocol/compression').uncompressibleCommands;
const apm = require('./apm');
const Buffer = require('safe-buffer').Buffer;
const connect = require('./connect');
const updateSessionFromResponse = require('../sessions').updateSessionFromResponse;
const eachAsync = require('../utils').eachAsync;

var DISCONNECTED = 'disconnected';
var CONNECTING = 'connecting';
var CONNECTED = 'connected';
var DESTROYING = 'destroying';
var DESTROYED = 'destroyed';

const CONNECTION_EVENTS = new Set([
  'error',
  'close',
  'timeout',
  'parseError',
  'connect',
  'message'
]);

var _id = 0;

/**
 * Creates a new Pool instance
 * @class
 * @param {string} options.host The server host
 * @param {number} options.port The server port
 * @param {number} [options.size=5] Max server connection pool size
 * @param {number} [options.minSize=0] Minimum server connection pool size
 * @param {boolean} [options.reconnect=true] Server will attempt to reconnect on loss of connection
 * @param {number} [options.reconnectTries=30] Server attempt to reconnect #times
 * @param {number} [options.reconnectInterval=1000] Server will wait # milliseconds between retries
 * @param {boolean} [options.keepAlive=true] TCP Connection keep alive enabled
 * @param {number} [options.keepAliveInitialDelay=300000] Initial delay before TCP keep alive enabled
 * @param {boolean} [options.noDelay=true] TCP Connection no delay
 * @param {number} [options.connectionTimeout=30000] TCP Connection timeout setting
 * @param {number} [options.socketTimeout=360000] TCP Socket timeout setting
 * @param {number} [options.monitoringSocketTimeout=30000] TCP Socket timeout setting for replicaset monitoring socket
 * @param {boolean} [options.ssl=false] Use SSL for connection
 * @param {boolean|function} [options.checkServerIdentity=true] Ensure we check server identify during SSL, set to false to disable checking. Only works for Node 0.12.x or higher. You can pass in a boolean or your own checkServerIdentity override function.
 * @param {Buffer} [options.ca] SSL Certificate store binary buffer
 * @param {Buffer} [options.crl] SSL Certificate revocation store binary buffer
 * @param {Buffer} [options.cert] SSL Certificate binary buffer
 * @param {Buffer} [options.key] SSL Key file binary buffer
 * @param {string} [options.passPhrase] SSL Certificate pass phrase
 * @param {boolean} [options.rejectUnauthorized=false] Reject unauthorized server certificates
 * @param {boolean} [options.promoteLongs=true] Convert Long values from the db into Numbers if they fit into 53 bits
 * @param {boolean} [options.promoteValues=true] Promotes BSON values to native types where possible, set to false to only receive wrapper types.
 * @param {boolean} [options.promoteBuffers=false] Promotes Binary BSON values to native Node Buffers.
 * @param {boolean} [options.domainsEnabled=false] Enable the wrapping of the callback in the current domain, disabled by default to avoid perf hit.
 * @fires Pool#connect
 * @fires Pool#close
 * @fires Pool#error
 * @fires Pool#timeout
 * @fires Pool#parseError
 * @return {Pool} A cursor instance
 */
var Pool = function(topology, options) {
  // Add event listener
  EventEmitter.call(this);

  // Store topology for later use
  this.topology = topology;

  // Add the options
  this.options = Object.assign(
    {
      // Host and port settings
      host: 'localhost',
      port: 27017,
      // Pool default max size
      size: 5,
      // Pool default min size
      minSize: 0,
      // socket settings
      connectionTimeout: 30000,
      socketTimeout: 360000,
      keepAlive: true,
      keepAliveInitialDelay: 300000,
      noDelay: true,
      // SSL Settings
      ssl: false,
      checkServerIdentity: true,
      ca: null,
      crl: null,
      cert: null,
      key: null,
      passPhrase: null,
      rejectUnauthorized: false,
      promoteLongs: true,
      promoteValues: true,
      promoteBuffers: false,
      // Reconnection options
      reconnect: true,
      reconnectInterval: 1000,
      reconnectTries: 30,
      // Enable domains
      domainsEnabled: false
    },
    options
  );

  // Identification information
  this.id = _id++;
  // Current reconnect retries
  this.retriesLeft = this.options.reconnectTries;
  this.reconnectId = null;
  // No bson parser passed in
  if (
    !options.bson ||
    (options.bson &amp;&amp;
      (typeof options.bson.serialize !== 'function' ||
        typeof options.bson.deserialize !== 'function'))
  ) {
    throw new Error('must pass in valid bson parser');
  }

  // Logger instance
  this.logger = Logger('Pool', options);
  // Pool state
  this.state = DISCONNECTED;
  // Connections
  this.availableConnections = [];
  this.inUseConnections = [];
  this.connectingConnections = 0;
  // Currently executing
  this.executing = false;
  // Operation work queue
  this.queue = [];

  // Contains the reconnect connection
  this.reconnectConnection = null;

  // Number of consecutive timeouts caught
  this.numberOfConsecutiveTimeouts = 0;
  // Current pool Index
  this.connectionIndex = 0;

  // event handlers
  const pool = this;
  this._messageHandler = messageHandler(this);
  this._connectionCloseHandler = function(err) {
    const connection = this;
    connectionFailureHandler(pool, 'close', err, connection);
  };

  this._connectionErrorHandler = function(err) {
    const connection = this;
    connectionFailureHandler(pool, 'error', err, connection);
  };

  this._connectionTimeoutHandler = function(err) {
    const connection = this;
    connectionFailureHandler(pool, 'timeout', err, connection);
  };

  this._connectionParseErrorHandler = function(err) {
    const connection = this;
    connectionFailureHandler(pool, 'parseError', err, connection);
  };
};

inherits(Pool, EventEmitter);

Object.defineProperty(Pool.prototype, 'size', {
  enumerable: true,
  get: function() {
    return this.options.size;
  }
});

Object.defineProperty(Pool.prototype, 'minSize', {
  enumerable: true,
  get: function() {
    return this.options.minSize;
  }
});

Object.defineProperty(Pool.prototype, 'connectionTimeout', {
  enumerable: true,
  get: function() {
    return this.options.connectionTimeout;
  }
});

Object.defineProperty(Pool.prototype, 'socketTimeout', {
  enumerable: true,
  get: function() {
    return this.options.socketTimeout;
  }
});

// clears all pool state
function resetPoolState(pool) {
  pool.inUseConnections = [];
  pool.availableConnections = [];
  pool.connectingConnections = 0;
  pool.executing = false;
  pool.reconnectConnection = null;
  pool.numberOfConsecutiveTimeouts = 0;
  pool.connectionIndex = 0;
  pool.retriesLeft = pool.options.reconnectTries;
  pool.reconnectId = null;
}

function stateTransition(self, newState) {
  var legalTransitions = {
    disconnected: [CONNECTING, DESTROYING, DISCONNECTED],
    connecting: [CONNECTING, DESTROYING, CONNECTED, DISCONNECTED],
    connected: [CONNECTED, DISCONNECTED, DESTROYING],
    destroying: [DESTROYING, DESTROYED],
    destroyed: [DESTROYED]
  };

  // Get current state
  var legalStates = legalTransitions[self.state];
  if (legalStates &amp;&amp; legalStates.indexOf(newState) !== -1) {
    self.emit('stateChanged', self.state, newState);
    self.state = newState;
  } else {
    self.logger.error(
      f(
        'Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]',
        self.id,
        self.state,
        newState,
        legalStates
      )
    );
  }
}

function connectionFailureHandler(pool, event, err, conn) {
  if (conn) {
    if (conn._connectionFailHandled) return;
    conn._connectionFailHandled = true;
    conn.destroy();

    // Remove the connection
    removeConnection(pool, conn);

    // Flush all work Items on this connection
    while (conn.workItems.length > 0) {
      const workItem = conn.workItems.shift();
      if (workItem.cb) workItem.cb(err);
    }
  }

  // Did we catch a timeout, increment the numberOfConsecutiveTimeouts
  if (event === 'timeout') {
    pool.numberOfConsecutiveTimeouts = pool.numberOfConsecutiveTimeouts + 1;

    // Have we timed out more than reconnectTries in a row ?
    // Force close the pool as we are trying to connect to tcp sink hole
    if (pool.numberOfConsecutiveTimeouts > pool.options.reconnectTries) {
      pool.numberOfConsecutiveTimeouts = 0;
      // Destroy all connections and pool
      pool.destroy(true);
      // Emit close event
      return pool.emit('close', pool);
    }
  }

  // No more socket available propegate the event
  if (pool.socketCount() === 0) {
    if (pool.state !== DESTROYED &amp;&amp; pool.state !== DESTROYING) {
      stateTransition(pool, DISCONNECTED);
    }

    // Do not emit error events, they are always close events
    // do not trigger the low level error handler in node
    event = event === 'error' ? 'close' : event;
    pool.emit(event, err);
  }

  // Start reconnection attempts
  if (!pool.reconnectId &amp;&amp; pool.options.reconnect) {
    pool.reconnectId = setTimeout(attemptReconnect(pool), pool.options.reconnectInterval);
  }

  // Do we need to do anything to maintain the minimum pool size
  const totalConnections = totalConnectionCount(pool);
  if (totalConnections &lt; pool.minSize) {
    _createConnection(pool);
  }
}

function attemptReconnect(self) {
  return function() {
    self.emit('attemptReconnect', self);
    if (self.state === DESTROYED || self.state === DESTROYING) return;

    // We are connected do not try again
    if (self.isConnected()) {
      self.reconnectId = null;
      return;
    }

    self.connectingConnections++;
    connect(self.options, (err, connection) => {
      self.connectingConnections--;

      if (err) {
        if (self.logger.isDebug()) {
          self.logger.debug(`connection attempt failed with error [${JSON.stringify(err)}]`);
        }

        self.retriesLeft = self.retriesLeft - 1;
        if (self.retriesLeft &lt;= 0) {
          self.destroy();
          self.emit(
            'reconnectFailed',
            new MongoNetworkError(
              f(
                'failed to reconnect after %s attempts with interval %s ms',
                self.options.reconnectTries,
                self.options.reconnectInterval
              )
            )
          );
        } else {
          self.reconnectId = setTimeout(attemptReconnect(self), self.options.reconnectInterval);
        }

        return;
      }

      if (self.state === DESTROYED || self.state === DESTROYING) {
        return connection.destroy();
      }

      self.reconnectId = null;
      handlers.forEach(event => connection.removeAllListeners(event));
      connection.on('error', self._connectionErrorHandler);
      connection.on('close', self._connectionCloseHandler);
      connection.on('timeout', self._connectionTimeoutHandler);
      connection.on('parseError', self._connectionParseErrorHandler);
      connection.on('message', self._messageHandler);

      self.retriesLeft = self.options.reconnectTries;
      self.availableConnections.push(connection);
      self.reconnectConnection = null;
      self.emit('reconnect', self);
      _execute(self)();
    });
  };
}

function moveConnectionBetween(connection, from, to) {
  var index = from.indexOf(connection);
  // Move the connection from connecting to available
  if (index !== -1) {
    from.splice(index, 1);
    to.push(connection);
  }
}

function messageHandler(self) {
  return function(message, connection) {
    // workItem to execute
    var workItem = null;

    // Locate the workItem
    for (var i = 0; i &lt; connection.workItems.length; i++) {
      if (connection.workItems[i].requestId === message.responseTo) {
        // Get the callback
        workItem = connection.workItems[i];
        // Remove from list of workItems
        connection.workItems.splice(i, 1);
      }
    }

    if (workItem &amp;&amp; workItem.monitoring) {
      moveConnectionBetween(connection, self.inUseConnections, self.availableConnections);
    }

    // Reset timeout counter
    self.numberOfConsecutiveTimeouts = 0;

    // Reset the connection timeout if we modified it for
    // this operation
    if (workItem &amp;&amp; workItem.socketTimeout) {
      connection.resetSocketTimeout();
    }

    // Log if debug enabled
    if (self.logger.isDebug()) {
      self.logger.debug(
        f(
          'message [%s] received from %s:%s',
          message.raw.toString('hex'),
          self.options.host,
          self.options.port
        )
      );
    }

    function handleOperationCallback(self, cb, err, result) {
      // No domain enabled
      if (!self.options.domainsEnabled) {
        return process.nextTick(function() {
          return cb(err, result);
        });
      }

      // Domain enabled just call the callback
      cb(err, result);
    }

    // Keep executing, ensure current message handler does not stop execution
    if (!self.executing) {
      process.nextTick(function() {
        _execute(self)();
      });
    }

    // Time to dispatch the message if we have a callback
    if (workItem &amp;&amp; !workItem.immediateRelease) {
      try {
        // Parse the message according to the provided options
        message.parse(workItem);
      } catch (err) {
        return handleOperationCallback(self, workItem.cb, new MongoError(err));
      }

      if (message.documents[0]) {
        const document = message.documents[0];
        const session = workItem.session;
        if (session) {
          updateSessionFromResponse(session, document);
        }

        if (document.$clusterTime) {
          self.topology.clusterTime = document.$clusterTime;
        }
      }

      // Establish if we have an error
      if (workItem.command &amp;&amp; message.documents[0]) {
        const responseDoc = message.documents[0];

        if (responseDoc.writeConcernError) {
          const err = new MongoWriteConcernError(responseDoc.writeConcernError, responseDoc);
          return handleOperationCallback(self, workItem.cb, err);
        }

        if (responseDoc.ok === 0 || responseDoc.$err || responseDoc.errmsg || responseDoc.code) {
          return handleOperationCallback(self, workItem.cb, new MongoError(responseDoc));
        }
      }

      // Add the connection details
      message.hashedName = connection.hashedName;

      // Return the documents
      handleOperationCallback(
        self,
        workItem.cb,
        null,
        new CommandResult(workItem.fullResult ? message : message.documents[0], connection, message)
      );
    }
  };
}

/**
 * Return the total socket count in the pool.
 * @method
 * @return {Number} The number of socket available.
 */
Pool.prototype.socketCount = function() {
  return this.availableConnections.length + this.inUseConnections.length;
  // + this.connectingConnections.length;
};

function totalConnectionCount(pool) {
  return (
    pool.availableConnections.length + pool.inUseConnections.length + pool.connectingConnections
  );
}

/**
 * Return all pool connections
 * @method
 * @return {Connection[]} The pool connections
 */
Pool.prototype.allConnections = function() {
  return this.availableConnections.concat(this.inUseConnections);
};

/**
 * Get a pool connection (round-robin)
 * @method
 * @return {Connection}
 */
Pool.prototype.get = function() {
  return this.allConnections()[0];
};

/**
 * Is the pool connected
 * @method
 * @return {boolean}
 */
Pool.prototype.isConnected = function() {
  // We are in a destroyed state
  if (this.state === DESTROYED || this.state === DESTROYING) {
    return false;
  }

  // Get connections
  var connections = this.availableConnections.concat(this.inUseConnections);

  // Check if we have any connected connections
  for (var i = 0; i &lt; connections.length; i++) {
    if (connections[i].isConnected()) return true;
  }

  // Not connected
  return false;
};

/**
 * Was the pool destroyed
 * @method
 * @return {boolean}
 */
Pool.prototype.isDestroyed = function() {
  return this.state === DESTROYED || this.state === DESTROYING;
};

/**
 * Is the pool in a disconnected state
 * @method
 * @return {boolean}
 */
Pool.prototype.isDisconnected = function() {
  return this.state === DISCONNECTED;
};

/**
 * Connect pool
 */
Pool.prototype.connect = function() {
  if (this.state !== DISCONNECTED) {
    throw new MongoError('connection in unlawful state ' + this.state);
  }

  const self = this;
  stateTransition(this, CONNECTING);

  self.connectingConnections++;
  connect(self.options, (err, connection) => {
    self.connectingConnections--;

    if (err) {
      if (self.logger.isDebug()) {
        self.logger.debug(`connection attempt failed with error [${JSON.stringify(err)}]`);
      }

      if (self.state === CONNECTING) {
        self.emit('error', err);
      }

      return;
    }

    if (self.state === DESTROYED || self.state === DESTROYING) {
      return self.destroy();
    }

    // attach event handlers
    connection.on('error', self._connectionErrorHandler);
    connection.on('close', self._connectionCloseHandler);
    connection.on('timeout', self._connectionTimeoutHandler);
    connection.on('parseError', self._connectionParseErrorHandler);
    connection.on('message', self._messageHandler);

    // If we are in a topology, delegate the auth to it
    // This is to avoid issues where we would auth against an
    // arbiter
    if (self.options.inTopology) {
      stateTransition(self, CONNECTED);
      self.availableConnections.push(connection);
      return self.emit('connect', self, connection);
    }

    if (self.state === DESTROYED || self.state === DESTROYING) {
      return self.destroy();
    }

    if (err) {
      self.destroy();
      return self.emit('error', err);
    }

    stateTransition(self, CONNECTED);
    self.availableConnections.push(connection);

    if (self.minSize) {
      for (let i = 0; i &lt; self.minSize; i++) {
        _createConnection(self);
      }
    }

    self.emit('connect', self, connection);
  });
};

/**
 * Authenticate using a specified mechanism
 * @param {authResultCallback} callback A callback function
 */
Pool.prototype.auth = function(credentials, callback) {
  if (typeof callback === 'function') callback(null, null);
};

/**
 * Logout all users against a database
 * @param {authResultCallback} callback A callback function
 */
Pool.prototype.logout = function(dbName, callback) {
  if (typeof callback === 'function') callback(null, null);
};

/**
 * Unref the pool
 * @method
 */
Pool.prototype.unref = function() {
  // Get all the known connections
  var connections = this.availableConnections.concat(this.inUseConnections);

  connections.forEach(function(c) {
    c.unref();
  });
};

// Destroy the connections
function destroy(self, connections, options, callback) {
  eachAsync(
    connections,
    (conn, cb) => {
      for (const eventName of CONNECTION_EVENTS) {
        conn.removeAllListeners(eventName);
      }

      conn.destroy(options, cb);
    },
    err => {
      if (err) {
        if (typeof callback === 'function') callback(err, null);
        return;
      }

      resetPoolState(self);
      self.queue = [];

      stateTransition(self, DESTROYED);
      if (typeof callback === 'function') callback(null, null);
    }
  );
}

/**
 * Destroy pool
 * @method
 */
Pool.prototype.destroy = function(force, callback) {
  var self = this;
  // Do not try again if the pool is already dead
  if (this.state === DESTROYED || self.state === DESTROYING) {
    if (typeof callback === 'function') callback(null, null);
    return;
  }

  // Set state to destroyed
  stateTransition(this, DESTROYING);

  // Are we force closing
  if (force) {
    // Get all the known connections
    var connections = self.availableConnections.concat(self.inUseConnections);

    // Flush any remaining work items with
    // an error
    while (self.queue.length > 0) {
      var workItem = self.queue.shift();
      if (typeof workItem.cb === 'function') {
        workItem.cb(new MongoError('Pool was force destroyed'));
      }
    }

    // Destroy the topology
    return destroy(self, connections, { force: true }, callback);
  }

  // Clear out the reconnect if set
  if (this.reconnectId) {
    clearTimeout(this.reconnectId);
  }

  // If we have a reconnect connection running, close
  // immediately
  if (this.reconnectConnection) {
    this.reconnectConnection.destroy();
  }

  // Wait for the operations to drain before we close the pool
  function checkStatus() {
    flushMonitoringOperations(self.queue);

    if (self.queue.length === 0) {
      // Get all the known connections
      var connections = self.availableConnections.concat(self.inUseConnections);

      // Check if we have any in flight operations
      for (var i = 0; i &lt; connections.length; i++) {
        // There is an operation still in flight, reschedule a
        // check waiting for it to drain
        if (connections[i].workItems.length > 0) {
          return setTimeout(checkStatus, 1);
        }
      }

      destroy(self, connections, { force: false }, callback);
      // } else if (self.queue.length > 0 &amp;&amp; !this.reconnectId) {
    } else {
      // Ensure we empty the queue
      _execute(self)();
      // Set timeout
      setTimeout(checkStatus, 1);
    }
  }

  // Initiate drain of operations
  checkStatus();
};

/**
 * Reset all connections of this pool
 *
 * @param {function} [callback]
 */
Pool.prototype.reset = function(callback) {
  const connections = this.availableConnections.concat(this.inUseConnections);
  eachAsync(
    connections,
    (conn, cb) => {
      for (const eventName of CONNECTION_EVENTS) {
        conn.removeAllListeners(eventName);
      }

      conn.destroy({ force: true }, cb);
    },
    err => {
      if (err) {
        if (typeof callback === 'function') {
          callback(err, null);
          return;
        }
      }

      resetPoolState(this);

      // create an initial connection, and kick off execution again
      _createConnection(this);

      if (typeof callback === 'function') {
        callback(null, null);
      }
    }
  );
};

// Prepare the buffer that Pool.prototype.write() uses to send to the server
function serializeCommand(self, command, callback) {
  const originalCommandBuffer = command.toBin();

  // Check whether we and the server have agreed to use a compressor
  const shouldCompress = !!self.options.agreedCompressor;
  if (!shouldCompress || !canCompress(command)) {
    return callback(null, originalCommandBuffer);
  }

  // Transform originalCommandBuffer into OP_COMPRESSED
  const concatenatedOriginalCommandBuffer = Buffer.concat(originalCommandBuffer);
  const messageToBeCompressed = concatenatedOriginalCommandBuffer.slice(MESSAGE_HEADER_SIZE);

  // Extract information needed for OP_COMPRESSED from the uncompressed message
  const originalCommandOpCode = concatenatedOriginalCommandBuffer.readInt32LE(12);

  // Compress the message body
  compress(self, messageToBeCompressed, function(err, compressedMessage) {
    if (err) return callback(err, null);

    // Create the msgHeader of OP_COMPRESSED
    const msgHeader = Buffer.alloc(MESSAGE_HEADER_SIZE);
    msgHeader.writeInt32LE(
      MESSAGE_HEADER_SIZE + COMPRESSION_DETAILS_SIZE + compressedMessage.length,
      0
    ); // messageLength
    msgHeader.writeInt32LE(command.requestId, 4); // requestID
    msgHeader.writeInt32LE(0, 8); // responseTo (zero)
    msgHeader.writeInt32LE(opcodes.OP_COMPRESSED, 12); // opCode

    // Create the compression details of OP_COMPRESSED
    const compressionDetails = Buffer.alloc(COMPRESSION_DETAILS_SIZE);
    compressionDetails.writeInt32LE(originalCommandOpCode, 0); // originalOpcode
    compressionDetails.writeInt32LE(messageToBeCompressed.length, 4); // Size of the uncompressed compressedMessage, excluding the MsgHeader
    compressionDetails.writeUInt8(compressorIDs[self.options.agreedCompressor], 8); // compressorID

    return callback(null, [msgHeader, compressionDetails, compressedMessage]);
  });
}

/**
 * Write a message to MongoDB
 * @method
 * @return {Connection}
 */
Pool.prototype.write = function(command, options, cb) {
  var self = this;
  // Ensure we have a callback
  if (typeof options === 'function') {
    cb = options;
  }

  // Always have options
  options = options || {};

  // We need to have a callback function unless the message returns no response
  if (!(typeof cb === 'function') &amp;&amp; !options.noResponse) {
    throw new MongoError('write method must provide a callback');
  }

  // Pool was destroyed error out
  if (this.state === DESTROYED || this.state === DESTROYING) {
    // Callback with an error
    if (cb) {
      try {
        cb(new MongoError('pool destroyed'));
      } catch (err) {
        process.nextTick(function() {
          throw err;
        });
      }
    }

    return;
  }

  if (this.options.domainsEnabled &amp;&amp; process.domain &amp;&amp; typeof cb === 'function') {
    // if we have a domain bind to it
    var oldCb = cb;
    cb = process.domain.bind(function() {
      // v8 - argumentsToArray one-liner
      var args = new Array(arguments.length);
      for (var i = 0; i &lt; arguments.length; i++) {
        args[i] = arguments[i];
      }
      // bounce off event loop so domain switch takes place
      process.nextTick(function() {
        oldCb.apply(null, args);
      });
    });
  }

  // Do we have an operation
  var operation = {
    cb: cb,
    raw: false,
    promoteLongs: true,
    promoteValues: true,
    promoteBuffers: false,
    fullResult: false
  };

  // Set the options for the parsing
  operation.promoteLongs = typeof options.promoteLongs === 'boolean' ? options.promoteLongs : true;
  operation.promoteValues =
    typeof options.promoteValues === 'boolean' ? options.promoteValues : true;
  operation.promoteBuffers =
    typeof options.promoteBuffers === 'boolean' ? options.promoteBuffers : false;
  operation.raw = typeof options.raw === 'boolean' ? options.raw : false;
  operation.immediateRelease =
    typeof options.immediateRelease === 'boolean' ? options.immediateRelease : false;
  operation.documentsReturnedIn = options.documentsReturnedIn;
  operation.command = typeof options.command === 'boolean' ? options.command : false;
  operation.fullResult = typeof options.fullResult === 'boolean' ? options.fullResult : false;
  operation.noResponse = typeof options.noResponse === 'boolean' ? options.noResponse : false;
  operation.session = options.session || null;

  // Optional per operation socketTimeout
  operation.socketTimeout = options.socketTimeout;
  operation.monitoring = options.monitoring;
  // Custom socket Timeout
  if (options.socketTimeout) {
    operation.socketTimeout = options.socketTimeout;
  }

  // Get the requestId
  operation.requestId = command.requestId;

  // If command monitoring is enabled we need to modify the callback here
  if (self.options.monitorCommands) {
    this.emit('commandStarted', new apm.CommandStartedEvent(this, command));

    operation.started = process.hrtime();
    operation.cb = (err, reply) => {
      if (err) {
        self.emit(
          'commandFailed',
          new apm.CommandFailedEvent(this, command, err, operation.started)
        );
      } else {
        if (reply &amp;&amp; reply.result &amp;&amp; (reply.result.ok === 0 || reply.result.$err)) {
          self.emit(
            'commandFailed',
            new apm.CommandFailedEvent(this, command, reply.result, operation.started)
          );
        } else {
          self.emit(
            'commandSucceeded',
            new apm.CommandSucceededEvent(this, command, reply, operation.started)
          );
        }
      }

      if (typeof cb === 'function') cb(err, reply);
    };
  }

  // Prepare the operation buffer
  serializeCommand(self, command, (err, serializedBuffers) => {
    if (err) throw err;

    // Set the operation's buffer to the serialization of the commands
    operation.buffer = serializedBuffers;

    // If we have a monitoring operation schedule as the very first operation
    // Otherwise add to back of queue
    if (options.monitoring) {
      self.queue.unshift(operation);
    } else {
      self.queue.push(operation);
    }

    // Attempt to execute the operation
    if (!self.executing) {
      process.nextTick(function() {
        _execute(self)();
      });
    }
  });
};

// Return whether a command contains an uncompressible command term
// Will return true if command contains no uncompressible command terms
function canCompress(command) {
  const commandDoc = command instanceof Msg ? command.command : command.query;
  const commandName = Object.keys(commandDoc)[0];
  return uncompressibleCommands.indexOf(commandName) === -1;
}

// Remove connection method
function remove(connection, connections) {
  for (var i = 0; i &lt; connections.length; i++) {
    if (connections[i] === connection) {
      connections.splice(i, 1);
      return true;
    }
  }
}

function removeConnection(self, connection) {
  if (remove(connection, self.availableConnections)) return;
  if (remove(connection, self.inUseConnections)) return;
}

const handlers = ['close', 'message', 'error', 'timeout', 'parseError', 'connect'];
function _createConnection(self) {
  if (self.state === DESTROYED || self.state === DESTROYING) {
    return;
  }

  self.connectingConnections++;
  connect(self.options, (err, connection) => {
    self.connectingConnections--;

    if (err) {
      if (self.logger.isDebug()) {
        self.logger.debug(`connection attempt failed with error [${JSON.stringify(err)}]`);
      }

      if (!self.reconnectId &amp;&amp; self.options.reconnect) {
        self.reconnectId = setTimeout(attemptReconnect(self), self.options.reconnectInterval);
      }

      return;
    }

    if (self.state === DESTROYED || self.state === DESTROYING) {
      removeConnection(self, connection);
      return connection.destroy();
    }

    connection.on('error', self._connectionErrorHandler);
    connection.on('close', self._connectionCloseHandler);
    connection.on('timeout', self._connectionTimeoutHandler);
    connection.on('parseError', self._connectionParseErrorHandler);
    connection.on('message', self._messageHandler);

    if (self.state === DESTROYED || self.state === DESTROYING) {
      return connection.destroy();
    }

    // Remove the connection from the connectingConnections list
    removeConnection(self, connection);

    // Handle error
    if (err) {
      return connection.destroy();
    }

    // Push to available
    self.availableConnections.push(connection);
    // Execute any work waiting
    _execute(self)();
  });
}

function flushMonitoringOperations(queue) {
  for (var i = 0; i &lt; queue.length; i++) {
    if (queue[i].monitoring) {
      var workItem = queue[i];
      queue.splice(i, 1);
      workItem.cb(
        new MongoError({ message: 'no connection available for monitoring', driver: true })
      );
    }
  }
}

function _execute(self) {
  return function() {
    if (self.state === DESTROYED) return;
    // Already executing, skip
    if (self.executing) return;
    // Set pool as executing
    self.executing = true;

    // New pool connections are in progress, wait them to finish
    // before executing any more operation to ensure distribution of
    // operations
    if (self.connectingConnections > 0) {
      self.executing = false;
      return;
    }

    // As long as we have available connections
    // eslint-disable-next-line
    while (true) {
      // Total availble connections
      const totalConnections = totalConnectionCount(self);

      // No available connections available, flush any monitoring ops
      if (self.availableConnections.length === 0) {
        // Flush any monitoring operations
        flushMonitoringOperations(self.queue);
        break;
      }

      // No queue break
      if (self.queue.length === 0) {
        break;
      }

      var connection = null;
      const connections = self.availableConnections.filter(conn => conn.workItems.length === 0);

      // No connection found that has no work on it, just pick one for pipelining
      if (connections.length === 0) {
        connection =
          self.availableConnections[self.connectionIndex++ % self.availableConnections.length];
      } else {
        connection = connections[self.connectionIndex++ % connections.length];
      }

      // Is the connection connected
      if (!connection.isConnected()) {
        // Remove the disconnected connection
        removeConnection(self, connection);
        // Flush any monitoring operations in the queue, failing fast
        flushMonitoringOperations(self.queue);
        break;
      }

      // Get the next work item
      var workItem = self.queue.shift();

      // If we are monitoring we need to use a connection that is not
      // running another operation to avoid socket timeout changes
      // affecting an existing operation
      if (workItem.monitoring) {
        var foundValidConnection = false;

        for (let i = 0; i &lt; self.availableConnections.length; i++) {
          // If the connection is connected
          // And there are no pending workItems on it
          // Then we can safely use it for monitoring.
          if (
            self.availableConnections[i].isConnected() &amp;&amp;
            self.availableConnections[i].workItems.length === 0
          ) {
            foundValidConnection = true;
            connection = self.availableConnections[i];
            break;
          }
        }

        // No safe connection found, attempt to grow the connections
        // if possible and break from the loop
        if (!foundValidConnection) {
          // Put workItem back on the queue
          self.queue.unshift(workItem);

          // Attempt to grow the pool if it's not yet maxsize
          if (totalConnections &lt; self.options.size &amp;&amp; self.queue.length > 0) {
            // Create a new connection
            _createConnection(self);
          }

          // Re-execute the operation
          setTimeout(function() {
            _execute(self)();
          }, 10);

          break;
        }
      }

      // Don't execute operation until we have a full pool
      if (totalConnections &lt; self.options.size) {
        // Connection has work items, then put it back on the queue
        // and create a new connection
        if (connection.workItems.length > 0) {
          // Lets put the workItem back on the list
          self.queue.unshift(workItem);
          // Create a new connection
          _createConnection(self);
          // Break from the loop
          break;
        }
      }

      // Get actual binary commands
      var buffer = workItem.buffer;

      // If we are monitoring take the connection of the availableConnections
      if (workItem.monitoring) {
        moveConnectionBetween(connection, self.availableConnections, self.inUseConnections);
      }

      // Track the executing commands on the mongo server
      // as long as there is an expected response
      if (!workItem.noResponse) {
        connection.workItems.push(workItem);
      }

      // We have a custom socketTimeout
      if (!workItem.immediateRelease &amp;&amp; typeof workItem.socketTimeout === 'number') {
        connection.setSocketTimeout(workItem.socketTimeout);
      }

      // Capture if write was successful
      var writeSuccessful = true;

      // Put operation on the wire
      if (Array.isArray(buffer)) {
        for (let i = 0; i &lt; buffer.length; i++) {
          writeSuccessful = connection.write(buffer[i]);
        }
      } else {
        writeSuccessful = connection.write(buffer);
      }

      // if the command is designated noResponse, call the callback immeditely
      if (workItem.noResponse &amp;&amp; typeof workItem.cb === 'function') {
        workItem.cb(null, null);
      }

      if (writeSuccessful === false) {
        // If write not successful put back on queue
        self.queue.unshift(workItem);
        // Remove the disconnected connection
        removeConnection(self, connection);
        // Flush any monitoring operations in the queue, failing fast
        flushMonitoringOperations(self.queue);
        break;
      }
    }

    self.executing = false;
  };
}

// Make execution loop available for testing
Pool._execute = _execute;

/**
 * A server connect event, used to verify that the connection is up and running
 *
 * @event Pool#connect
 * @type {Pool}
 */

/**
 * A server reconnect event, used to verify that pool reconnected.
 *
 * @event Pool#reconnect
 * @type {Pool}
 */

/**
 * The server connection closed, all pool connections closed
 *
 * @event Pool#close
 * @type {Pool}
 */

/**
 * The server connection caused an error, all pool connections closed
 *
 * @event Pool#error
 * @type {Pool}
 */

/**
 * The server connection timed out, all pool connections closed
 *
 * @event Pool#timeout
 * @type {Pool}
 */

/**
 * The driver experienced an invalid message, all pool connections closed
 *
 * @event Pool#parseError
 * @type {Pool}
 */

/**
 * The driver attempted to reconnect
 *
 * @event Pool#attemptReconnect
 * @type {Pool}
 */

/**
 * The driver exhausted all reconnect attempts
 *
 * @event Pool#reconnectFailed
 * @type {Pool}
 */

module.exports = Pool;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Sat Sep 21 2019 13:04:07 GMT-0400 (GMT-04:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>


</body>
</html>
